// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`parse cst-corpus $ 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$",
    "start": 0,
    "length": 1,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "",
        "start": 1,
        "length": 0,
        "children": [],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $..* 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$..*",
    "start": 0,
    "length": 4,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "..*",
        "start": 1,
        "length": 3,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "..*",
            "start": 1,
            "length": 3,
            "children": [
              {
                "type": "descendant-segment",
                "text": "..*",
                "start": 1,
                "length": 3,
                "children": [
                  {
                    "type": "text",
                    "text": "..",
                    "start": 1,
                    "length": 2,
                    "children": [],
                  },
                  {
                    "type": "wildcard-selector",
                    "text": "*",
                    "start": 3,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $..* 2`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$..*",
    "start": 0,
    "length": 4,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "..*",
        "start": 1,
        "length": 3,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "..*",
            "start": 1,
            "length": 3,
            "children": [
              {
                "type": "descendant-segment",
                "text": "..*",
                "start": 1,
                "length": 3,
                "children": [
                  {
                    "type": "text",
                    "text": "..",
                    "start": 1,
                    "length": 2,
                    "children": [],
                  },
                  {
                    "type": "wildcard-selector",
                    "text": "*",
                    "start": 3,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $..[*] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$..[*]",
    "start": 0,
    "length": 6,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "..[*]",
        "start": 1,
        "length": 5,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "..[*]",
            "start": 1,
            "length": 5,
            "children": [
              {
                "type": "descendant-segment",
                "text": "..[*]",
                "start": 1,
                "length": 5,
                "children": [
                  {
                    "type": "text",
                    "text": "..",
                    "start": 1,
                    "length": 2,
                    "children": [],
                  },
                  {
                    "type": "bracketed-selection",
                    "text": "[*]",
                    "start": 3,
                    "length": 3,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "*",
                        "start": 4,
                        "length": 1,
                        "children": [
                          {
                            "type": "wildcard-selector",
                            "text": "*",
                            "start": 4,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 5,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 5,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $..[0] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$..[0]",
    "start": 0,
    "length": 6,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "..[0]",
        "start": 1,
        "length": 5,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "..[0]",
            "start": 1,
            "length": 5,
            "children": [
              {
                "type": "descendant-segment",
                "text": "..[0]",
                "start": 1,
                "length": 5,
                "children": [
                  {
                    "type": "text",
                    "text": "..",
                    "start": 1,
                    "length": 2,
                    "children": [],
                  },
                  {
                    "type": "bracketed-selection",
                    "text": "[0]",
                    "start": 3,
                    "length": 3,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "0",
                        "start": 4,
                        "length": 1,
                        "children": [
                          {
                            "type": "index-selector",
                            "text": "0",
                            "start": 4,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 5,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 5,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $..author 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$..author",
    "start": 0,
    "length": 9,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "..author",
        "start": 1,
        "length": 8,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "..author",
            "start": 1,
            "length": 8,
            "children": [
              {
                "type": "descendant-segment",
                "text": "..author",
                "start": 1,
                "length": 8,
                "children": [
                  {
                    "type": "text",
                    "text": "..",
                    "start": 1,
                    "length": 2,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "author",
                    "start": 3,
                    "length": 6,
                    "children": [],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $..book[:2] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$..book[:2]",
    "start": 0,
    "length": 11,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "..book[:2]",
        "start": 1,
        "length": 10,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "..book",
            "start": 1,
            "length": 6,
            "children": [
              {
                "type": "descendant-segment",
                "text": "..book",
                "start": 1,
                "length": 6,
                "children": [
                  {
                    "type": "text",
                    "text": "..",
                    "start": 1,
                    "length": 2,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "book",
                    "start": 3,
                    "length": 4,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 7,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[:2]",
            "start": 7,
            "length": 4,
            "children": [
              {
                "type": "child-segment",
                "text": "[:2]",
                "start": 7,
                "length": 4,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[:2]",
                    "start": 7,
                    "length": 4,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 7,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 8,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": ":2",
                        "start": 8,
                        "length": 2,
                        "children": [
                          {
                            "type": "slice-selector",
                            "text": ":2",
                            "start": 8,
                            "length": 2,
                            "children": [
                              {
                                "type": "text",
                                "text": ":",
                                "start": 8,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 9,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "end",
                                "text": "2",
                                "start": 9,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 10,
                                "length": 0,
                                "children": [],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 10,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 10,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $..book[?@.isbn] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$..book[?@.isbn]",
    "start": 0,
    "length": 16,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "..book[?@.isbn]",
        "start": 1,
        "length": 15,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "..book",
            "start": 1,
            "length": 6,
            "children": [
              {
                "type": "descendant-segment",
                "text": "..book",
                "start": 1,
                "length": 6,
                "children": [
                  {
                    "type": "text",
                    "text": "..",
                    "start": 1,
                    "length": 2,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "book",
                    "start": 3,
                    "length": 4,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 7,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?@.isbn]",
            "start": 7,
            "length": 9,
            "children": [
              {
                "type": "child-segment",
                "text": "[?@.isbn]",
                "start": 7,
                "length": 9,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?@.isbn]",
                    "start": 7,
                    "length": 9,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 7,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 8,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?@.isbn",
                        "start": 8,
                        "length": 7,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?@.isbn",
                            "start": 8,
                            "length": 7,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 8,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 9,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "@.isbn",
                                "start": 9,
                                "length": 6,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "@.isbn",
                                    "start": 9,
                                    "length": 6,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "@.isbn",
                                        "start": 9,
                                        "length": 6,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "@.isbn",
                                            "start": 9,
                                            "length": 6,
                                            "children": [
                                              {
                                                "type": "test-expr",
                                                "text": "@.isbn",
                                                "start": 9,
                                                "length": 6,
                                                "children": [
                                                  {
                                                    "type": "filter-query",
                                                    "text": "@.isbn",
                                                    "start": 9,
                                                    "length": 6,
                                                    "children": [
                                                      {
                                                        "type": "rel-query",
                                                        "text": "@.isbn",
                                                        "start": 9,
                                                        "length": 6,
                                                        "children": [
                                                          {
                                                            "type": "current-node-identifier",
                                                            "text": "@",
                                                            "start": 9,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "segments",
                                                            "text": ".isbn",
                                                            "start": 10,
                                                            "length": 5,
                                                            "children": [
                                                              {
                                                                "type": "text",
                                                                "text": "",
                                                                "start": 10,
                                                                "length": 0,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "segment",
                                                                "text": ".isbn",
                                                                "start": 10,
                                                                "length": 5,
                                                                "children": [
                                                                  {
                                                                    "type": "child-segment",
                                                                    "text": ".isbn",
                                                                    "start": 10,
                                                                    "length": 5,
                                                                    "children": [
                                                                      {
                                                                        "type": "text",
                                                                        "text": ".",
                                                                        "start": 10,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                      {
                                                                        "type": "member-name-shorthand",
                                                                        "text": "isbn",
                                                                        "start": 11,
                                                                        "length": 4,
                                                                        "children": [],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 15,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 15,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $..book[?@.price<10] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$..book[?@.price<10]",
    "start": 0,
    "length": 20,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "..book[?@.price<10]",
        "start": 1,
        "length": 19,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "..book",
            "start": 1,
            "length": 6,
            "children": [
              {
                "type": "descendant-segment",
                "text": "..book",
                "start": 1,
                "length": 6,
                "children": [
                  {
                    "type": "text",
                    "text": "..",
                    "start": 1,
                    "length": 2,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "book",
                    "start": 3,
                    "length": 4,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 7,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?@.price<10]",
            "start": 7,
            "length": 13,
            "children": [
              {
                "type": "child-segment",
                "text": "[?@.price<10]",
                "start": 7,
                "length": 13,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?@.price<10]",
                    "start": 7,
                    "length": 13,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 7,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 8,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?@.price<10",
                        "start": 8,
                        "length": 11,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?@.price<10",
                            "start": 8,
                            "length": 11,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 8,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 9,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "@.price<10",
                                "start": 9,
                                "length": 10,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "@.price<10",
                                    "start": 9,
                                    "length": 10,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "@.price<10",
                                        "start": 9,
                                        "length": 10,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "@.price<10",
                                            "start": 9,
                                            "length": 10,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "@.price<10",
                                                "start": 9,
                                                "length": 10,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "@.price",
                                                    "start": 9,
                                                    "length": 7,
                                                    "children": [
                                                      {
                                                        "type": "singular-query",
                                                        "text": "@.price",
                                                        "start": 9,
                                                        "length": 7,
                                                        "children": [
                                                          {
                                                            "type": "rel-singular-query",
                                                            "text": "@.price",
                                                            "start": 9,
                                                            "length": 7,
                                                            "children": [
                                                              {
                                                                "type": "current-node-identifier",
                                                                "text": "@",
                                                                "start": 9,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "singular-query-segments",
                                                                "text": ".price",
                                                                "start": 10,
                                                                "length": 6,
                                                                "children": [
                                                                  {
                                                                    "type": "text",
                                                                    "text": "",
                                                                    "start": 10,
                                                                    "length": 0,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "name-segment",
                                                                    "text": ".price",
                                                                    "start": 10,
                                                                    "length": 6,
                                                                    "children": [
                                                                      {
                                                                        "type": "text",
                                                                        "text": ".",
                                                                        "start": 10,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                      {
                                                                        "type": "member-name-shorthand",
                                                                        "text": "price",
                                                                        "start": 11,
                                                                        "length": 5,
                                                                        "children": [],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 16,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": "<",
                                                    "start": 16,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 17,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": "10",
                                                    "start": 17,
                                                    "length": 2,
                                                    "children": [
                                                      {
                                                        "type": "literal",
                                                        "text": "10",
                                                        "start": 17,
                                                        "length": 2,
                                                        "children": [
                                                          {
                                                            "type": "number",
                                                            "text": "10",
                                                            "start": 17,
                                                            "length": 2,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 19,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 19,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $..book[-1] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$..book[-1]",
    "start": 0,
    "length": 11,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "..book[-1]",
        "start": 1,
        "length": 10,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "..book",
            "start": 1,
            "length": 6,
            "children": [
              {
                "type": "descendant-segment",
                "text": "..book",
                "start": 1,
                "length": 6,
                "children": [
                  {
                    "type": "text",
                    "text": "..",
                    "start": 1,
                    "length": 2,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "book",
                    "start": 3,
                    "length": 4,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 7,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[-1]",
            "start": 7,
            "length": 4,
            "children": [
              {
                "type": "child-segment",
                "text": "[-1]",
                "start": 7,
                "length": 4,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[-1]",
                    "start": 7,
                    "length": 4,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 7,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 8,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "-1",
                        "start": 8,
                        "length": 2,
                        "children": [
                          {
                            "type": "index-selector",
                            "text": "-1",
                            "start": 8,
                            "length": 2,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 10,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 10,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $..book[0,1] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$..book[0,1]",
    "start": 0,
    "length": 12,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "..book[0,1]",
        "start": 1,
        "length": 11,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "..book",
            "start": 1,
            "length": 6,
            "children": [
              {
                "type": "descendant-segment",
                "text": "..book",
                "start": 1,
                "length": 6,
                "children": [
                  {
                    "type": "text",
                    "text": "..",
                    "start": 1,
                    "length": 2,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "book",
                    "start": 3,
                    "length": 4,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 7,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[0,1]",
            "start": 7,
            "length": 5,
            "children": [
              {
                "type": "child-segment",
                "text": "[0,1]",
                "start": 7,
                "length": 5,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[0,1]",
                    "start": 7,
                    "length": 5,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 7,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 8,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "0",
                        "start": 8,
                        "length": 1,
                        "children": [
                          {
                            "type": "index-selector",
                            "text": "0",
                            "start": 8,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 9,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": ",",
                        "start": 9,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 10,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "1",
                        "start": 10,
                        "length": 1,
                        "children": [
                          {
                            "type": "index-selector",
                            "text": "1",
                            "start": 10,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 11,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 11,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $..book[2] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$..book[2]",
    "start": 0,
    "length": 10,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "..book[2]",
        "start": 1,
        "length": 9,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "..book",
            "start": 1,
            "length": 6,
            "children": [
              {
                "type": "descendant-segment",
                "text": "..book",
                "start": 1,
                "length": 6,
                "children": [
                  {
                    "type": "text",
                    "text": "..",
                    "start": 1,
                    "length": 2,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "book",
                    "start": 3,
                    "length": 4,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 7,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[2]",
            "start": 7,
            "length": 3,
            "children": [
              {
                "type": "child-segment",
                "text": "[2]",
                "start": 7,
                "length": 3,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[2]",
                    "start": 7,
                    "length": 3,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 7,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 8,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "2",
                        "start": 8,
                        "length": 1,
                        "children": [
                          {
                            "type": "index-selector",
                            "text": "2",
                            "start": 8,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 9,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 9,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $..book[2].author 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$..book[2].author",
    "start": 0,
    "length": 17,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "..book[2].author",
        "start": 1,
        "length": 16,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "..book",
            "start": 1,
            "length": 6,
            "children": [
              {
                "type": "descendant-segment",
                "text": "..book",
                "start": 1,
                "length": 6,
                "children": [
                  {
                    "type": "text",
                    "text": "..",
                    "start": 1,
                    "length": 2,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "book",
                    "start": 3,
                    "length": 4,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 7,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[2]",
            "start": 7,
            "length": 3,
            "children": [
              {
                "type": "child-segment",
                "text": "[2]",
                "start": 7,
                "length": 3,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[2]",
                    "start": 7,
                    "length": 3,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 7,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 8,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "2",
                        "start": 8,
                        "length": 1,
                        "children": [
                          {
                            "type": "index-selector",
                            "text": "2",
                            "start": 8,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 9,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 9,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 10,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".author",
            "start": 10,
            "length": 7,
            "children": [
              {
                "type": "child-segment",
                "text": ".author",
                "start": 10,
                "length": 7,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 10,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "author",
                    "start": 11,
                    "length": 6,
                    "children": [],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $..book[2].publisher 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$..book[2].publisher",
    "start": 0,
    "length": 20,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "..book[2].publisher",
        "start": 1,
        "length": 19,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "..book",
            "start": 1,
            "length": 6,
            "children": [
              {
                "type": "descendant-segment",
                "text": "..book",
                "start": 1,
                "length": 6,
                "children": [
                  {
                    "type": "text",
                    "text": "..",
                    "start": 1,
                    "length": 2,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "book",
                    "start": 3,
                    "length": 4,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 7,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[2]",
            "start": 7,
            "length": 3,
            "children": [
              {
                "type": "child-segment",
                "text": "[2]",
                "start": 7,
                "length": 3,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[2]",
                    "start": 7,
                    "length": 3,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 7,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 8,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "2",
                        "start": 8,
                        "length": 1,
                        "children": [
                          {
                            "type": "index-selector",
                            "text": "2",
                            "start": 8,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 9,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 9,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 10,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".publisher",
            "start": 10,
            "length": 10,
            "children": [
              {
                "type": "child-segment",
                "text": ".publisher",
                "start": 10,
                "length": 10,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 10,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "publisher",
                    "start": 11,
                    "length": 9,
                    "children": [],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $..j 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$..j",
    "start": 0,
    "length": 4,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "..j",
        "start": 1,
        "length": 3,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "..j",
            "start": 1,
            "length": 3,
            "children": [
              {
                "type": "descendant-segment",
                "text": "..j",
                "start": 1,
                "length": 3,
                "children": [
                  {
                    "type": "text",
                    "text": "..",
                    "start": 1,
                    "length": 2,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "j",
                    "start": 3,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $..o 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$..o",
    "start": 0,
    "length": 4,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "..o",
        "start": 1,
        "length": 3,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "..o",
            "start": 1,
            "length": 3,
            "children": [
              {
                "type": "descendant-segment",
                "text": "..o",
                "start": 1,
                "length": 3,
                "children": [
                  {
                    "type": "text",
                    "text": "..",
                    "start": 1,
                    "length": 2,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "o",
                    "start": 3,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.a 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.a",
    "start": 0,
    "length": 3,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".a",
        "start": 1,
        "length": 2,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".a",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".a",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "a",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.a..[0, 1] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.a..[0, 1]",
    "start": 0,
    "length": 11,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".a..[0, 1]",
        "start": 1,
        "length": 10,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".a",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".a",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "a",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "..[0, 1]",
            "start": 3,
            "length": 8,
            "children": [
              {
                "type": "descendant-segment",
                "text": "..[0, 1]",
                "start": 3,
                "length": 8,
                "children": [
                  {
                    "type": "text",
                    "text": "..",
                    "start": 3,
                    "length": 2,
                    "children": [],
                  },
                  {
                    "type": "bracketed-selection",
                    "text": "[0, 1]",
                    "start": 5,
                    "length": 6,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 5,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 6,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "0",
                        "start": 6,
                        "length": 1,
                        "children": [
                          {
                            "type": "index-selector",
                            "text": "0",
                            "start": 6,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 7,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": ",",
                        "start": 7,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": " ",
                        "start": 8,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "1",
                        "start": 9,
                        "length": 1,
                        "children": [
                          {
                            "type": "index-selector",
                            "text": "1",
                            "start": 9,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 10,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 10,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.a.d 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.a.d",
    "start": 0,
    "length": 5,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".a.d",
        "start": 1,
        "length": 4,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".a",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".a",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "a",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".d",
            "start": 3,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".d",
                "start": 3,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 3,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "d",
                    "start": 4,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.a[*] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.a[*]",
    "start": 0,
    "length": 6,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".a[*]",
        "start": 1,
        "length": 5,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".a",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".a",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "a",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[*]",
            "start": 3,
            "length": 3,
            "children": [
              {
                "type": "child-segment",
                "text": "[*]",
                "start": 3,
                "length": 3,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[*]",
                    "start": 3,
                    "length": 3,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "*",
                        "start": 4,
                        "length": 1,
                        "children": [
                          {
                            "type": "wildcard-selector",
                            "text": "*",
                            "start": 4,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 5,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 5,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.a[?(@.b == 'kilo')] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.a[?(@.b == 'kilo')]",
    "start": 0,
    "length": 21,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".a[?(@.b == 'kilo')]",
        "start": 1,
        "length": 20,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".a",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".a",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "a",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?(@.b == 'kilo')]",
            "start": 3,
            "length": 18,
            "children": [
              {
                "type": "child-segment",
                "text": "[?(@.b == 'kilo')]",
                "start": 3,
                "length": 18,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?(@.b == 'kilo')]",
                    "start": 3,
                    "length": 18,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?(@.b == 'kilo')",
                        "start": 4,
                        "length": 16,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?(@.b == 'kilo')",
                            "start": 4,
                            "length": 16,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 4,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 5,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "(@.b == 'kilo')",
                                "start": 5,
                                "length": 15,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "(@.b == 'kilo')",
                                    "start": 5,
                                    "length": 15,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "(@.b == 'kilo')",
                                        "start": 5,
                                        "length": 15,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "(@.b == 'kilo')",
                                            "start": 5,
                                            "length": 15,
                                            "children": [
                                              {
                                                "type": "paren-expr",
                                                "text": "(@.b == 'kilo')",
                                                "start": 5,
                                                "length": 15,
                                                "children": [
                                                  {
                                                    "type": "text",
                                                    "text": "(",
                                                    "start": 5,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 6,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "logical-expr",
                                                    "text": "@.b == 'kilo'",
                                                    "start": 6,
                                                    "length": 13,
                                                    "children": [
                                                      {
                                                        "type": "logical-or-expr",
                                                        "text": "@.b == 'kilo'",
                                                        "start": 6,
                                                        "length": 13,
                                                        "children": [
                                                          {
                                                            "type": "logical-and-expr",
                                                            "text": "@.b == 'kilo'",
                                                            "start": 6,
                                                            "length": 13,
                                                            "children": [
                                                              {
                                                                "type": "basic-expr",
                                                                "text": "@.b == 'kilo'",
                                                                "start": 6,
                                                                "length": 13,
                                                                "children": [
                                                                  {
                                                                    "type": "comparison-expr",
                                                                    "text": "@.b == 'kilo'",
                                                                    "start": 6,
                                                                    "length": 13,
                                                                    "children": [
                                                                      {
                                                                        "type": "comparable",
                                                                        "text": "@.b",
                                                                        "start": 6,
                                                                        "length": 3,
                                                                        "children": [
                                                                          {
                                                                            "type": "singular-query",
                                                                            "text": "@.b",
                                                                            "start": 6,
                                                                            "length": 3,
                                                                            "children": [
                                                                              {
                                                                                "type": "rel-singular-query",
                                                                                "text": "@.b",
                                                                                "start": 6,
                                                                                "length": 3,
                                                                                "children": [
                                                                                  {
                                                                                    "type": "current-node-identifier",
                                                                                    "text": "@",
                                                                                    "start": 6,
                                                                                    "length": 1,
                                                                                    "children": [],
                                                                                  },
                                                                                  {
                                                                                    "type": "singular-query-segments",
                                                                                    "text": ".b",
                                                                                    "start": 7,
                                                                                    "length": 2,
                                                                                    "children": [
                                                                                      {
                                                                                        "type": "text",
                                                                                        "text": "",
                                                                                        "start": 7,
                                                                                        "length": 0,
                                                                                        "children": [],
                                                                                      },
                                                                                      {
                                                                                        "type": "name-segment",
                                                                                        "text": ".b",
                                                                                        "start": 7,
                                                                                        "length": 2,
                                                                                        "children": [
                                                                                          {
                                                                                            "type": "text",
                                                                                            "text": ".",
                                                                                            "start": 7,
                                                                                            "length": 1,
                                                                                            "children": [],
                                                                                          },
                                                                                          {
                                                                                            "type": "member-name-shorthand",
                                                                                            "text": "b",
                                                                                            "start": 8,
                                                                                            "length": 1,
                                                                                            "children": [],
                                                                                          },
                                                                                        ],
                                                                                      },
                                                                                    ],
                                                                                  },
                                                                                ],
                                                                              },
                                                                            ],
                                                                          },
                                                                        ],
                                                                      },
                                                                      {
                                                                        "type": "text",
                                                                        "text": " ",
                                                                        "start": 9,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                      {
                                                                        "type": "comparison-op",
                                                                        "text": "==",
                                                                        "start": 10,
                                                                        "length": 2,
                                                                        "children": [],
                                                                      },
                                                                      {
                                                                        "type": "text",
                                                                        "text": " ",
                                                                        "start": 12,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                      {
                                                                        "type": "comparable",
                                                                        "text": "'kilo'",
                                                                        "start": 13,
                                                                        "length": 6,
                                                                        "children": [
                                                                          {
                                                                            "type": "literal",
                                                                            "text": "'kilo'",
                                                                            "start": 13,
                                                                            "length": 6,
                                                                            "children": [
                                                                              {
                                                                                "type": "string-literal",
                                                                                "text": "'kilo'",
                                                                                "start": 13,
                                                                                "length": 6,
                                                                                "children": [
                                                                                  {
                                                                                    "type": "text",
                                                                                    "text": "'",
                                                                                    "start": 13,
                                                                                    "length": 1,
                                                                                    "children": [],
                                                                                  },
                                                                                  {
                                                                                    "type": "single-quoted",
                                                                                    "text": "k",
                                                                                    "start": 14,
                                                                                    "length": 1,
                                                                                    "children": [],
                                                                                  },
                                                                                  {
                                                                                    "type": "single-quoted",
                                                                                    "text": "i",
                                                                                    "start": 15,
                                                                                    "length": 1,
                                                                                    "children": [],
                                                                                  },
                                                                                  {
                                                                                    "type": "single-quoted",
                                                                                    "text": "l",
                                                                                    "start": 16,
                                                                                    "length": 1,
                                                                                    "children": [],
                                                                                  },
                                                                                  {
                                                                                    "type": "single-quoted",
                                                                                    "text": "o",
                                                                                    "start": 17,
                                                                                    "length": 1,
                                                                                    "children": [],
                                                                                  },
                                                                                  {
                                                                                    "type": "text",
                                                                                    "text": "'",
                                                                                    "start": 18,
                                                                                    "length": 1,
                                                                                    "children": [],
                                                                                  },
                                                                                ],
                                                                              },
                                                                            ],
                                                                          },
                                                                        ],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 19,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": ")",
                                                    "start": 19,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 20,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 20,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.a[?@ == @] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.a[?@ == @]",
    "start": 0,
    "length": 12,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".a[?@ == @]",
        "start": 1,
        "length": 11,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".a",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".a",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "a",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?@ == @]",
            "start": 3,
            "length": 9,
            "children": [
              {
                "type": "child-segment",
                "text": "[?@ == @]",
                "start": 3,
                "length": 9,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?@ == @]",
                    "start": 3,
                    "length": 9,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?@ == @",
                        "start": 4,
                        "length": 7,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?@ == @",
                            "start": 4,
                            "length": 7,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 4,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 5,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "@ == @",
                                "start": 5,
                                "length": 6,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "@ == @",
                                    "start": 5,
                                    "length": 6,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "@ == @",
                                        "start": 5,
                                        "length": 6,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "@ == @",
                                            "start": 5,
                                            "length": 6,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "@ == @",
                                                "start": 5,
                                                "length": 6,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "@",
                                                    "start": 5,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "singular-query",
                                                        "text": "@",
                                                        "start": 5,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "rel-singular-query",
                                                            "text": "@",
                                                            "start": 5,
                                                            "length": 1,
                                                            "children": [
                                                              {
                                                                "type": "current-node-identifier",
                                                                "text": "@",
                                                                "start": 5,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "singular-query-segments",
                                                                "text": "",
                                                                "start": 6,
                                                                "length": 0,
                                                                "children": [],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 6,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": "==",
                                                    "start": 7,
                                                    "length": 2,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 9,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": "@",
                                                    "start": 10,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "singular-query",
                                                        "text": "@",
                                                        "start": 10,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "rel-singular-query",
                                                            "text": "@",
                                                            "start": 10,
                                                            "length": 1,
                                                            "children": [
                                                              {
                                                                "type": "current-node-identifier",
                                                                "text": "@",
                                                                "start": 10,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "singular-query-segments",
                                                                "text": "",
                                                                "start": 11,
                                                                "length": 0,
                                                                "children": [],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 11,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 11,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.a[?@.b == $.x] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.a[?@.b == $.x]",
    "start": 0,
    "length": 16,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".a[?@.b == $.x]",
        "start": 1,
        "length": 15,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".a",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".a",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "a",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?@.b == $.x]",
            "start": 3,
            "length": 13,
            "children": [
              {
                "type": "child-segment",
                "text": "[?@.b == $.x]",
                "start": 3,
                "length": 13,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?@.b == $.x]",
                    "start": 3,
                    "length": 13,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?@.b == $.x",
                        "start": 4,
                        "length": 11,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?@.b == $.x",
                            "start": 4,
                            "length": 11,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 4,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 5,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "@.b == $.x",
                                "start": 5,
                                "length": 10,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "@.b == $.x",
                                    "start": 5,
                                    "length": 10,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "@.b == $.x",
                                        "start": 5,
                                        "length": 10,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "@.b == $.x",
                                            "start": 5,
                                            "length": 10,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "@.b == $.x",
                                                "start": 5,
                                                "length": 10,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "@.b",
                                                    "start": 5,
                                                    "length": 3,
                                                    "children": [
                                                      {
                                                        "type": "singular-query",
                                                        "text": "@.b",
                                                        "start": 5,
                                                        "length": 3,
                                                        "children": [
                                                          {
                                                            "type": "rel-singular-query",
                                                            "text": "@.b",
                                                            "start": 5,
                                                            "length": 3,
                                                            "children": [
                                                              {
                                                                "type": "current-node-identifier",
                                                                "text": "@",
                                                                "start": 5,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "singular-query-segments",
                                                                "text": ".b",
                                                                "start": 6,
                                                                "length": 2,
                                                                "children": [
                                                                  {
                                                                    "type": "text",
                                                                    "text": "",
                                                                    "start": 6,
                                                                    "length": 0,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "name-segment",
                                                                    "text": ".b",
                                                                    "start": 6,
                                                                    "length": 2,
                                                                    "children": [
                                                                      {
                                                                        "type": "text",
                                                                        "text": ".",
                                                                        "start": 6,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                      {
                                                                        "type": "member-name-shorthand",
                                                                        "text": "b",
                                                                        "start": 7,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 8,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": "==",
                                                    "start": 9,
                                                    "length": 2,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 11,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": "$.x",
                                                    "start": 12,
                                                    "length": 3,
                                                    "children": [
                                                      {
                                                        "type": "singular-query",
                                                        "text": "$.x",
                                                        "start": 12,
                                                        "length": 3,
                                                        "children": [
                                                          {
                                                            "type": "abs-singular-query",
                                                            "text": "$.x",
                                                            "start": 12,
                                                            "length": 3,
                                                            "children": [
                                                              {
                                                                "type": "root-identifier",
                                                                "text": "$",
                                                                "start": 12,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "singular-query-segments",
                                                                "text": ".x",
                                                                "start": 13,
                                                                "length": 2,
                                                                "children": [
                                                                  {
                                                                    "type": "text",
                                                                    "text": "",
                                                                    "start": 13,
                                                                    "length": 0,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "name-segment",
                                                                    "text": ".x",
                                                                    "start": 13,
                                                                    "length": 2,
                                                                    "children": [
                                                                      {
                                                                        "type": "text",
                                                                        "text": ".",
                                                                        "start": 13,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                      {
                                                                        "type": "member-name-shorthand",
                                                                        "text": "x",
                                                                        "start": 14,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 15,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 15,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.a[?@.b == 'kilo'] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.a[?@.b == 'kilo']",
    "start": 0,
    "length": 19,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".a[?@.b == 'kilo']",
        "start": 1,
        "length": 18,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".a",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".a",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "a",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?@.b == 'kilo']",
            "start": 3,
            "length": 16,
            "children": [
              {
                "type": "child-segment",
                "text": "[?@.b == 'kilo']",
                "start": 3,
                "length": 16,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?@.b == 'kilo']",
                    "start": 3,
                    "length": 16,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?@.b == 'kilo'",
                        "start": 4,
                        "length": 14,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?@.b == 'kilo'",
                            "start": 4,
                            "length": 14,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 4,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 5,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "@.b == 'kilo'",
                                "start": 5,
                                "length": 13,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "@.b == 'kilo'",
                                    "start": 5,
                                    "length": 13,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "@.b == 'kilo'",
                                        "start": 5,
                                        "length": 13,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "@.b == 'kilo'",
                                            "start": 5,
                                            "length": 13,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "@.b == 'kilo'",
                                                "start": 5,
                                                "length": 13,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "@.b",
                                                    "start": 5,
                                                    "length": 3,
                                                    "children": [
                                                      {
                                                        "type": "singular-query",
                                                        "text": "@.b",
                                                        "start": 5,
                                                        "length": 3,
                                                        "children": [
                                                          {
                                                            "type": "rel-singular-query",
                                                            "text": "@.b",
                                                            "start": 5,
                                                            "length": 3,
                                                            "children": [
                                                              {
                                                                "type": "current-node-identifier",
                                                                "text": "@",
                                                                "start": 5,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "singular-query-segments",
                                                                "text": ".b",
                                                                "start": 6,
                                                                "length": 2,
                                                                "children": [
                                                                  {
                                                                    "type": "text",
                                                                    "text": "",
                                                                    "start": 6,
                                                                    "length": 0,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "name-segment",
                                                                    "text": ".b",
                                                                    "start": 6,
                                                                    "length": 2,
                                                                    "children": [
                                                                      {
                                                                        "type": "text",
                                                                        "text": ".",
                                                                        "start": 6,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                      {
                                                                        "type": "member-name-shorthand",
                                                                        "text": "b",
                                                                        "start": 7,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 8,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": "==",
                                                    "start": 9,
                                                    "length": 2,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 11,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": "'kilo'",
                                                    "start": 12,
                                                    "length": 6,
                                                    "children": [
                                                      {
                                                        "type": "literal",
                                                        "text": "'kilo'",
                                                        "start": 12,
                                                        "length": 6,
                                                        "children": [
                                                          {
                                                            "type": "string-literal",
                                                            "text": "'kilo'",
                                                            "start": 12,
                                                            "length": 6,
                                                            "children": [
                                                              {
                                                                "type": "text",
                                                                "text": "'",
                                                                "start": 12,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "single-quoted",
                                                                "text": "k",
                                                                "start": 13,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "single-quoted",
                                                                "text": "i",
                                                                "start": 14,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "single-quoted",
                                                                "text": "l",
                                                                "start": 15,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "single-quoted",
                                                                "text": "o",
                                                                "start": 16,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "text",
                                                                "text": "'",
                                                                "start": 17,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 18,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 18,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.a[?@.b] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.a[?@.b]",
    "start": 0,
    "length": 9,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".a[?@.b]",
        "start": 1,
        "length": 8,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".a",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".a",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "a",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?@.b]",
            "start": 3,
            "length": 6,
            "children": [
              {
                "type": "child-segment",
                "text": "[?@.b]",
                "start": 3,
                "length": 6,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?@.b]",
                    "start": 3,
                    "length": 6,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?@.b",
                        "start": 4,
                        "length": 4,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?@.b",
                            "start": 4,
                            "length": 4,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 4,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 5,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "@.b",
                                "start": 5,
                                "length": 3,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "@.b",
                                    "start": 5,
                                    "length": 3,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "@.b",
                                        "start": 5,
                                        "length": 3,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "@.b",
                                            "start": 5,
                                            "length": 3,
                                            "children": [
                                              {
                                                "type": "test-expr",
                                                "text": "@.b",
                                                "start": 5,
                                                "length": 3,
                                                "children": [
                                                  {
                                                    "type": "filter-query",
                                                    "text": "@.b",
                                                    "start": 5,
                                                    "length": 3,
                                                    "children": [
                                                      {
                                                        "type": "rel-query",
                                                        "text": "@.b",
                                                        "start": 5,
                                                        "length": 3,
                                                        "children": [
                                                          {
                                                            "type": "current-node-identifier",
                                                            "text": "@",
                                                            "start": 5,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "segments",
                                                            "text": ".b",
                                                            "start": 6,
                                                            "length": 2,
                                                            "children": [
                                                              {
                                                                "type": "text",
                                                                "text": "",
                                                                "start": 6,
                                                                "length": 0,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "segment",
                                                                "text": ".b",
                                                                "start": 6,
                                                                "length": 2,
                                                                "children": [
                                                                  {
                                                                    "type": "child-segment",
                                                                    "text": ".b",
                                                                    "start": 6,
                                                                    "length": 2,
                                                                    "children": [
                                                                      {
                                                                        "type": "text",
                                                                        "text": ".",
                                                                        "start": 6,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                      {
                                                                        "type": "member-name-shorthand",
                                                                        "text": "b",
                                                                        "start": 7,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 8,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 8,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.a[?@<2 || @.b == "k"] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.a[?@<2 || @.b == "k"]",
    "start": 0,
    "length": 23,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".a[?@<2 || @.b == "k"]",
        "start": 1,
        "length": 22,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".a",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".a",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "a",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?@<2 || @.b == "k"]",
            "start": 3,
            "length": 20,
            "children": [
              {
                "type": "child-segment",
                "text": "[?@<2 || @.b == "k"]",
                "start": 3,
                "length": 20,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?@<2 || @.b == "k"]",
                    "start": 3,
                    "length": 20,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?@<2 || @.b == "k"",
                        "start": 4,
                        "length": 18,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?@<2 || @.b == "k"",
                            "start": 4,
                            "length": 18,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 4,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 5,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "@<2 || @.b == "k"",
                                "start": 5,
                                "length": 17,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "@<2 || @.b == "k"",
                                    "start": 5,
                                    "length": 17,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "@<2",
                                        "start": 5,
                                        "length": 3,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "@<2",
                                            "start": 5,
                                            "length": 3,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "@<2",
                                                "start": 5,
                                                "length": 3,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "@",
                                                    "start": 5,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "singular-query",
                                                        "text": "@",
                                                        "start": 5,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "rel-singular-query",
                                                            "text": "@",
                                                            "start": 5,
                                                            "length": 1,
                                                            "children": [
                                                              {
                                                                "type": "current-node-identifier",
                                                                "text": "@",
                                                                "start": 5,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "singular-query-segments",
                                                                "text": "",
                                                                "start": 6,
                                                                "length": 0,
                                                                "children": [],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 6,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": "<",
                                                    "start": 6,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 7,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": "2",
                                                    "start": 7,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "literal",
                                                        "text": "2",
                                                        "start": 7,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "number",
                                                            "text": "2",
                                                            "start": 7,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                      {
                                        "type": "text",
                                        "text": " ",
                                        "start": 8,
                                        "length": 1,
                                        "children": [],
                                      },
                                      {
                                        "type": "text",
                                        "text": "||",
                                        "start": 9,
                                        "length": 2,
                                        "children": [],
                                      },
                                      {
                                        "type": "text",
                                        "text": " ",
                                        "start": 11,
                                        "length": 1,
                                        "children": [],
                                      },
                                      {
                                        "type": "logical-and-expr",
                                        "text": "@.b == "k"",
                                        "start": 12,
                                        "length": 10,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "@.b == "k"",
                                            "start": 12,
                                            "length": 10,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "@.b == "k"",
                                                "start": 12,
                                                "length": 10,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "@.b",
                                                    "start": 12,
                                                    "length": 3,
                                                    "children": [
                                                      {
                                                        "type": "singular-query",
                                                        "text": "@.b",
                                                        "start": 12,
                                                        "length": 3,
                                                        "children": [
                                                          {
                                                            "type": "rel-singular-query",
                                                            "text": "@.b",
                                                            "start": 12,
                                                            "length": 3,
                                                            "children": [
                                                              {
                                                                "type": "current-node-identifier",
                                                                "text": "@",
                                                                "start": 12,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "singular-query-segments",
                                                                "text": ".b",
                                                                "start": 13,
                                                                "length": 2,
                                                                "children": [
                                                                  {
                                                                    "type": "text",
                                                                    "text": "",
                                                                    "start": 13,
                                                                    "length": 0,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "name-segment",
                                                                    "text": ".b",
                                                                    "start": 13,
                                                                    "length": 2,
                                                                    "children": [
                                                                      {
                                                                        "type": "text",
                                                                        "text": ".",
                                                                        "start": 13,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                      {
                                                                        "type": "member-name-shorthand",
                                                                        "text": "b",
                                                                        "start": 14,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 15,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": "==",
                                                    "start": 16,
                                                    "length": 2,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 18,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": ""k"",
                                                    "start": 19,
                                                    "length": 3,
                                                    "children": [
                                                      {
                                                        "type": "literal",
                                                        "text": ""k"",
                                                        "start": 19,
                                                        "length": 3,
                                                        "children": [
                                                          {
                                                            "type": "string-literal",
                                                            "text": ""k"",
                                                            "start": 19,
                                                            "length": 3,
                                                            "children": [
                                                              {
                                                                "type": "text",
                                                                "text": """,
                                                                "start": 19,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "double-quoted",
                                                                "text": "k",
                                                                "start": 20,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "text",
                                                                "text": """,
                                                                "start": 21,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 22,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 22,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.a[?@>3.5] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.a[?@>3.5]",
    "start": 0,
    "length": 11,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".a[?@>3.5]",
        "start": 1,
        "length": 10,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".a",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".a",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "a",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?@>3.5]",
            "start": 3,
            "length": 8,
            "children": [
              {
                "type": "child-segment",
                "text": "[?@>3.5]",
                "start": 3,
                "length": 8,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?@>3.5]",
                    "start": 3,
                    "length": 8,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?@>3.5",
                        "start": 4,
                        "length": 6,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?@>3.5",
                            "start": 4,
                            "length": 6,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 4,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 5,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "@>3.5",
                                "start": 5,
                                "length": 5,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "@>3.5",
                                    "start": 5,
                                    "length": 5,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "@>3.5",
                                        "start": 5,
                                        "length": 5,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "@>3.5",
                                            "start": 5,
                                            "length": 5,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "@>3.5",
                                                "start": 5,
                                                "length": 5,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "@",
                                                    "start": 5,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "singular-query",
                                                        "text": "@",
                                                        "start": 5,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "rel-singular-query",
                                                            "text": "@",
                                                            "start": 5,
                                                            "length": 1,
                                                            "children": [
                                                              {
                                                                "type": "current-node-identifier",
                                                                "text": "@",
                                                                "start": 5,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "singular-query-segments",
                                                                "text": "",
                                                                "start": 6,
                                                                "length": 0,
                                                                "children": [],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 6,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": ">",
                                                    "start": 6,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 7,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": "3.5",
                                                    "start": 7,
                                                    "length": 3,
                                                    "children": [
                                                      {
                                                        "type": "literal",
                                                        "text": "3.5",
                                                        "start": 7,
                                                        "length": 3,
                                                        "children": [
                                                          {
                                                            "type": "number",
                                                            "text": "3.5",
                                                            "start": 7,
                                                            "length": 3,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 10,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 10,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.a[?match(@.b, "[jk]")] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.a[?match(@.b, "[jk]")]",
    "start": 0,
    "length": 24,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".a[?match(@.b, "[jk]")]",
        "start": 1,
        "length": 23,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".a",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".a",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "a",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?match(@.b, "[jk]")]",
            "start": 3,
            "length": 21,
            "children": [
              {
                "type": "child-segment",
                "text": "[?match(@.b, "[jk]")]",
                "start": 3,
                "length": 21,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?match(@.b, "[jk]")]",
                    "start": 3,
                    "length": 21,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?match(@.b, "[jk]")",
                        "start": 4,
                        "length": 19,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?match(@.b, "[jk]")",
                            "start": 4,
                            "length": 19,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 4,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 5,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "match(@.b, "[jk]")",
                                "start": 5,
                                "length": 18,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "match(@.b, "[jk]")",
                                    "start": 5,
                                    "length": 18,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "match(@.b, "[jk]")",
                                        "start": 5,
                                        "length": 18,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "match(@.b, "[jk]")",
                                            "start": 5,
                                            "length": 18,
                                            "children": [
                                              {
                                                "type": "test-expr",
                                                "text": "match(@.b, "[jk]")",
                                                "start": 5,
                                                "length": 18,
                                                "children": [
                                                  {
                                                    "type": "function-expr",
                                                    "text": "match(@.b, "[jk]")",
                                                    "start": 5,
                                                    "length": 18,
                                                    "children": [
                                                      {
                                                        "type": "function-name",
                                                        "text": "match",
                                                        "start": 5,
                                                        "length": 5,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "(",
                                                        "start": 10,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 11,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "function-argument",
                                                        "text": "@.b",
                                                        "start": 11,
                                                        "length": 3,
                                                        "children": [
                                                          {
                                                            "type": "logical-expr",
                                                            "text": "@.b",
                                                            "start": 11,
                                                            "length": 3,
                                                            "children": [
                                                              {
                                                                "type": "logical-or-expr",
                                                                "text": "@.b",
                                                                "start": 11,
                                                                "length": 3,
                                                                "children": [
                                                                  {
                                                                    "type": "logical-and-expr",
                                                                    "text": "@.b",
                                                                    "start": 11,
                                                                    "length": 3,
                                                                    "children": [
                                                                      {
                                                                        "type": "basic-expr",
                                                                        "text": "@.b",
                                                                        "start": 11,
                                                                        "length": 3,
                                                                        "children": [
                                                                          {
                                                                            "type": "test-expr",
                                                                            "text": "@.b",
                                                                            "start": 11,
                                                                            "length": 3,
                                                                            "children": [
                                                                              {
                                                                                "type": "filter-query",
                                                                                "text": "@.b",
                                                                                "start": 11,
                                                                                "length": 3,
                                                                                "children": [
                                                                                  {
                                                                                    "type": "rel-query",
                                                                                    "text": "@.b",
                                                                                    "start": 11,
                                                                                    "length": 3,
                                                                                    "children": [
                                                                                      {
                                                                                        "type": "current-node-identifier",
                                                                                        "text": "@",
                                                                                        "start": 11,
                                                                                        "length": 1,
                                                                                        "children": [],
                                                                                      },
                                                                                      {
                                                                                        "type": "segments",
                                                                                        "text": ".b",
                                                                                        "start": 12,
                                                                                        "length": 2,
                                                                                        "children": [
                                                                                          {
                                                                                            "type": "text",
                                                                                            "text": "",
                                                                                            "start": 12,
                                                                                            "length": 0,
                                                                                            "children": [],
                                                                                          },
                                                                                          {
                                                                                            "type": "segment",
                                                                                            "text": ".b",
                                                                                            "start": 12,
                                                                                            "length": 2,
                                                                                            "children": [
                                                                                              {
                                                                                                "type": "child-segment",
                                                                                                "text": ".b",
                                                                                                "start": 12,
                                                                                                "length": 2,
                                                                                                "children": [
                                                                                                  {
                                                                                                    "type": "text",
                                                                                                    "text": ".",
                                                                                                    "start": 12,
                                                                                                    "length": 1,
                                                                                                    "children": [],
                                                                                                  },
                                                                                                  {
                                                                                                    "type": "member-name-shorthand",
                                                                                                    "text": "b",
                                                                                                    "start": 13,
                                                                                                    "length": 1,
                                                                                                    "children": [],
                                                                                                  },
                                                                                                ],
                                                                                              },
                                                                                            ],
                                                                                          },
                                                                                        ],
                                                                                      },
                                                                                    ],
                                                                                  },
                                                                                ],
                                                                              },
                                                                            ],
                                                                          },
                                                                        ],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 14,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": ",",
                                                        "start": 14,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": " ",
                                                        "start": 15,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "function-argument",
                                                        "text": ""[jk]"",
                                                        "start": 16,
                                                        "length": 6,
                                                        "children": [
                                                          {
                                                            "type": "literal",
                                                            "text": ""[jk]"",
                                                            "start": 16,
                                                            "length": 6,
                                                            "children": [
                                                              {
                                                                "type": "string-literal",
                                                                "text": ""[jk]"",
                                                                "start": 16,
                                                                "length": 6,
                                                                "children": [
                                                                  {
                                                                    "type": "text",
                                                                    "text": """,
                                                                    "start": 16,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "double-quoted",
                                                                    "text": "[",
                                                                    "start": 17,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "double-quoted",
                                                                    "text": "j",
                                                                    "start": 18,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "double-quoted",
                                                                    "text": "k",
                                                                    "start": 19,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "double-quoted",
                                                                    "text": "]",
                                                                    "start": 20,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "text",
                                                                    "text": """,
                                                                    "start": 21,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 22,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": ")",
                                                        "start": 22,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 23,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 23,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.a[?search(@.b, "[jk]")] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.a[?search(@.b, "[jk]")]",
    "start": 0,
    "length": 25,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".a[?search(@.b, "[jk]")]",
        "start": 1,
        "length": 24,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".a",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".a",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "a",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?search(@.b, "[jk]")]",
            "start": 3,
            "length": 22,
            "children": [
              {
                "type": "child-segment",
                "text": "[?search(@.b, "[jk]")]",
                "start": 3,
                "length": 22,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?search(@.b, "[jk]")]",
                    "start": 3,
                    "length": 22,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?search(@.b, "[jk]")",
                        "start": 4,
                        "length": 20,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?search(@.b, "[jk]")",
                            "start": 4,
                            "length": 20,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 4,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 5,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "search(@.b, "[jk]")",
                                "start": 5,
                                "length": 19,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "search(@.b, "[jk]")",
                                    "start": 5,
                                    "length": 19,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "search(@.b, "[jk]")",
                                        "start": 5,
                                        "length": 19,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "search(@.b, "[jk]")",
                                            "start": 5,
                                            "length": 19,
                                            "children": [
                                              {
                                                "type": "test-expr",
                                                "text": "search(@.b, "[jk]")",
                                                "start": 5,
                                                "length": 19,
                                                "children": [
                                                  {
                                                    "type": "function-expr",
                                                    "text": "search(@.b, "[jk]")",
                                                    "start": 5,
                                                    "length": 19,
                                                    "children": [
                                                      {
                                                        "type": "function-name",
                                                        "text": "search",
                                                        "start": 5,
                                                        "length": 6,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "(",
                                                        "start": 11,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 12,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "function-argument",
                                                        "text": "@.b",
                                                        "start": 12,
                                                        "length": 3,
                                                        "children": [
                                                          {
                                                            "type": "logical-expr",
                                                            "text": "@.b",
                                                            "start": 12,
                                                            "length": 3,
                                                            "children": [
                                                              {
                                                                "type": "logical-or-expr",
                                                                "text": "@.b",
                                                                "start": 12,
                                                                "length": 3,
                                                                "children": [
                                                                  {
                                                                    "type": "logical-and-expr",
                                                                    "text": "@.b",
                                                                    "start": 12,
                                                                    "length": 3,
                                                                    "children": [
                                                                      {
                                                                        "type": "basic-expr",
                                                                        "text": "@.b",
                                                                        "start": 12,
                                                                        "length": 3,
                                                                        "children": [
                                                                          {
                                                                            "type": "test-expr",
                                                                            "text": "@.b",
                                                                            "start": 12,
                                                                            "length": 3,
                                                                            "children": [
                                                                              {
                                                                                "type": "filter-query",
                                                                                "text": "@.b",
                                                                                "start": 12,
                                                                                "length": 3,
                                                                                "children": [
                                                                                  {
                                                                                    "type": "rel-query",
                                                                                    "text": "@.b",
                                                                                    "start": 12,
                                                                                    "length": 3,
                                                                                    "children": [
                                                                                      {
                                                                                        "type": "current-node-identifier",
                                                                                        "text": "@",
                                                                                        "start": 12,
                                                                                        "length": 1,
                                                                                        "children": [],
                                                                                      },
                                                                                      {
                                                                                        "type": "segments",
                                                                                        "text": ".b",
                                                                                        "start": 13,
                                                                                        "length": 2,
                                                                                        "children": [
                                                                                          {
                                                                                            "type": "text",
                                                                                            "text": "",
                                                                                            "start": 13,
                                                                                            "length": 0,
                                                                                            "children": [],
                                                                                          },
                                                                                          {
                                                                                            "type": "segment",
                                                                                            "text": ".b",
                                                                                            "start": 13,
                                                                                            "length": 2,
                                                                                            "children": [
                                                                                              {
                                                                                                "type": "child-segment",
                                                                                                "text": ".b",
                                                                                                "start": 13,
                                                                                                "length": 2,
                                                                                                "children": [
                                                                                                  {
                                                                                                    "type": "text",
                                                                                                    "text": ".",
                                                                                                    "start": 13,
                                                                                                    "length": 1,
                                                                                                    "children": [],
                                                                                                  },
                                                                                                  {
                                                                                                    "type": "member-name-shorthand",
                                                                                                    "text": "b",
                                                                                                    "start": 14,
                                                                                                    "length": 1,
                                                                                                    "children": [],
                                                                                                  },
                                                                                                ],
                                                                                              },
                                                                                            ],
                                                                                          },
                                                                                        ],
                                                                                      },
                                                                                    ],
                                                                                  },
                                                                                ],
                                                                              },
                                                                            ],
                                                                          },
                                                                        ],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 15,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": ",",
                                                        "start": 15,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": " ",
                                                        "start": 16,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "function-argument",
                                                        "text": ""[jk]"",
                                                        "start": 17,
                                                        "length": 6,
                                                        "children": [
                                                          {
                                                            "type": "literal",
                                                            "text": ""[jk]"",
                                                            "start": 17,
                                                            "length": 6,
                                                            "children": [
                                                              {
                                                                "type": "string-literal",
                                                                "text": ""[jk]"",
                                                                "start": 17,
                                                                "length": 6,
                                                                "children": [
                                                                  {
                                                                    "type": "text",
                                                                    "text": """,
                                                                    "start": 17,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "double-quoted",
                                                                    "text": "[",
                                                                    "start": 18,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "double-quoted",
                                                                    "text": "j",
                                                                    "start": 19,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "double-quoted",
                                                                    "text": "k",
                                                                    "start": 20,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "double-quoted",
                                                                    "text": "]",
                                                                    "start": 21,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "text",
                                                                    "text": """,
                                                                    "start": 22,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 23,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": ")",
                                                        "start": 23,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 24,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 24,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.a[0] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.a[0]",
    "start": 0,
    "length": 6,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".a[0]",
        "start": 1,
        "length": 5,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".a",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".a",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "a",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[0]",
            "start": 3,
            "length": 3,
            "children": [
              {
                "type": "child-segment",
                "text": "[0]",
                "start": 3,
                "length": 3,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[0]",
                    "start": 3,
                    "length": 3,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "0",
                        "start": 4,
                        "length": 1,
                        "children": [
                          {
                            "type": "index-selector",
                            "text": "0",
                            "start": 4,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 5,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 5,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.b[*] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.b[*]",
    "start": 0,
    "length": 6,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".b[*]",
        "start": 1,
        "length": 5,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".b",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".b",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "b",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[*]",
            "start": 3,
            "length": 3,
            "children": [
              {
                "type": "child-segment",
                "text": "[*]",
                "start": 3,
                "length": 3,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[*]",
                    "start": 3,
                    "length": 3,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "*",
                        "start": 4,
                        "length": 1,
                        "children": [
                          {
                            "type": "wildcard-selector",
                            "text": "*",
                            "start": 4,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 5,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 5,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.b[?@==null] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.b[?@==null]",
    "start": 0,
    "length": 13,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".b[?@==null]",
        "start": 1,
        "length": 12,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".b",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".b",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "b",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?@==null]",
            "start": 3,
            "length": 10,
            "children": [
              {
                "type": "child-segment",
                "text": "[?@==null]",
                "start": 3,
                "length": 10,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?@==null]",
                    "start": 3,
                    "length": 10,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?@==null",
                        "start": 4,
                        "length": 8,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?@==null",
                            "start": 4,
                            "length": 8,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 4,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 5,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "@==null",
                                "start": 5,
                                "length": 7,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "@==null",
                                    "start": 5,
                                    "length": 7,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "@==null",
                                        "start": 5,
                                        "length": 7,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "@==null",
                                            "start": 5,
                                            "length": 7,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "@==null",
                                                "start": 5,
                                                "length": 7,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "@",
                                                    "start": 5,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "singular-query",
                                                        "text": "@",
                                                        "start": 5,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "rel-singular-query",
                                                            "text": "@",
                                                            "start": 5,
                                                            "length": 1,
                                                            "children": [
                                                              {
                                                                "type": "current-node-identifier",
                                                                "text": "@",
                                                                "start": 5,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "singular-query-segments",
                                                                "text": "",
                                                                "start": 6,
                                                                "length": 0,
                                                                "children": [],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 6,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": "==",
                                                    "start": 6,
                                                    "length": 2,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 8,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": "null",
                                                    "start": 8,
                                                    "length": 4,
                                                    "children": [
                                                      {
                                                        "type": "literal",
                                                        "text": "null",
                                                        "start": 8,
                                                        "length": 4,
                                                        "children": [
                                                          {
                                                            "type": "null",
                                                            "text": "null",
                                                            "start": 8,
                                                            "length": 4,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 12,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 12,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.b[?@] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.b[?@]",
    "start": 0,
    "length": 7,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".b[?@]",
        "start": 1,
        "length": 6,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".b",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".b",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "b",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?@]",
            "start": 3,
            "length": 4,
            "children": [
              {
                "type": "child-segment",
                "text": "[?@]",
                "start": 3,
                "length": 4,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?@]",
                    "start": 3,
                    "length": 4,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?@",
                        "start": 4,
                        "length": 2,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?@",
                            "start": 4,
                            "length": 2,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 4,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 5,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "@",
                                "start": 5,
                                "length": 1,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "@",
                                    "start": 5,
                                    "length": 1,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "@",
                                        "start": 5,
                                        "length": 1,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "@",
                                            "start": 5,
                                            "length": 1,
                                            "children": [
                                              {
                                                "type": "test-expr",
                                                "text": "@",
                                                "start": 5,
                                                "length": 1,
                                                "children": [
                                                  {
                                                    "type": "filter-query",
                                                    "text": "@",
                                                    "start": 5,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "rel-query",
                                                        "text": "@",
                                                        "start": 5,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "current-node-identifier",
                                                            "text": "@",
                                                            "start": 5,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "segments",
                                                            "text": "",
                                                            "start": 6,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 6,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 6,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.b[0] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.b[0]",
    "start": 0,
    "length": 6,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".b[0]",
        "start": 1,
        "length": 5,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".b",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".b",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "b",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[0]",
            "start": 3,
            "length": 3,
            "children": [
              {
                "type": "child-segment",
                "text": "[0]",
                "start": 3,
                "length": 3,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[0]",
                    "start": 3,
                    "length": 3,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "0",
                        "start": 4,
                        "length": 1,
                        "children": [
                          {
                            "type": "index-selector",
                            "text": "0",
                            "start": 4,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 5,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 5,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.c[?@.d==null] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.c[?@.d==null]",
    "start": 0,
    "length": 15,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".c[?@.d==null]",
        "start": 1,
        "length": 14,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".c",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".c",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "c",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?@.d==null]",
            "start": 3,
            "length": 12,
            "children": [
              {
                "type": "child-segment",
                "text": "[?@.d==null]",
                "start": 3,
                "length": 12,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?@.d==null]",
                    "start": 3,
                    "length": 12,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?@.d==null",
                        "start": 4,
                        "length": 10,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?@.d==null",
                            "start": 4,
                            "length": 10,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 4,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 5,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "@.d==null",
                                "start": 5,
                                "length": 9,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "@.d==null",
                                    "start": 5,
                                    "length": 9,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "@.d==null",
                                        "start": 5,
                                        "length": 9,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "@.d==null",
                                            "start": 5,
                                            "length": 9,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "@.d==null",
                                                "start": 5,
                                                "length": 9,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "@.d",
                                                    "start": 5,
                                                    "length": 3,
                                                    "children": [
                                                      {
                                                        "type": "singular-query",
                                                        "text": "@.d",
                                                        "start": 5,
                                                        "length": 3,
                                                        "children": [
                                                          {
                                                            "type": "rel-singular-query",
                                                            "text": "@.d",
                                                            "start": 5,
                                                            "length": 3,
                                                            "children": [
                                                              {
                                                                "type": "current-node-identifier",
                                                                "text": "@",
                                                                "start": 5,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "singular-query-segments",
                                                                "text": ".d",
                                                                "start": 6,
                                                                "length": 2,
                                                                "children": [
                                                                  {
                                                                    "type": "text",
                                                                    "text": "",
                                                                    "start": 6,
                                                                    "length": 0,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "name-segment",
                                                                    "text": ".d",
                                                                    "start": 6,
                                                                    "length": 2,
                                                                    "children": [
                                                                      {
                                                                        "type": "text",
                                                                        "text": ".",
                                                                        "start": 6,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                      {
                                                                        "type": "member-name-shorthand",
                                                                        "text": "d",
                                                                        "start": 7,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 8,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": "==",
                                                    "start": 8,
                                                    "length": 2,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 10,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": "null",
                                                    "start": 10,
                                                    "length": 4,
                                                    "children": [
                                                      {
                                                        "type": "literal",
                                                        "text": "null",
                                                        "start": 10,
                                                        "length": 4,
                                                        "children": [
                                                          {
                                                            "type": "null",
                                                            "text": "null",
                                                            "start": 10,
                                                            "length": 4,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 14,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 14,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.null 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.null",
    "start": 0,
    "length": 6,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".null",
        "start": 1,
        "length": 5,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".null",
            "start": 1,
            "length": 5,
            "children": [
              {
                "type": "child-segment",
                "text": ".null",
                "start": 1,
                "length": 5,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "null",
                    "start": 2,
                    "length": 4,
                    "children": [],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.o..[*, *] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.o..[*, *]",
    "start": 0,
    "length": 11,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".o..[*, *]",
        "start": 1,
        "length": 10,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".o",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".o",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "o",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "..[*, *]",
            "start": 3,
            "length": 8,
            "children": [
              {
                "type": "descendant-segment",
                "text": "..[*, *]",
                "start": 3,
                "length": 8,
                "children": [
                  {
                    "type": "text",
                    "text": "..",
                    "start": 3,
                    "length": 2,
                    "children": [],
                  },
                  {
                    "type": "bracketed-selection",
                    "text": "[*, *]",
                    "start": 5,
                    "length": 6,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 5,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 6,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "*",
                        "start": 6,
                        "length": 1,
                        "children": [
                          {
                            "type": "wildcard-selector",
                            "text": "*",
                            "start": 6,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 7,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": ",",
                        "start": 7,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": " ",
                        "start": 8,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "*",
                        "start": 9,
                        "length": 1,
                        "children": [
                          {
                            "type": "wildcard-selector",
                            "text": "*",
                            "start": 9,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 10,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 10,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.o["j j"]["k.k"] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.o["j j"]["k.k"]",
    "start": 0,
    "length": 17,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".o["j j"]["k.k"]",
        "start": 1,
        "length": 16,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".o",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".o",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "o",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "["j j"]",
            "start": 3,
            "length": 7,
            "children": [
              {
                "type": "child-segment",
                "text": "["j j"]",
                "start": 3,
                "length": 7,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "["j j"]",
                    "start": 3,
                    "length": 7,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": ""j j"",
                        "start": 4,
                        "length": 5,
                        "children": [
                          {
                            "type": "name-selector",
                            "text": ""j j"",
                            "start": 4,
                            "length": 5,
                            "children": [
                              {
                                "type": "string-literal",
                                "text": ""j j"",
                                "start": 4,
                                "length": 5,
                                "children": [
                                  {
                                    "type": "text",
                                    "text": """,
                                    "start": 4,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "double-quoted",
                                    "text": "j",
                                    "start": 5,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "double-quoted",
                                    "text": " ",
                                    "start": 6,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "double-quoted",
                                    "text": "j",
                                    "start": 7,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "text",
                                    "text": """,
                                    "start": 8,
                                    "length": 1,
                                    "children": [],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 9,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 9,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 10,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "["k.k"]",
            "start": 10,
            "length": 7,
            "children": [
              {
                "type": "child-segment",
                "text": "["k.k"]",
                "start": 10,
                "length": 7,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "["k.k"]",
                    "start": 10,
                    "length": 7,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 10,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 11,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": ""k.k"",
                        "start": 11,
                        "length": 5,
                        "children": [
                          {
                            "type": "name-selector",
                            "text": ""k.k"",
                            "start": 11,
                            "length": 5,
                            "children": [
                              {
                                "type": "string-literal",
                                "text": ""k.k"",
                                "start": 11,
                                "length": 5,
                                "children": [
                                  {
                                    "type": "text",
                                    "text": """,
                                    "start": 11,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "double-quoted",
                                    "text": "k",
                                    "start": 12,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "double-quoted",
                                    "text": ".",
                                    "start": 13,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "double-quoted",
                                    "text": "k",
                                    "start": 14,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "text",
                                    "text": """,
                                    "start": 15,
                                    "length": 1,
                                    "children": [],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 16,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 16,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.o['j j'] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.o['j j']",
    "start": 0,
    "length": 10,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".o['j j']",
        "start": 1,
        "length": 9,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".o",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".o",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "o",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "['j j']",
            "start": 3,
            "length": 7,
            "children": [
              {
                "type": "child-segment",
                "text": "['j j']",
                "start": 3,
                "length": 7,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "['j j']",
                    "start": 3,
                    "length": 7,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "'j j'",
                        "start": 4,
                        "length": 5,
                        "children": [
                          {
                            "type": "name-selector",
                            "text": "'j j'",
                            "start": 4,
                            "length": 5,
                            "children": [
                              {
                                "type": "string-literal",
                                "text": "'j j'",
                                "start": 4,
                                "length": 5,
                                "children": [
                                  {
                                    "type": "text",
                                    "text": "'",
                                    "start": 4,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": "j",
                                    "start": 5,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": " ",
                                    "start": 6,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": "j",
                                    "start": 7,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "text",
                                    "text": "'",
                                    "start": 8,
                                    "length": 1,
                                    "children": [],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 9,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 9,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.o['j j']['k.k'] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.o['j j']['k.k']",
    "start": 0,
    "length": 17,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".o['j j']['k.k']",
        "start": 1,
        "length": 16,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".o",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".o",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "o",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "['j j']",
            "start": 3,
            "length": 7,
            "children": [
              {
                "type": "child-segment",
                "text": "['j j']",
                "start": 3,
                "length": 7,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "['j j']",
                    "start": 3,
                    "length": 7,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "'j j'",
                        "start": 4,
                        "length": 5,
                        "children": [
                          {
                            "type": "name-selector",
                            "text": "'j j'",
                            "start": 4,
                            "length": 5,
                            "children": [
                              {
                                "type": "string-literal",
                                "text": "'j j'",
                                "start": 4,
                                "length": 5,
                                "children": [
                                  {
                                    "type": "text",
                                    "text": "'",
                                    "start": 4,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": "j",
                                    "start": 5,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": " ",
                                    "start": 6,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": "j",
                                    "start": 7,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "text",
                                    "text": "'",
                                    "start": 8,
                                    "length": 1,
                                    "children": [],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 9,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 9,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 10,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "['k.k']",
            "start": 10,
            "length": 7,
            "children": [
              {
                "type": "child-segment",
                "text": "['k.k']",
                "start": 10,
                "length": 7,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "['k.k']",
                    "start": 10,
                    "length": 7,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 10,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 11,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "'k.k'",
                        "start": 11,
                        "length": 5,
                        "children": [
                          {
                            "type": "name-selector",
                            "text": "'k.k'",
                            "start": 11,
                            "length": 5,
                            "children": [
                              {
                                "type": "string-literal",
                                "text": "'k.k'",
                                "start": 11,
                                "length": 5,
                                "children": [
                                  {
                                    "type": "text",
                                    "text": "'",
                                    "start": 11,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": "k",
                                    "start": 12,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": ".",
                                    "start": 13,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": "k",
                                    "start": 14,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "text",
                                    "text": "'",
                                    "start": 15,
                                    "length": 1,
                                    "children": [],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 16,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 16,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.o[*, *] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.o[*, *]",
    "start": 0,
    "length": 9,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".o[*, *]",
        "start": 1,
        "length": 8,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".o",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".o",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "o",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[*, *]",
            "start": 3,
            "length": 6,
            "children": [
              {
                "type": "child-segment",
                "text": "[*, *]",
                "start": 3,
                "length": 6,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[*, *]",
                    "start": 3,
                    "length": 6,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "*",
                        "start": 4,
                        "length": 1,
                        "children": [
                          {
                            "type": "wildcard-selector",
                            "text": "*",
                            "start": 4,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 5,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": ",",
                        "start": 5,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": " ",
                        "start": 6,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "*",
                        "start": 7,
                        "length": 1,
                        "children": [
                          {
                            "type": "wildcard-selector",
                            "text": "*",
                            "start": 7,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 8,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 8,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.o[*] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.o[*]",
    "start": 0,
    "length": 6,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".o[*]",
        "start": 1,
        "length": 5,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".o",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".o",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "o",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[*]",
            "start": 3,
            "length": 3,
            "children": [
              {
                "type": "child-segment",
                "text": "[*]",
                "start": 3,
                "length": 3,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[*]",
                    "start": 3,
                    "length": 3,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "*",
                        "start": 4,
                        "length": 1,
                        "children": [
                          {
                            "type": "wildcard-selector",
                            "text": "*",
                            "start": 4,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 5,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 5,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.o[*] 2`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.o[*]",
    "start": 0,
    "length": 6,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".o[*]",
        "start": 1,
        "length": 5,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".o",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".o",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "o",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[*]",
            "start": 3,
            "length": 3,
            "children": [
              {
                "type": "child-segment",
                "text": "[*]",
                "start": 3,
                "length": 3,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[*]",
                    "start": 3,
                    "length": 3,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "*",
                        "start": 4,
                        "length": 1,
                        "children": [
                          {
                            "type": "wildcard-selector",
                            "text": "*",
                            "start": 4,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 5,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 5,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.o[?@.u || @.x] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.o[?@.u || @.x]",
    "start": 0,
    "length": 16,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".o[?@.u || @.x]",
        "start": 1,
        "length": 15,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".o",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".o",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "o",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?@.u || @.x]",
            "start": 3,
            "length": 13,
            "children": [
              {
                "type": "child-segment",
                "text": "[?@.u || @.x]",
                "start": 3,
                "length": 13,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?@.u || @.x]",
                    "start": 3,
                    "length": 13,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?@.u || @.x",
                        "start": 4,
                        "length": 11,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?@.u || @.x",
                            "start": 4,
                            "length": 11,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 4,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 5,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "@.u || @.x",
                                "start": 5,
                                "length": 10,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "@.u || @.x",
                                    "start": 5,
                                    "length": 10,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "@.u",
                                        "start": 5,
                                        "length": 3,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "@.u",
                                            "start": 5,
                                            "length": 3,
                                            "children": [
                                              {
                                                "type": "test-expr",
                                                "text": "@.u",
                                                "start": 5,
                                                "length": 3,
                                                "children": [
                                                  {
                                                    "type": "filter-query",
                                                    "text": "@.u",
                                                    "start": 5,
                                                    "length": 3,
                                                    "children": [
                                                      {
                                                        "type": "rel-query",
                                                        "text": "@.u",
                                                        "start": 5,
                                                        "length": 3,
                                                        "children": [
                                                          {
                                                            "type": "current-node-identifier",
                                                            "text": "@",
                                                            "start": 5,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "segments",
                                                            "text": ".u",
                                                            "start": 6,
                                                            "length": 2,
                                                            "children": [
                                                              {
                                                                "type": "text",
                                                                "text": "",
                                                                "start": 6,
                                                                "length": 0,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "segment",
                                                                "text": ".u",
                                                                "start": 6,
                                                                "length": 2,
                                                                "children": [
                                                                  {
                                                                    "type": "child-segment",
                                                                    "text": ".u",
                                                                    "start": 6,
                                                                    "length": 2,
                                                                    "children": [
                                                                      {
                                                                        "type": "text",
                                                                        "text": ".",
                                                                        "start": 6,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                      {
                                                                        "type": "member-name-shorthand",
                                                                        "text": "u",
                                                                        "start": 7,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                      {
                                        "type": "text",
                                        "text": " ",
                                        "start": 8,
                                        "length": 1,
                                        "children": [],
                                      },
                                      {
                                        "type": "text",
                                        "text": "||",
                                        "start": 9,
                                        "length": 2,
                                        "children": [],
                                      },
                                      {
                                        "type": "text",
                                        "text": " ",
                                        "start": 11,
                                        "length": 1,
                                        "children": [],
                                      },
                                      {
                                        "type": "logical-and-expr",
                                        "text": "@.x",
                                        "start": 12,
                                        "length": 3,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "@.x",
                                            "start": 12,
                                            "length": 3,
                                            "children": [
                                              {
                                                "type": "test-expr",
                                                "text": "@.x",
                                                "start": 12,
                                                "length": 3,
                                                "children": [
                                                  {
                                                    "type": "filter-query",
                                                    "text": "@.x",
                                                    "start": 12,
                                                    "length": 3,
                                                    "children": [
                                                      {
                                                        "type": "rel-query",
                                                        "text": "@.x",
                                                        "start": 12,
                                                        "length": 3,
                                                        "children": [
                                                          {
                                                            "type": "current-node-identifier",
                                                            "text": "@",
                                                            "start": 12,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "segments",
                                                            "text": ".x",
                                                            "start": 13,
                                                            "length": 2,
                                                            "children": [
                                                              {
                                                                "type": "text",
                                                                "text": "",
                                                                "start": 13,
                                                                "length": 0,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "segment",
                                                                "text": ".x",
                                                                "start": 13,
                                                                "length": 2,
                                                                "children": [
                                                                  {
                                                                    "type": "child-segment",
                                                                    "text": ".x",
                                                                    "start": 13,
                                                                    "length": 2,
                                                                    "children": [
                                                                      {
                                                                        "type": "text",
                                                                        "text": ".",
                                                                        "start": 13,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                      {
                                                                        "type": "member-name-shorthand",
                                                                        "text": "x",
                                                                        "start": 14,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 15,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 15,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.o[?@<3, ?@<3] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.o[?@<3, ?@<3]",
    "start": 0,
    "length": 15,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".o[?@<3, ?@<3]",
        "start": 1,
        "length": 14,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".o",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".o",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "o",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?@<3, ?@<3]",
            "start": 3,
            "length": 12,
            "children": [
              {
                "type": "child-segment",
                "text": "[?@<3, ?@<3]",
                "start": 3,
                "length": 12,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?@<3, ?@<3]",
                    "start": 3,
                    "length": 12,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?@<3",
                        "start": 4,
                        "length": 4,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?@<3",
                            "start": 4,
                            "length": 4,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 4,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 5,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "@<3",
                                "start": 5,
                                "length": 3,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "@<3",
                                    "start": 5,
                                    "length": 3,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "@<3",
                                        "start": 5,
                                        "length": 3,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "@<3",
                                            "start": 5,
                                            "length": 3,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "@<3",
                                                "start": 5,
                                                "length": 3,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "@",
                                                    "start": 5,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "singular-query",
                                                        "text": "@",
                                                        "start": 5,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "rel-singular-query",
                                                            "text": "@",
                                                            "start": 5,
                                                            "length": 1,
                                                            "children": [
                                                              {
                                                                "type": "current-node-identifier",
                                                                "text": "@",
                                                                "start": 5,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "singular-query-segments",
                                                                "text": "",
                                                                "start": 6,
                                                                "length": 0,
                                                                "children": [],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 6,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": "<",
                                                    "start": 6,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 7,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": "3",
                                                    "start": 7,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "literal",
                                                        "text": "3",
                                                        "start": 7,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "number",
                                                            "text": "3",
                                                            "start": 7,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 8,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": ",",
                        "start": 8,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": " ",
                        "start": 9,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?@<3",
                        "start": 10,
                        "length": 4,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?@<3",
                            "start": 10,
                            "length": 4,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 10,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 11,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "@<3",
                                "start": 11,
                                "length": 3,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "@<3",
                                    "start": 11,
                                    "length": 3,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "@<3",
                                        "start": 11,
                                        "length": 3,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "@<3",
                                            "start": 11,
                                            "length": 3,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "@<3",
                                                "start": 11,
                                                "length": 3,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "@",
                                                    "start": 11,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "singular-query",
                                                        "text": "@",
                                                        "start": 11,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "rel-singular-query",
                                                            "text": "@",
                                                            "start": 11,
                                                            "length": 1,
                                                            "children": [
                                                              {
                                                                "type": "current-node-identifier",
                                                                "text": "@",
                                                                "start": 11,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "singular-query-segments",
                                                                "text": "",
                                                                "start": 12,
                                                                "length": 0,
                                                                "children": [],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 12,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": "<",
                                                    "start": 12,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 13,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": "3",
                                                    "start": 13,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "literal",
                                                        "text": "3",
                                                        "start": 13,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "number",
                                                            "text": "3",
                                                            "start": 13,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 14,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 14,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.o[?@>1 && @<4] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.o[?@>1 && @<4]",
    "start": 0,
    "length": 16,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".o[?@>1 && @<4]",
        "start": 1,
        "length": 15,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".o",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".o",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "o",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?@>1 && @<4]",
            "start": 3,
            "length": 13,
            "children": [
              {
                "type": "child-segment",
                "text": "[?@>1 && @<4]",
                "start": 3,
                "length": 13,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?@>1 && @<4]",
                    "start": 3,
                    "length": 13,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?@>1 && @<4",
                        "start": 4,
                        "length": 11,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?@>1 && @<4",
                            "start": 4,
                            "length": 11,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 4,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 5,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "@>1 && @<4",
                                "start": 5,
                                "length": 10,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "@>1 && @<4",
                                    "start": 5,
                                    "length": 10,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "@>1 && @<4",
                                        "start": 5,
                                        "length": 10,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "@>1",
                                            "start": 5,
                                            "length": 3,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "@>1",
                                                "start": 5,
                                                "length": 3,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "@",
                                                    "start": 5,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "singular-query",
                                                        "text": "@",
                                                        "start": 5,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "rel-singular-query",
                                                            "text": "@",
                                                            "start": 5,
                                                            "length": 1,
                                                            "children": [
                                                              {
                                                                "type": "current-node-identifier",
                                                                "text": "@",
                                                                "start": 5,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "singular-query-segments",
                                                                "text": "",
                                                                "start": 6,
                                                                "length": 0,
                                                                "children": [],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 6,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": ">",
                                                    "start": 6,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 7,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": "1",
                                                    "start": 7,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "literal",
                                                        "text": "1",
                                                        "start": 7,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "number",
                                                            "text": "1",
                                                            "start": 7,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                          {
                                            "type": "text",
                                            "text": " ",
                                            "start": 8,
                                            "length": 1,
                                            "children": [],
                                          },
                                          {
                                            "type": "text",
                                            "text": "&&",
                                            "start": 9,
                                            "length": 2,
                                            "children": [],
                                          },
                                          {
                                            "type": "text",
                                            "text": " ",
                                            "start": 11,
                                            "length": 1,
                                            "children": [],
                                          },
                                          {
                                            "type": "basic-expr",
                                            "text": "@<4",
                                            "start": 12,
                                            "length": 3,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "@<4",
                                                "start": 12,
                                                "length": 3,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "@",
                                                    "start": 12,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "singular-query",
                                                        "text": "@",
                                                        "start": 12,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "rel-singular-query",
                                                            "text": "@",
                                                            "start": 12,
                                                            "length": 1,
                                                            "children": [
                                                              {
                                                                "type": "current-node-identifier",
                                                                "text": "@",
                                                                "start": 12,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "singular-query-segments",
                                                                "text": "",
                                                                "start": 13,
                                                                "length": 0,
                                                                "children": [],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 13,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": "<",
                                                    "start": 13,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 14,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": "4",
                                                    "start": 14,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "literal",
                                                        "text": "4",
                                                        "start": 14,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "number",
                                                            "text": "4",
                                                            "start": 14,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 15,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 15,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.o[?@>1 && @<4] 2`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.o[?@>1 && @<4]",
    "start": 0,
    "length": 16,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".o[?@>1 && @<4]",
        "start": 1,
        "length": 15,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".o",
            "start": 1,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".o",
                "start": 1,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "o",
                    "start": 2,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 3,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?@>1 && @<4]",
            "start": 3,
            "length": 13,
            "children": [
              {
                "type": "child-segment",
                "text": "[?@>1 && @<4]",
                "start": 3,
                "length": 13,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?@>1 && @<4]",
                    "start": 3,
                    "length": 13,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?@>1 && @<4",
                        "start": 4,
                        "length": 11,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?@>1 && @<4",
                            "start": 4,
                            "length": 11,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 4,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 5,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "@>1 && @<4",
                                "start": 5,
                                "length": 10,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "@>1 && @<4",
                                    "start": 5,
                                    "length": 10,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "@>1 && @<4",
                                        "start": 5,
                                        "length": 10,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "@>1",
                                            "start": 5,
                                            "length": 3,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "@>1",
                                                "start": 5,
                                                "length": 3,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "@",
                                                    "start": 5,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "singular-query",
                                                        "text": "@",
                                                        "start": 5,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "rel-singular-query",
                                                            "text": "@",
                                                            "start": 5,
                                                            "length": 1,
                                                            "children": [
                                                              {
                                                                "type": "current-node-identifier",
                                                                "text": "@",
                                                                "start": 5,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "singular-query-segments",
                                                                "text": "",
                                                                "start": 6,
                                                                "length": 0,
                                                                "children": [],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 6,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": ">",
                                                    "start": 6,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 7,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": "1",
                                                    "start": 7,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "literal",
                                                        "text": "1",
                                                        "start": 7,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "number",
                                                            "text": "1",
                                                            "start": 7,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                          {
                                            "type": "text",
                                            "text": " ",
                                            "start": 8,
                                            "length": 1,
                                            "children": [],
                                          },
                                          {
                                            "type": "text",
                                            "text": "&&",
                                            "start": 9,
                                            "length": 2,
                                            "children": [],
                                          },
                                          {
                                            "type": "text",
                                            "text": " ",
                                            "start": 11,
                                            "length": 1,
                                            "children": [],
                                          },
                                          {
                                            "type": "basic-expr",
                                            "text": "@<4",
                                            "start": 12,
                                            "length": 3,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "@<4",
                                                "start": 12,
                                                "length": 3,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "@",
                                                    "start": 12,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "singular-query",
                                                        "text": "@",
                                                        "start": 12,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "rel-singular-query",
                                                            "text": "@",
                                                            "start": 12,
                                                            "length": 1,
                                                            "children": [
                                                              {
                                                                "type": "current-node-identifier",
                                                                "text": "@",
                                                                "start": 12,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "singular-query-segments",
                                                                "text": "",
                                                                "start": 13,
                                                                "length": 0,
                                                                "children": [],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 13,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": "<",
                                                    "start": 13,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 14,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": "4",
                                                    "start": 14,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "literal",
                                                        "text": "4",
                                                        "start": 14,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "number",
                                                            "text": "4",
                                                            "start": 14,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 15,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 15,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.store.* 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.store.*",
    "start": 0,
    "length": 9,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".store.*",
        "start": 1,
        "length": 8,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".store",
            "start": 1,
            "length": 6,
            "children": [
              {
                "type": "child-segment",
                "text": ".store",
                "start": 1,
                "length": 6,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "store",
                    "start": 2,
                    "length": 5,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 7,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".*",
            "start": 7,
            "length": 2,
            "children": [
              {
                "type": "child-segment",
                "text": ".*",
                "start": 7,
                "length": 2,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 7,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "wildcard-selector",
                    "text": "*",
                    "start": 8,
                    "length": 1,
                    "children": [],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.store..price 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.store..price",
    "start": 0,
    "length": 14,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".store..price",
        "start": 1,
        "length": 13,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".store",
            "start": 1,
            "length": 6,
            "children": [
              {
                "type": "child-segment",
                "text": ".store",
                "start": 1,
                "length": 6,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "store",
                    "start": 2,
                    "length": 5,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 7,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "..price",
            "start": 7,
            "length": 7,
            "children": [
              {
                "type": "descendant-segment",
                "text": "..price",
                "start": 7,
                "length": 7,
                "children": [
                  {
                    "type": "text",
                    "text": "..",
                    "start": 7,
                    "length": 2,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "price",
                    "start": 9,
                    "length": 5,
                    "children": [],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.store.book[*].author 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.store.book[*].author",
    "start": 0,
    "length": 22,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".store.book[*].author",
        "start": 1,
        "length": 21,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".store",
            "start": 1,
            "length": 6,
            "children": [
              {
                "type": "child-segment",
                "text": ".store",
                "start": 1,
                "length": 6,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "store",
                    "start": 2,
                    "length": 5,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 7,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".book",
            "start": 7,
            "length": 5,
            "children": [
              {
                "type": "child-segment",
                "text": ".book",
                "start": 7,
                "length": 5,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 7,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "book",
                    "start": 8,
                    "length": 4,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 12,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[*]",
            "start": 12,
            "length": 3,
            "children": [
              {
                "type": "child-segment",
                "text": "[*]",
                "start": 12,
                "length": 3,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[*]",
                    "start": 12,
                    "length": 3,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 12,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 13,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "*",
                        "start": 13,
                        "length": 1,
                        "children": [
                          {
                            "type": "wildcard-selector",
                            "text": "*",
                            "start": 13,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 14,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 14,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 15,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".author",
            "start": 15,
            "length": 7,
            "children": [
              {
                "type": "child-segment",
                "text": ".author",
                "start": 15,
                "length": 7,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 15,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "author",
                    "start": 16,
                    "length": 6,
                    "children": [],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.store.book[?@.price < 10].title 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.store.book[?@.price < 10].title",
    "start": 0,
    "length": 33,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".store.book[?@.price < 10].title",
        "start": 1,
        "length": 32,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".store",
            "start": 1,
            "length": 6,
            "children": [
              {
                "type": "child-segment",
                "text": ".store",
                "start": 1,
                "length": 6,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "store",
                    "start": 2,
                    "length": 5,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 7,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".book",
            "start": 7,
            "length": 5,
            "children": [
              {
                "type": "child-segment",
                "text": ".book",
                "start": 7,
                "length": 5,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 7,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "book",
                    "start": 8,
                    "length": 4,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 12,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?@.price < 10]",
            "start": 12,
            "length": 15,
            "children": [
              {
                "type": "child-segment",
                "text": "[?@.price < 10]",
                "start": 12,
                "length": 15,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?@.price < 10]",
                    "start": 12,
                    "length": 15,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 12,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 13,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?@.price < 10",
                        "start": 13,
                        "length": 13,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?@.price < 10",
                            "start": 13,
                            "length": 13,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 13,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 14,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "@.price < 10",
                                "start": 14,
                                "length": 12,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "@.price < 10",
                                    "start": 14,
                                    "length": 12,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "@.price < 10",
                                        "start": 14,
                                        "length": 12,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "@.price < 10",
                                            "start": 14,
                                            "length": 12,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "@.price < 10",
                                                "start": 14,
                                                "length": 12,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "@.price",
                                                    "start": 14,
                                                    "length": 7,
                                                    "children": [
                                                      {
                                                        "type": "singular-query",
                                                        "text": "@.price",
                                                        "start": 14,
                                                        "length": 7,
                                                        "children": [
                                                          {
                                                            "type": "rel-singular-query",
                                                            "text": "@.price",
                                                            "start": 14,
                                                            "length": 7,
                                                            "children": [
                                                              {
                                                                "type": "current-node-identifier",
                                                                "text": "@",
                                                                "start": 14,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "singular-query-segments",
                                                                "text": ".price",
                                                                "start": 15,
                                                                "length": 6,
                                                                "children": [
                                                                  {
                                                                    "type": "text",
                                                                    "text": "",
                                                                    "start": 15,
                                                                    "length": 0,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "name-segment",
                                                                    "text": ".price",
                                                                    "start": 15,
                                                                    "length": 6,
                                                                    "children": [
                                                                      {
                                                                        "type": "text",
                                                                        "text": ".",
                                                                        "start": 15,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                      {
                                                                        "type": "member-name-shorthand",
                                                                        "text": "price",
                                                                        "start": 16,
                                                                        "length": 5,
                                                                        "children": [],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 21,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": "<",
                                                    "start": 22,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 23,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": "10",
                                                    "start": 24,
                                                    "length": 2,
                                                    "children": [
                                                      {
                                                        "type": "literal",
                                                        "text": "10",
                                                        "start": 24,
                                                        "length": 2,
                                                        "children": [
                                                          {
                                                            "type": "number",
                                                            "text": "10",
                                                            "start": 24,
                                                            "length": 2,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 26,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 26,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 27,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".title",
            "start": 27,
            "length": 6,
            "children": [
              {
                "type": "child-segment",
                "text": ".title",
                "start": 27,
                "length": 6,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 27,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "title",
                    "start": 28,
                    "length": 5,
                    "children": [],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $.store.book[0].title 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$.store.book[0].title",
    "start": 0,
    "length": 21,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": ".store.book[0].title",
        "start": 1,
        "length": 20,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".store",
            "start": 1,
            "length": 6,
            "children": [
              {
                "type": "child-segment",
                "text": ".store",
                "start": 1,
                "length": 6,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 1,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "store",
                    "start": 2,
                    "length": 5,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 7,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".book",
            "start": 7,
            "length": 5,
            "children": [
              {
                "type": "child-segment",
                "text": ".book",
                "start": 7,
                "length": 5,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 7,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "book",
                    "start": 8,
                    "length": 4,
                    "children": [],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 12,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[0]",
            "start": 12,
            "length": 3,
            "children": [
              {
                "type": "child-segment",
                "text": "[0]",
                "start": 12,
                "length": 3,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[0]",
                    "start": 12,
                    "length": 3,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 12,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 13,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "0",
                        "start": 13,
                        "length": 1,
                        "children": [
                          {
                            "type": "index-selector",
                            "text": "0",
                            "start": 13,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 14,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 14,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 15,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": ".title",
            "start": 15,
            "length": 6,
            "children": [
              {
                "type": "child-segment",
                "text": ".title",
                "start": 15,
                "length": 6,
                "children": [
                  {
                    "type": "text",
                    "text": ".",
                    "start": 15,
                    "length": 1,
                    "children": [],
                  },
                  {
                    "type": "member-name-shorthand",
                    "text": "title",
                    "start": 16,
                    "length": 5,
                    "children": [],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $["'"]["@"] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$["'"]["@"]",
    "start": 0,
    "length": 11,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "["'"]["@"]",
        "start": 1,
        "length": 10,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "["'"]",
            "start": 1,
            "length": 5,
            "children": [
              {
                "type": "child-segment",
                "text": "["'"]",
                "start": 1,
                "length": 5,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "["'"]",
                    "start": 1,
                    "length": 5,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": ""'"",
                        "start": 2,
                        "length": 3,
                        "children": [
                          {
                            "type": "name-selector",
                            "text": ""'"",
                            "start": 2,
                            "length": 3,
                            "children": [
                              {
                                "type": "string-literal",
                                "text": ""'"",
                                "start": 2,
                                "length": 3,
                                "children": [
                                  {
                                    "type": "text",
                                    "text": """,
                                    "start": 2,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "double-quoted",
                                    "text": "'",
                                    "start": 3,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "text",
                                    "text": """,
                                    "start": 4,
                                    "length": 1,
                                    "children": [],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 5,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 5,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 6,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "["@"]",
            "start": 6,
            "length": 5,
            "children": [
              {
                "type": "child-segment",
                "text": "["@"]",
                "start": 6,
                "length": 5,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "["@"]",
                    "start": 6,
                    "length": 5,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 6,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 7,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": ""@"",
                        "start": 7,
                        "length": 3,
                        "children": [
                          {
                            "type": "name-selector",
                            "text": ""@"",
                            "start": 7,
                            "length": 3,
                            "children": [
                              {
                                "type": "string-literal",
                                "text": ""@"",
                                "start": 7,
                                "length": 3,
                                "children": [
                                  {
                                    "type": "text",
                                    "text": """,
                                    "start": 7,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "double-quoted",
                                    "text": "@",
                                    "start": 8,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "text",
                                    "text": """,
                                    "start": 9,
                                    "length": 1,
                                    "children": [],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 10,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 10,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $['\\u000b'] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$['\\u000b']",
    "start": 0,
    "length": 11,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "['\\u000b']",
        "start": 1,
        "length": 10,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "['\\u000b']",
            "start": 1,
            "length": 10,
            "children": [
              {
                "type": "child-segment",
                "text": "['\\u000b']",
                "start": 1,
                "length": 10,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "['\\u000b']",
                    "start": 1,
                    "length": 10,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "'\\u000b'",
                        "start": 2,
                        "length": 8,
                        "children": [
                          {
                            "type": "name-selector",
                            "text": "'\\u000b'",
                            "start": 2,
                            "length": 8,
                            "children": [
                              {
                                "type": "string-literal",
                                "text": "'\\u000b'",
                                "start": 2,
                                "length": 8,
                                "children": [
                                  {
                                    "type": "text",
                                    "text": "'",
                                    "start": 2,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": "\\u000b",
                                    "start": 3,
                                    "length": 6,
                                    "children": [],
                                  },
                                  {
                                    "type": "text",
                                    "text": "'",
                                    "start": 9,
                                    "length": 1,
                                    "children": [],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 10,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 10,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $['a'] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$['a']",
    "start": 0,
    "length": 6,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "['a']",
        "start": 1,
        "length": 5,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "['a']",
            "start": 1,
            "length": 5,
            "children": [
              {
                "type": "child-segment",
                "text": "['a']",
                "start": 1,
                "length": 5,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "['a']",
                    "start": 1,
                    "length": 5,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "'a'",
                        "start": 2,
                        "length": 3,
                        "children": [
                          {
                            "type": "name-selector",
                            "text": "'a'",
                            "start": 2,
                            "length": 3,
                            "children": [
                              {
                                "type": "string-literal",
                                "text": "'a'",
                                "start": 2,
                                "length": 3,
                                "children": [
                                  {
                                    "type": "text",
                                    "text": "'",
                                    "start": 2,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": "a",
                                    "start": 3,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "text",
                                    "text": "'",
                                    "start": 4,
                                    "length": 1,
                                    "children": [],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 5,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 5,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $['a']['b'][1] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$['a']['b'][1]",
    "start": 0,
    "length": 14,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "['a']['b'][1]",
        "start": 1,
        "length": 13,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "['a']",
            "start": 1,
            "length": 5,
            "children": [
              {
                "type": "child-segment",
                "text": "['a']",
                "start": 1,
                "length": 5,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "['a']",
                    "start": 1,
                    "length": 5,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "'a'",
                        "start": 2,
                        "length": 3,
                        "children": [
                          {
                            "type": "name-selector",
                            "text": "'a'",
                            "start": 2,
                            "length": 3,
                            "children": [
                              {
                                "type": "string-literal",
                                "text": "'a'",
                                "start": 2,
                                "length": 3,
                                "children": [
                                  {
                                    "type": "text",
                                    "text": "'",
                                    "start": 2,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": "a",
                                    "start": 3,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "text",
                                    "text": "'",
                                    "start": 4,
                                    "length": 1,
                                    "children": [],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 5,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 5,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 6,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "['b']",
            "start": 6,
            "length": 5,
            "children": [
              {
                "type": "child-segment",
                "text": "['b']",
                "start": 6,
                "length": 5,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "['b']",
                    "start": 6,
                    "length": 5,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 6,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 7,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "'b'",
                        "start": 7,
                        "length": 3,
                        "children": [
                          {
                            "type": "name-selector",
                            "text": "'b'",
                            "start": 7,
                            "length": 3,
                            "children": [
                              {
                                "type": "string-literal",
                                "text": "'b'",
                                "start": 7,
                                "length": 3,
                                "children": [
                                  {
                                    "type": "text",
                                    "text": "'",
                                    "start": 7,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": "b",
                                    "start": 8,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "text",
                                    "text": "'",
                                    "start": 9,
                                    "length": 1,
                                    "children": [],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 10,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 10,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 11,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[1]",
            "start": 11,
            "length": 3,
            "children": [
              {
                "type": "child-segment",
                "text": "[1]",
                "start": 11,
                "length": 3,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[1]",
                    "start": 11,
                    "length": 3,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 11,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 12,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "1",
                        "start": 12,
                        "length": 1,
                        "children": [
                          {
                            "type": "index-selector",
                            "text": "1",
                            "start": 12,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 13,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 13,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $['store']['book'][0]['title'] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$['store']['book'][0]['title']",
    "start": 0,
    "length": 30,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "['store']['book'][0]['title']",
        "start": 1,
        "length": 29,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "['store']",
            "start": 1,
            "length": 9,
            "children": [
              {
                "type": "child-segment",
                "text": "['store']",
                "start": 1,
                "length": 9,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "['store']",
                    "start": 1,
                    "length": 9,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "'store'",
                        "start": 2,
                        "length": 7,
                        "children": [
                          {
                            "type": "name-selector",
                            "text": "'store'",
                            "start": 2,
                            "length": 7,
                            "children": [
                              {
                                "type": "string-literal",
                                "text": "'store'",
                                "start": 2,
                                "length": 7,
                                "children": [
                                  {
                                    "type": "text",
                                    "text": "'",
                                    "start": 2,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": "s",
                                    "start": 3,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": "t",
                                    "start": 4,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": "o",
                                    "start": 5,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": "r",
                                    "start": 6,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": "e",
                                    "start": 7,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "text",
                                    "text": "'",
                                    "start": 8,
                                    "length": 1,
                                    "children": [],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 9,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 9,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 10,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "['book']",
            "start": 10,
            "length": 8,
            "children": [
              {
                "type": "child-segment",
                "text": "['book']",
                "start": 10,
                "length": 8,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "['book']",
                    "start": 10,
                    "length": 8,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 10,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 11,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "'book'",
                        "start": 11,
                        "length": 6,
                        "children": [
                          {
                            "type": "name-selector",
                            "text": "'book'",
                            "start": 11,
                            "length": 6,
                            "children": [
                              {
                                "type": "string-literal",
                                "text": "'book'",
                                "start": 11,
                                "length": 6,
                                "children": [
                                  {
                                    "type": "text",
                                    "text": "'",
                                    "start": 11,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": "b",
                                    "start": 12,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": "o",
                                    "start": 13,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": "o",
                                    "start": 14,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": "k",
                                    "start": 15,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "text",
                                    "text": "'",
                                    "start": 16,
                                    "length": 1,
                                    "children": [],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 17,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 17,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 18,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[0]",
            "start": 18,
            "length": 3,
            "children": [
              {
                "type": "child-segment",
                "text": "[0]",
                "start": 18,
                "length": 3,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[0]",
                    "start": 18,
                    "length": 3,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 18,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 19,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "0",
                        "start": 19,
                        "length": 1,
                        "children": [
                          {
                            "type": "index-selector",
                            "text": "0",
                            "start": 19,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 20,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 20,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
          {
            "type": "text",
            "text": "",
            "start": 21,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "['title']",
            "start": 21,
            "length": 9,
            "children": [
              {
                "type": "child-segment",
                "text": "['title']",
                "start": 21,
                "length": 9,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "['title']",
                    "start": 21,
                    "length": 9,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 21,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 22,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "'title'",
                        "start": 22,
                        "length": 7,
                        "children": [
                          {
                            "type": "name-selector",
                            "text": "'title'",
                            "start": 22,
                            "length": 7,
                            "children": [
                              {
                                "type": "string-literal",
                                "text": "'title'",
                                "start": 22,
                                "length": 7,
                                "children": [
                                  {
                                    "type": "text",
                                    "text": "'",
                                    "start": 22,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": "t",
                                    "start": 23,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": "i",
                                    "start": 24,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": "t",
                                    "start": 25,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": "l",
                                    "start": 26,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "single-quoted",
                                    "text": "e",
                                    "start": 27,
                                    "length": 1,
                                    "children": [],
                                  },
                                  {
                                    "type": "text",
                                    "text": "'",
                                    "start": 28,
                                    "length": 1,
                                    "children": [],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 29,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 29,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[*] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[*]",
    "start": 0,
    "length": 4,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[*]",
        "start": 1,
        "length": 3,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[*]",
            "start": 1,
            "length": 3,
            "children": [
              {
                "type": "child-segment",
                "text": "[*]",
                "start": 1,
                "length": 3,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[*]",
                    "start": 1,
                    "length": 3,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "*",
                        "start": 2,
                        "length": 1,
                        "children": [
                          {
                            "type": "wildcard-selector",
                            "text": "*",
                            "start": 2,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 3,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[::-1] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[::-1]",
    "start": 0,
    "length": 7,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[::-1]",
        "start": 1,
        "length": 6,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[::-1]",
            "start": 1,
            "length": 6,
            "children": [
              {
                "type": "child-segment",
                "text": "[::-1]",
                "start": 1,
                "length": 6,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[::-1]",
                    "start": 1,
                    "length": 6,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "::-1",
                        "start": 2,
                        "length": 4,
                        "children": [
                          {
                            "type": "slice-selector",
                            "text": "::-1",
                            "start": 2,
                            "length": 4,
                            "children": [
                              {
                                "type": "text",
                                "text": ":",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": ":",
                                "start": 3,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 4,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "step",
                                "text": "-1",
                                "start": 4,
                                "length": 2,
                                "children": [],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 6,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 6,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[?@.*] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[?@.*]",
    "start": 0,
    "length": 7,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[?@.*]",
        "start": 1,
        "length": 6,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?@.*]",
            "start": 1,
            "length": 6,
            "children": [
              {
                "type": "child-segment",
                "text": "[?@.*]",
                "start": 1,
                "length": 6,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?@.*]",
                    "start": 1,
                    "length": 6,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?@.*",
                        "start": 2,
                        "length": 4,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?@.*",
                            "start": 2,
                            "length": 4,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "@.*",
                                "start": 3,
                                "length": 3,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "@.*",
                                    "start": 3,
                                    "length": 3,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "@.*",
                                        "start": 3,
                                        "length": 3,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "@.*",
                                            "start": 3,
                                            "length": 3,
                                            "children": [
                                              {
                                                "type": "test-expr",
                                                "text": "@.*",
                                                "start": 3,
                                                "length": 3,
                                                "children": [
                                                  {
                                                    "type": "filter-query",
                                                    "text": "@.*",
                                                    "start": 3,
                                                    "length": 3,
                                                    "children": [
                                                      {
                                                        "type": "rel-query",
                                                        "text": "@.*",
                                                        "start": 3,
                                                        "length": 3,
                                                        "children": [
                                                          {
                                                            "type": "current-node-identifier",
                                                            "text": "@",
                                                            "start": 3,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "segments",
                                                            "text": ".*",
                                                            "start": 4,
                                                            "length": 2,
                                                            "children": [
                                                              {
                                                                "type": "text",
                                                                "text": "",
                                                                "start": 4,
                                                                "length": 0,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "segment",
                                                                "text": ".*",
                                                                "start": 4,
                                                                "length": 2,
                                                                "children": [
                                                                  {
                                                                    "type": "child-segment",
                                                                    "text": ".*",
                                                                    "start": 4,
                                                                    "length": 2,
                                                                    "children": [
                                                                      {
                                                                        "type": "text",
                                                                        "text": ".",
                                                                        "start": 4,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                      {
                                                                        "type": "wildcard-selector",
                                                                        "text": "*",
                                                                        "start": 5,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 6,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 6,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[?@[?@.b]] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[?@[?@.b]]",
    "start": 0,
    "length": 11,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[?@[?@.b]]",
        "start": 1,
        "length": 10,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?@[?@.b]]",
            "start": 1,
            "length": 10,
            "children": [
              {
                "type": "child-segment",
                "text": "[?@[?@.b]]",
                "start": 1,
                "length": 10,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?@[?@.b]]",
                    "start": 1,
                    "length": 10,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?@[?@.b]",
                        "start": 2,
                        "length": 8,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?@[?@.b]",
                            "start": 2,
                            "length": 8,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "@[?@.b]",
                                "start": 3,
                                "length": 7,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "@[?@.b]",
                                    "start": 3,
                                    "length": 7,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "@[?@.b]",
                                        "start": 3,
                                        "length": 7,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "@[?@.b]",
                                            "start": 3,
                                            "length": 7,
                                            "children": [
                                              {
                                                "type": "test-expr",
                                                "text": "@[?@.b]",
                                                "start": 3,
                                                "length": 7,
                                                "children": [
                                                  {
                                                    "type": "filter-query",
                                                    "text": "@[?@.b]",
                                                    "start": 3,
                                                    "length": 7,
                                                    "children": [
                                                      {
                                                        "type": "rel-query",
                                                        "text": "@[?@.b]",
                                                        "start": 3,
                                                        "length": 7,
                                                        "children": [
                                                          {
                                                            "type": "current-node-identifier",
                                                            "text": "@",
                                                            "start": 3,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "segments",
                                                            "text": "[?@.b]",
                                                            "start": 4,
                                                            "length": 6,
                                                            "children": [
                                                              {
                                                                "type": "text",
                                                                "text": "",
                                                                "start": 4,
                                                                "length": 0,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "segment",
                                                                "text": "[?@.b]",
                                                                "start": 4,
                                                                "length": 6,
                                                                "children": [
                                                                  {
                                                                    "type": "child-segment",
                                                                    "text": "[?@.b]",
                                                                    "start": 4,
                                                                    "length": 6,
                                                                    "children": [
                                                                      {
                                                                        "type": "bracketed-selection",
                                                                        "text": "[?@.b]",
                                                                        "start": 4,
                                                                        "length": 6,
                                                                        "children": [
                                                                          {
                                                                            "type": "text",
                                                                            "text": "[",
                                                                            "start": 4,
                                                                            "length": 1,
                                                                            "children": [],
                                                                          },
                                                                          {
                                                                            "type": "text",
                                                                            "text": "",
                                                                            "start": 5,
                                                                            "length": 0,
                                                                            "children": [],
                                                                          },
                                                                          {
                                                                            "type": "selector",
                                                                            "text": "?@.b",
                                                                            "start": 5,
                                                                            "length": 4,
                                                                            "children": [
                                                                              {
                                                                                "type": "filter-selector",
                                                                                "text": "?@.b",
                                                                                "start": 5,
                                                                                "length": 4,
                                                                                "children": [
                                                                                  {
                                                                                    "type": "text",
                                                                                    "text": "?",
                                                                                    "start": 5,
                                                                                    "length": 1,
                                                                                    "children": [],
                                                                                  },
                                                                                  {
                                                                                    "type": "text",
                                                                                    "text": "",
                                                                                    "start": 6,
                                                                                    "length": 0,
                                                                                    "children": [],
                                                                                  },
                                                                                  {
                                                                                    "type": "logical-expr",
                                                                                    "text": "@.b",
                                                                                    "start": 6,
                                                                                    "length": 3,
                                                                                    "children": [
                                                                                      {
                                                                                        "type": "logical-or-expr",
                                                                                        "text": "@.b",
                                                                                        "start": 6,
                                                                                        "length": 3,
                                                                                        "children": [
                                                                                          {
                                                                                            "type": "logical-and-expr",
                                                                                            "text": "@.b",
                                                                                            "start": 6,
                                                                                            "length": 3,
                                                                                            "children": [
                                                                                              {
                                                                                                "type": "basic-expr",
                                                                                                "text": "@.b",
                                                                                                "start": 6,
                                                                                                "length": 3,
                                                                                                "children": [
                                                                                                  {
                                                                                                    "type": "test-expr",
                                                                                                    "text": "@.b",
                                                                                                    "start": 6,
                                                                                                    "length": 3,
                                                                                                    "children": [
                                                                                                      {
                                                                                                        "type": "filter-query",
                                                                                                        "text": "@.b",
                                                                                                        "start": 6,
                                                                                                        "length": 3,
                                                                                                        "children": [
                                                                                                          {
                                                                                                            "type": "rel-query",
                                                                                                            "text": "@.b",
                                                                                                            "start": 6,
                                                                                                            "length": 3,
                                                                                                            "children": [
                                                                                                              {
                                                                                                                "type": "current-node-identifier",
                                                                                                                "text": "@",
                                                                                                                "start": 6,
                                                                                                                "length": 1,
                                                                                                                "children": [],
                                                                                                              },
                                                                                                              {
                                                                                                                "type": "segments",
                                                                                                                "text": ".b",
                                                                                                                "start": 7,
                                                                                                                "length": 2,
                                                                                                                "children": [
                                                                                                                  {
                                                                                                                    "type": "text",
                                                                                                                    "text": "",
                                                                                                                    "start": 7,
                                                                                                                    "length": 0,
                                                                                                                    "children": [],
                                                                                                                  },
                                                                                                                  {
                                                                                                                    "type": "segment",
                                                                                                                    "text": ".b",
                                                                                                                    "start": 7,
                                                                                                                    "length": 2,
                                                                                                                    "children": [
                                                                                                                      {
                                                                                                                        "type": "child-segment",
                                                                                                                        "text": ".b",
                                                                                                                        "start": 7,
                                                                                                                        "length": 2,
                                                                                                                        "children": [
                                                                                                                          {
                                                                                                                            "type": "text",
                                                                                                                            "text": ".",
                                                                                                                            "start": 7,
                                                                                                                            "length": 1,
                                                                                                                            "children": [],
                                                                                                                          },
                                                                                                                          {
                                                                                                                            "type": "member-name-shorthand",
                                                                                                                            "text": "b",
                                                                                                                            "start": 8,
                                                                                                                            "length": 1,
                                                                                                                            "children": [],
                                                                                                                          },
                                                                                                                        ],
                                                                                                                      },
                                                                                                                    ],
                                                                                                                  },
                                                                                                                ],
                                                                                                              },
                                                                                                            ],
                                                                                                          },
                                                                                                        ],
                                                                                                      },
                                                                                                    ],
                                                                                                  },
                                                                                                ],
                                                                                              },
                                                                                            ],
                                                                                          },
                                                                                        ],
                                                                                      },
                                                                                    ],
                                                                                  },
                                                                                ],
                                                                              },
                                                                            ],
                                                                          },
                                                                          {
                                                                            "type": "text",
                                                                            "text": "",
                                                                            "start": 9,
                                                                            "length": 0,
                                                                            "children": [],
                                                                          },
                                                                          {
                                                                            "type": "text",
                                                                            "text": "]",
                                                                            "start": 9,
                                                                            "length": 1,
                                                                            "children": [],
                                                                          },
                                                                        ],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 10,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 10,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[?bal(1)] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[?bal(1)]",
    "start": 0,
    "length": 10,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[?bal(1)]",
        "start": 1,
        "length": 9,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?bal(1)]",
            "start": 1,
            "length": 9,
            "children": [
              {
                "type": "child-segment",
                "text": "[?bal(1)]",
                "start": 1,
                "length": 9,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?bal(1)]",
                    "start": 1,
                    "length": 9,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?bal(1)",
                        "start": 2,
                        "length": 7,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?bal(1)",
                            "start": 2,
                            "length": 7,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "bal(1)",
                                "start": 3,
                                "length": 6,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "bal(1)",
                                    "start": 3,
                                    "length": 6,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "bal(1)",
                                        "start": 3,
                                        "length": 6,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "bal(1)",
                                            "start": 3,
                                            "length": 6,
                                            "children": [
                                              {
                                                "type": "test-expr",
                                                "text": "bal(1)",
                                                "start": 3,
                                                "length": 6,
                                                "children": [
                                                  {
                                                    "type": "function-expr",
                                                    "text": "bal(1)",
                                                    "start": 3,
                                                    "length": 6,
                                                    "children": [
                                                      {
                                                        "type": "function-name",
                                                        "text": "bal",
                                                        "start": 3,
                                                        "length": 3,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "(",
                                                        "start": 6,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 7,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "function-argument",
                                                        "text": "1",
                                                        "start": 7,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "literal",
                                                            "text": "1",
                                                            "start": 7,
                                                            "length": 1,
                                                            "children": [
                                                              {
                                                                "type": "number",
                                                                "text": "1",
                                                                "start": 7,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 8,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": ")",
                                                        "start": 8,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 9,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 9,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[?bar(@.a)] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[?bar(@.a)]",
    "start": 0,
    "length": 12,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[?bar(@.a)]",
        "start": 1,
        "length": 11,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?bar(@.a)]",
            "start": 1,
            "length": 11,
            "children": [
              {
                "type": "child-segment",
                "text": "[?bar(@.a)]",
                "start": 1,
                "length": 11,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?bar(@.a)]",
                    "start": 1,
                    "length": 11,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?bar(@.a)",
                        "start": 2,
                        "length": 9,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?bar(@.a)",
                            "start": 2,
                            "length": 9,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "bar(@.a)",
                                "start": 3,
                                "length": 8,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "bar(@.a)",
                                    "start": 3,
                                    "length": 8,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "bar(@.a)",
                                        "start": 3,
                                        "length": 8,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "bar(@.a)",
                                            "start": 3,
                                            "length": 8,
                                            "children": [
                                              {
                                                "type": "test-expr",
                                                "text": "bar(@.a)",
                                                "start": 3,
                                                "length": 8,
                                                "children": [
                                                  {
                                                    "type": "function-expr",
                                                    "text": "bar(@.a)",
                                                    "start": 3,
                                                    "length": 8,
                                                    "children": [
                                                      {
                                                        "type": "function-name",
                                                        "text": "bar",
                                                        "start": 3,
                                                        "length": 3,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "(",
                                                        "start": 6,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 7,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "function-argument",
                                                        "text": "@.a",
                                                        "start": 7,
                                                        "length": 3,
                                                        "children": [
                                                          {
                                                            "type": "logical-expr",
                                                            "text": "@.a",
                                                            "start": 7,
                                                            "length": 3,
                                                            "children": [
                                                              {
                                                                "type": "logical-or-expr",
                                                                "text": "@.a",
                                                                "start": 7,
                                                                "length": 3,
                                                                "children": [
                                                                  {
                                                                    "type": "logical-and-expr",
                                                                    "text": "@.a",
                                                                    "start": 7,
                                                                    "length": 3,
                                                                    "children": [
                                                                      {
                                                                        "type": "basic-expr",
                                                                        "text": "@.a",
                                                                        "start": 7,
                                                                        "length": 3,
                                                                        "children": [
                                                                          {
                                                                            "type": "test-expr",
                                                                            "text": "@.a",
                                                                            "start": 7,
                                                                            "length": 3,
                                                                            "children": [
                                                                              {
                                                                                "type": "filter-query",
                                                                                "text": "@.a",
                                                                                "start": 7,
                                                                                "length": 3,
                                                                                "children": [
                                                                                  {
                                                                                    "type": "rel-query",
                                                                                    "text": "@.a",
                                                                                    "start": 7,
                                                                                    "length": 3,
                                                                                    "children": [
                                                                                      {
                                                                                        "type": "current-node-identifier",
                                                                                        "text": "@",
                                                                                        "start": 7,
                                                                                        "length": 1,
                                                                                        "children": [],
                                                                                      },
                                                                                      {
                                                                                        "type": "segments",
                                                                                        "text": ".a",
                                                                                        "start": 8,
                                                                                        "length": 2,
                                                                                        "children": [
                                                                                          {
                                                                                            "type": "text",
                                                                                            "text": "",
                                                                                            "start": 8,
                                                                                            "length": 0,
                                                                                            "children": [],
                                                                                          },
                                                                                          {
                                                                                            "type": "segment",
                                                                                            "text": ".a",
                                                                                            "start": 8,
                                                                                            "length": 2,
                                                                                            "children": [
                                                                                              {
                                                                                                "type": "child-segment",
                                                                                                "text": ".a",
                                                                                                "start": 8,
                                                                                                "length": 2,
                                                                                                "children": [
                                                                                                  {
                                                                                                    "type": "text",
                                                                                                    "text": ".",
                                                                                                    "start": 8,
                                                                                                    "length": 1,
                                                                                                    "children": [],
                                                                                                  },
                                                                                                  {
                                                                                                    "type": "member-name-shorthand",
                                                                                                    "text": "a",
                                                                                                    "start": 9,
                                                                                                    "length": 1,
                                                                                                    "children": [],
                                                                                                  },
                                                                                                ],
                                                                                              },
                                                                                            ],
                                                                                          },
                                                                                        ],
                                                                                      },
                                                                                    ],
                                                                                  },
                                                                                ],
                                                                              },
                                                                            ],
                                                                          },
                                                                        ],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 10,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": ")",
                                                        "start": 10,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 11,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 11,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[?blt(1)] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[?blt(1)]",
    "start": 0,
    "length": 10,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[?blt(1)]",
        "start": 1,
        "length": 9,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?blt(1)]",
            "start": 1,
            "length": 9,
            "children": [
              {
                "type": "child-segment",
                "text": "[?blt(1)]",
                "start": 1,
                "length": 9,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?blt(1)]",
                    "start": 1,
                    "length": 9,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?blt(1)",
                        "start": 2,
                        "length": 7,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?blt(1)",
                            "start": 2,
                            "length": 7,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "blt(1)",
                                "start": 3,
                                "length": 6,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "blt(1)",
                                    "start": 3,
                                    "length": 6,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "blt(1)",
                                        "start": 3,
                                        "length": 6,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "blt(1)",
                                            "start": 3,
                                            "length": 6,
                                            "children": [
                                              {
                                                "type": "test-expr",
                                                "text": "blt(1)",
                                                "start": 3,
                                                "length": 6,
                                                "children": [
                                                  {
                                                    "type": "function-expr",
                                                    "text": "blt(1)",
                                                    "start": 3,
                                                    "length": 6,
                                                    "children": [
                                                      {
                                                        "type": "function-name",
                                                        "text": "blt",
                                                        "start": 3,
                                                        "length": 3,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "(",
                                                        "start": 6,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 7,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "function-argument",
                                                        "text": "1",
                                                        "start": 7,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "literal",
                                                            "text": "1",
                                                            "start": 7,
                                                            "length": 1,
                                                            "children": [
                                                              {
                                                                "type": "number",
                                                                "text": "1",
                                                                "start": 7,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 8,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": ")",
                                                        "start": 8,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 9,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 9,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[?blt(1==1)] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[?blt(1==1)]",
    "start": 0,
    "length": 13,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[?blt(1==1)]",
        "start": 1,
        "length": 12,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?blt(1==1)]",
            "start": 1,
            "length": 12,
            "children": [
              {
                "type": "child-segment",
                "text": "[?blt(1==1)]",
                "start": 1,
                "length": 12,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?blt(1==1)]",
                    "start": 1,
                    "length": 12,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?blt(1==1)",
                        "start": 2,
                        "length": 10,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?blt(1==1)",
                            "start": 2,
                            "length": 10,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "blt(1==1)",
                                "start": 3,
                                "length": 9,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "blt(1==1)",
                                    "start": 3,
                                    "length": 9,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "blt(1==1)",
                                        "start": 3,
                                        "length": 9,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "blt(1==1)",
                                            "start": 3,
                                            "length": 9,
                                            "children": [
                                              {
                                                "type": "test-expr",
                                                "text": "blt(1==1)",
                                                "start": 3,
                                                "length": 9,
                                                "children": [
                                                  {
                                                    "type": "function-expr",
                                                    "text": "blt(1==1)",
                                                    "start": 3,
                                                    "length": 9,
                                                    "children": [
                                                      {
                                                        "type": "function-name",
                                                        "text": "blt",
                                                        "start": 3,
                                                        "length": 3,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "(",
                                                        "start": 6,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 7,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "function-argument",
                                                        "text": "1==1",
                                                        "start": 7,
                                                        "length": 4,
                                                        "children": [
                                                          {
                                                            "type": "logical-expr",
                                                            "text": "1==1",
                                                            "start": 7,
                                                            "length": 4,
                                                            "children": [
                                                              {
                                                                "type": "logical-or-expr",
                                                                "text": "1==1",
                                                                "start": 7,
                                                                "length": 4,
                                                                "children": [
                                                                  {
                                                                    "type": "logical-and-expr",
                                                                    "text": "1==1",
                                                                    "start": 7,
                                                                    "length": 4,
                                                                    "children": [
                                                                      {
                                                                        "type": "basic-expr",
                                                                        "text": "1==1",
                                                                        "start": 7,
                                                                        "length": 4,
                                                                        "children": [
                                                                          {
                                                                            "type": "comparison-expr",
                                                                            "text": "1==1",
                                                                            "start": 7,
                                                                            "length": 4,
                                                                            "children": [
                                                                              {
                                                                                "type": "comparable",
                                                                                "text": "1",
                                                                                "start": 7,
                                                                                "length": 1,
                                                                                "children": [
                                                                                  {
                                                                                    "type": "literal",
                                                                                    "text": "1",
                                                                                    "start": 7,
                                                                                    "length": 1,
                                                                                    "children": [
                                                                                      {
                                                                                        "type": "number",
                                                                                        "text": "1",
                                                                                        "start": 7,
                                                                                        "length": 1,
                                                                                        "children": [],
                                                                                      },
                                                                                    ],
                                                                                  },
                                                                                ],
                                                                              },
                                                                              {
                                                                                "type": "text",
                                                                                "text": "",
                                                                                "start": 8,
                                                                                "length": 0,
                                                                                "children": [],
                                                                              },
                                                                              {
                                                                                "type": "comparison-op",
                                                                                "text": "==",
                                                                                "start": 8,
                                                                                "length": 2,
                                                                                "children": [],
                                                                              },
                                                                              {
                                                                                "type": "text",
                                                                                "text": "",
                                                                                "start": 10,
                                                                                "length": 0,
                                                                                "children": [],
                                                                              },
                                                                              {
                                                                                "type": "comparable",
                                                                                "text": "1",
                                                                                "start": 10,
                                                                                "length": 1,
                                                                                "children": [
                                                                                  {
                                                                                    "type": "literal",
                                                                                    "text": "1",
                                                                                    "start": 10,
                                                                                    "length": 1,
                                                                                    "children": [
                                                                                      {
                                                                                        "type": "number",
                                                                                        "text": "1",
                                                                                        "start": 10,
                                                                                        "length": 1,
                                                                                        "children": [],
                                                                                      },
                                                                                    ],
                                                                                  },
                                                                                ],
                                                                              },
                                                                            ],
                                                                          },
                                                                        ],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 11,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": ")",
                                                        "start": 11,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 12,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 12,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[?bnl(@.*)] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[?bnl(@.*)]",
    "start": 0,
    "length": 12,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[?bnl(@.*)]",
        "start": 1,
        "length": 11,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?bnl(@.*)]",
            "start": 1,
            "length": 11,
            "children": [
              {
                "type": "child-segment",
                "text": "[?bnl(@.*)]",
                "start": 1,
                "length": 11,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?bnl(@.*)]",
                    "start": 1,
                    "length": 11,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?bnl(@.*)",
                        "start": 2,
                        "length": 9,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?bnl(@.*)",
                            "start": 2,
                            "length": 9,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "bnl(@.*)",
                                "start": 3,
                                "length": 8,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "bnl(@.*)",
                                    "start": 3,
                                    "length": 8,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "bnl(@.*)",
                                        "start": 3,
                                        "length": 8,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "bnl(@.*)",
                                            "start": 3,
                                            "length": 8,
                                            "children": [
                                              {
                                                "type": "test-expr",
                                                "text": "bnl(@.*)",
                                                "start": 3,
                                                "length": 8,
                                                "children": [
                                                  {
                                                    "type": "function-expr",
                                                    "text": "bnl(@.*)",
                                                    "start": 3,
                                                    "length": 8,
                                                    "children": [
                                                      {
                                                        "type": "function-name",
                                                        "text": "bnl",
                                                        "start": 3,
                                                        "length": 3,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "(",
                                                        "start": 6,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 7,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "function-argument",
                                                        "text": "@.*",
                                                        "start": 7,
                                                        "length": 3,
                                                        "children": [
                                                          {
                                                            "type": "logical-expr",
                                                            "text": "@.*",
                                                            "start": 7,
                                                            "length": 3,
                                                            "children": [
                                                              {
                                                                "type": "logical-or-expr",
                                                                "text": "@.*",
                                                                "start": 7,
                                                                "length": 3,
                                                                "children": [
                                                                  {
                                                                    "type": "logical-and-expr",
                                                                    "text": "@.*",
                                                                    "start": 7,
                                                                    "length": 3,
                                                                    "children": [
                                                                      {
                                                                        "type": "basic-expr",
                                                                        "text": "@.*",
                                                                        "start": 7,
                                                                        "length": 3,
                                                                        "children": [
                                                                          {
                                                                            "type": "test-expr",
                                                                            "text": "@.*",
                                                                            "start": 7,
                                                                            "length": 3,
                                                                            "children": [
                                                                              {
                                                                                "type": "filter-query",
                                                                                "text": "@.*",
                                                                                "start": 7,
                                                                                "length": 3,
                                                                                "children": [
                                                                                  {
                                                                                    "type": "rel-query",
                                                                                    "text": "@.*",
                                                                                    "start": 7,
                                                                                    "length": 3,
                                                                                    "children": [
                                                                                      {
                                                                                        "type": "current-node-identifier",
                                                                                        "text": "@",
                                                                                        "start": 7,
                                                                                        "length": 1,
                                                                                        "children": [],
                                                                                      },
                                                                                      {
                                                                                        "type": "segments",
                                                                                        "text": ".*",
                                                                                        "start": 8,
                                                                                        "length": 2,
                                                                                        "children": [
                                                                                          {
                                                                                            "type": "text",
                                                                                            "text": "",
                                                                                            "start": 8,
                                                                                            "length": 0,
                                                                                            "children": [],
                                                                                          },
                                                                                          {
                                                                                            "type": "segment",
                                                                                            "text": ".*",
                                                                                            "start": 8,
                                                                                            "length": 2,
                                                                                            "children": [
                                                                                              {
                                                                                                "type": "child-segment",
                                                                                                "text": ".*",
                                                                                                "start": 8,
                                                                                                "length": 2,
                                                                                                "children": [
                                                                                                  {
                                                                                                    "type": "text",
                                                                                                    "text": ".",
                                                                                                    "start": 8,
                                                                                                    "length": 1,
                                                                                                    "children": [],
                                                                                                  },
                                                                                                  {
                                                                                                    "type": "wildcard-selector",
                                                                                                    "text": "*",
                                                                                                    "start": 9,
                                                                                                    "length": 1,
                                                                                                    "children": [],
                                                                                                  },
                                                                                                ],
                                                                                              },
                                                                                            ],
                                                                                          },
                                                                                        ],
                                                                                      },
                                                                                    ],
                                                                                  },
                                                                                ],
                                                                              },
                                                                            ],
                                                                          },
                                                                        ],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 10,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": ")",
                                                        "start": 10,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 11,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 11,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[?count(@.*) == 1] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[?count(@.*) == 1]",
    "start": 0,
    "length": 19,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[?count(@.*) == 1]",
        "start": 1,
        "length": 18,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?count(@.*) == 1]",
            "start": 1,
            "length": 18,
            "children": [
              {
                "type": "child-segment",
                "text": "[?count(@.*) == 1]",
                "start": 1,
                "length": 18,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?count(@.*) == 1]",
                    "start": 1,
                    "length": 18,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?count(@.*) == 1",
                        "start": 2,
                        "length": 16,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?count(@.*) == 1",
                            "start": 2,
                            "length": 16,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "count(@.*) == 1",
                                "start": 3,
                                "length": 15,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "count(@.*) == 1",
                                    "start": 3,
                                    "length": 15,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "count(@.*) == 1",
                                        "start": 3,
                                        "length": 15,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "count(@.*) == 1",
                                            "start": 3,
                                            "length": 15,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "count(@.*) == 1",
                                                "start": 3,
                                                "length": 15,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "count(@.*)",
                                                    "start": 3,
                                                    "length": 10,
                                                    "children": [
                                                      {
                                                        "type": "function-expr",
                                                        "text": "count(@.*)",
                                                        "start": 3,
                                                        "length": 10,
                                                        "children": [
                                                          {
                                                            "type": "function-name",
                                                            "text": "count",
                                                            "start": 3,
                                                            "length": 5,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "(",
                                                            "start": 8,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 9,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "function-argument",
                                                            "text": "@.*",
                                                            "start": 9,
                                                            "length": 3,
                                                            "children": [
                                                              {
                                                                "type": "logical-expr",
                                                                "text": "@.*",
                                                                "start": 9,
                                                                "length": 3,
                                                                "children": [
                                                                  {
                                                                    "type": "logical-or-expr",
                                                                    "text": "@.*",
                                                                    "start": 9,
                                                                    "length": 3,
                                                                    "children": [
                                                                      {
                                                                        "type": "logical-and-expr",
                                                                        "text": "@.*",
                                                                        "start": 9,
                                                                        "length": 3,
                                                                        "children": [
                                                                          {
                                                                            "type": "basic-expr",
                                                                            "text": "@.*",
                                                                            "start": 9,
                                                                            "length": 3,
                                                                            "children": [
                                                                              {
                                                                                "type": "test-expr",
                                                                                "text": "@.*",
                                                                                "start": 9,
                                                                                "length": 3,
                                                                                "children": [
                                                                                  {
                                                                                    "type": "filter-query",
                                                                                    "text": "@.*",
                                                                                    "start": 9,
                                                                                    "length": 3,
                                                                                    "children": [
                                                                                      {
                                                                                        "type": "rel-query",
                                                                                        "text": "@.*",
                                                                                        "start": 9,
                                                                                        "length": 3,
                                                                                        "children": [
                                                                                          {
                                                                                            "type": "current-node-identifier",
                                                                                            "text": "@",
                                                                                            "start": 9,
                                                                                            "length": 1,
                                                                                            "children": [],
                                                                                          },
                                                                                          {
                                                                                            "type": "segments",
                                                                                            "text": ".*",
                                                                                            "start": 10,
                                                                                            "length": 2,
                                                                                            "children": [
                                                                                              {
                                                                                                "type": "text",
                                                                                                "text": "",
                                                                                                "start": 10,
                                                                                                "length": 0,
                                                                                                "children": [],
                                                                                              },
                                                                                              {
                                                                                                "type": "segment",
                                                                                                "text": ".*",
                                                                                                "start": 10,
                                                                                                "length": 2,
                                                                                                "children": [
                                                                                                  {
                                                                                                    "type": "child-segment",
                                                                                                    "text": ".*",
                                                                                                    "start": 10,
                                                                                                    "length": 2,
                                                                                                    "children": [
                                                                                                      {
                                                                                                        "type": "text",
                                                                                                        "text": ".",
                                                                                                        "start": 10,
                                                                                                        "length": 1,
                                                                                                        "children": [],
                                                                                                      },
                                                                                                      {
                                                                                                        "type": "wildcard-selector",
                                                                                                        "text": "*",
                                                                                                        "start": 11,
                                                                                                        "length": 1,
                                                                                                        "children": [],
                                                                                                      },
                                                                                                    ],
                                                                                                  },
                                                                                                ],
                                                                                              },
                                                                                            ],
                                                                                          },
                                                                                        ],
                                                                                      },
                                                                                    ],
                                                                                  },
                                                                                ],
                                                                              },
                                                                            ],
                                                                          },
                                                                        ],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 12,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": ")",
                                                            "start": 12,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 13,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": "==",
                                                    "start": 14,
                                                    "length": 2,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 16,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": "1",
                                                    "start": 17,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "literal",
                                                        "text": "1",
                                                        "start": 17,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "number",
                                                            "text": "1",
                                                            "start": 17,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 18,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 18,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[?count(@.*.author) >= 5] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[?count(@.*.author) >= 5]",
    "start": 0,
    "length": 26,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[?count(@.*.author) >= 5]",
        "start": 1,
        "length": 25,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?count(@.*.author) >= 5]",
            "start": 1,
            "length": 25,
            "children": [
              {
                "type": "child-segment",
                "text": "[?count(@.*.author) >= 5]",
                "start": 1,
                "length": 25,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?count(@.*.author) >= 5]",
                    "start": 1,
                    "length": 25,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?count(@.*.author) >= 5",
                        "start": 2,
                        "length": 23,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?count(@.*.author) >= 5",
                            "start": 2,
                            "length": 23,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "count(@.*.author) >= 5",
                                "start": 3,
                                "length": 22,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "count(@.*.author) >= 5",
                                    "start": 3,
                                    "length": 22,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "count(@.*.author) >= 5",
                                        "start": 3,
                                        "length": 22,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "count(@.*.author) >= 5",
                                            "start": 3,
                                            "length": 22,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "count(@.*.author) >= 5",
                                                "start": 3,
                                                "length": 22,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "count(@.*.author)",
                                                    "start": 3,
                                                    "length": 17,
                                                    "children": [
                                                      {
                                                        "type": "function-expr",
                                                        "text": "count(@.*.author)",
                                                        "start": 3,
                                                        "length": 17,
                                                        "children": [
                                                          {
                                                            "type": "function-name",
                                                            "text": "count",
                                                            "start": 3,
                                                            "length": 5,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "(",
                                                            "start": 8,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 9,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "function-argument",
                                                            "text": "@.*.author",
                                                            "start": 9,
                                                            "length": 10,
                                                            "children": [
                                                              {
                                                                "type": "logical-expr",
                                                                "text": "@.*.author",
                                                                "start": 9,
                                                                "length": 10,
                                                                "children": [
                                                                  {
                                                                    "type": "logical-or-expr",
                                                                    "text": "@.*.author",
                                                                    "start": 9,
                                                                    "length": 10,
                                                                    "children": [
                                                                      {
                                                                        "type": "logical-and-expr",
                                                                        "text": "@.*.author",
                                                                        "start": 9,
                                                                        "length": 10,
                                                                        "children": [
                                                                          {
                                                                            "type": "basic-expr",
                                                                            "text": "@.*.author",
                                                                            "start": 9,
                                                                            "length": 10,
                                                                            "children": [
                                                                              {
                                                                                "type": "test-expr",
                                                                                "text": "@.*.author",
                                                                                "start": 9,
                                                                                "length": 10,
                                                                                "children": [
                                                                                  {
                                                                                    "type": "filter-query",
                                                                                    "text": "@.*.author",
                                                                                    "start": 9,
                                                                                    "length": 10,
                                                                                    "children": [
                                                                                      {
                                                                                        "type": "rel-query",
                                                                                        "text": "@.*.author",
                                                                                        "start": 9,
                                                                                        "length": 10,
                                                                                        "children": [
                                                                                          {
                                                                                            "type": "current-node-identifier",
                                                                                            "text": "@",
                                                                                            "start": 9,
                                                                                            "length": 1,
                                                                                            "children": [],
                                                                                          },
                                                                                          {
                                                                                            "type": "segments",
                                                                                            "text": ".*.author",
                                                                                            "start": 10,
                                                                                            "length": 9,
                                                                                            "children": [
                                                                                              {
                                                                                                "type": "text",
                                                                                                "text": "",
                                                                                                "start": 10,
                                                                                                "length": 0,
                                                                                                "children": [],
                                                                                              },
                                                                                              {
                                                                                                "type": "segment",
                                                                                                "text": ".*",
                                                                                                "start": 10,
                                                                                                "length": 2,
                                                                                                "children": [
                                                                                                  {
                                                                                                    "type": "child-segment",
                                                                                                    "text": ".*",
                                                                                                    "start": 10,
                                                                                                    "length": 2,
                                                                                                    "children": [
                                                                                                      {
                                                                                                        "type": "text",
                                                                                                        "text": ".",
                                                                                                        "start": 10,
                                                                                                        "length": 1,
                                                                                                        "children": [],
                                                                                                      },
                                                                                                      {
                                                                                                        "type": "wildcard-selector",
                                                                                                        "text": "*",
                                                                                                        "start": 11,
                                                                                                        "length": 1,
                                                                                                        "children": [],
                                                                                                      },
                                                                                                    ],
                                                                                                  },
                                                                                                ],
                                                                                              },
                                                                                              {
                                                                                                "type": "text",
                                                                                                "text": "",
                                                                                                "start": 12,
                                                                                                "length": 0,
                                                                                                "children": [],
                                                                                              },
                                                                                              {
                                                                                                "type": "segment",
                                                                                                "text": ".author",
                                                                                                "start": 12,
                                                                                                "length": 7,
                                                                                                "children": [
                                                                                                  {
                                                                                                    "type": "child-segment",
                                                                                                    "text": ".author",
                                                                                                    "start": 12,
                                                                                                    "length": 7,
                                                                                                    "children": [
                                                                                                      {
                                                                                                        "type": "text",
                                                                                                        "text": ".",
                                                                                                        "start": 12,
                                                                                                        "length": 1,
                                                                                                        "children": [],
                                                                                                      },
                                                                                                      {
                                                                                                        "type": "member-name-shorthand",
                                                                                                        "text": "author",
                                                                                                        "start": 13,
                                                                                                        "length": 6,
                                                                                                        "children": [],
                                                                                                      },
                                                                                                    ],
                                                                                                  },
                                                                                                ],
                                                                                              },
                                                                                            ],
                                                                                          },
                                                                                        ],
                                                                                      },
                                                                                    ],
                                                                                  },
                                                                                ],
                                                                              },
                                                                            ],
                                                                          },
                                                                        ],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 19,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": ")",
                                                            "start": 19,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 20,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": ">=",
                                                    "start": 21,
                                                    "length": 2,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 23,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": "5",
                                                    "start": 24,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "literal",
                                                        "text": "5",
                                                        "start": 24,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "number",
                                                            "text": "5",
                                                            "start": 24,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 25,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 25,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[?count(1) == 1] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[?count(1) == 1]",
    "start": 0,
    "length": 17,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[?count(1) == 1]",
        "start": 1,
        "length": 16,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?count(1) == 1]",
            "start": 1,
            "length": 16,
            "children": [
              {
                "type": "child-segment",
                "text": "[?count(1) == 1]",
                "start": 1,
                "length": 16,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?count(1) == 1]",
                    "start": 1,
                    "length": 16,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?count(1) == 1",
                        "start": 2,
                        "length": 14,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?count(1) == 1",
                            "start": 2,
                            "length": 14,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "count(1) == 1",
                                "start": 3,
                                "length": 13,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "count(1) == 1",
                                    "start": 3,
                                    "length": 13,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "count(1) == 1",
                                        "start": 3,
                                        "length": 13,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "count(1) == 1",
                                            "start": 3,
                                            "length": 13,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "count(1) == 1",
                                                "start": 3,
                                                "length": 13,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "count(1)",
                                                    "start": 3,
                                                    "length": 8,
                                                    "children": [
                                                      {
                                                        "type": "function-expr",
                                                        "text": "count(1)",
                                                        "start": 3,
                                                        "length": 8,
                                                        "children": [
                                                          {
                                                            "type": "function-name",
                                                            "text": "count",
                                                            "start": 3,
                                                            "length": 5,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "(",
                                                            "start": 8,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 9,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "function-argument",
                                                            "text": "1",
                                                            "start": 9,
                                                            "length": 1,
                                                            "children": [
                                                              {
                                                                "type": "literal",
                                                                "text": "1",
                                                                "start": 9,
                                                                "length": 1,
                                                                "children": [
                                                                  {
                                                                    "type": "number",
                                                                    "text": "1",
                                                                    "start": 9,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 10,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": ")",
                                                            "start": 10,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 11,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": "==",
                                                    "start": 12,
                                                    "length": 2,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 14,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": "1",
                                                    "start": 15,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "literal",
                                                        "text": "1",
                                                        "start": 15,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "number",
                                                            "text": "1",
                                                            "start": 15,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 16,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 16,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[?count(foo(@.*)) == 1] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[?count(foo(@.*)) == 1]",
    "start": 0,
    "length": 24,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[?count(foo(@.*)) == 1]",
        "start": 1,
        "length": 23,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?count(foo(@.*)) == 1]",
            "start": 1,
            "length": 23,
            "children": [
              {
                "type": "child-segment",
                "text": "[?count(foo(@.*)) == 1]",
                "start": 1,
                "length": 23,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?count(foo(@.*)) == 1]",
                    "start": 1,
                    "length": 23,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?count(foo(@.*)) == 1",
                        "start": 2,
                        "length": 21,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?count(foo(@.*)) == 1",
                            "start": 2,
                            "length": 21,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "count(foo(@.*)) == 1",
                                "start": 3,
                                "length": 20,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "count(foo(@.*)) == 1",
                                    "start": 3,
                                    "length": 20,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "count(foo(@.*)) == 1",
                                        "start": 3,
                                        "length": 20,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "count(foo(@.*)) == 1",
                                            "start": 3,
                                            "length": 20,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "count(foo(@.*)) == 1",
                                                "start": 3,
                                                "length": 20,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "count(foo(@.*))",
                                                    "start": 3,
                                                    "length": 15,
                                                    "children": [
                                                      {
                                                        "type": "function-expr",
                                                        "text": "count(foo(@.*))",
                                                        "start": 3,
                                                        "length": 15,
                                                        "children": [
                                                          {
                                                            "type": "function-name",
                                                            "text": "count",
                                                            "start": 3,
                                                            "length": 5,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "(",
                                                            "start": 8,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 9,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "function-argument",
                                                            "text": "foo(@.*)",
                                                            "start": 9,
                                                            "length": 8,
                                                            "children": [
                                                              {
                                                                "type": "logical-expr",
                                                                "text": "foo(@.*)",
                                                                "start": 9,
                                                                "length": 8,
                                                                "children": [
                                                                  {
                                                                    "type": "logical-or-expr",
                                                                    "text": "foo(@.*)",
                                                                    "start": 9,
                                                                    "length": 8,
                                                                    "children": [
                                                                      {
                                                                        "type": "logical-and-expr",
                                                                        "text": "foo(@.*)",
                                                                        "start": 9,
                                                                        "length": 8,
                                                                        "children": [
                                                                          {
                                                                            "type": "basic-expr",
                                                                            "text": "foo(@.*)",
                                                                            "start": 9,
                                                                            "length": 8,
                                                                            "children": [
                                                                              {
                                                                                "type": "test-expr",
                                                                                "text": "foo(@.*)",
                                                                                "start": 9,
                                                                                "length": 8,
                                                                                "children": [
                                                                                  {
                                                                                    "type": "function-expr",
                                                                                    "text": "foo(@.*)",
                                                                                    "start": 9,
                                                                                    "length": 8,
                                                                                    "children": [
                                                                                      {
                                                                                        "type": "function-name",
                                                                                        "text": "foo",
                                                                                        "start": 9,
                                                                                        "length": 3,
                                                                                        "children": [],
                                                                                      },
                                                                                      {
                                                                                        "type": "text",
                                                                                        "text": "(",
                                                                                        "start": 12,
                                                                                        "length": 1,
                                                                                        "children": [],
                                                                                      },
                                                                                      {
                                                                                        "type": "text",
                                                                                        "text": "",
                                                                                        "start": 13,
                                                                                        "length": 0,
                                                                                        "children": [],
                                                                                      },
                                                                                      {
                                                                                        "type": "function-argument",
                                                                                        "text": "@.*",
                                                                                        "start": 13,
                                                                                        "length": 3,
                                                                                        "children": [
                                                                                          {
                                                                                            "type": "logical-expr",
                                                                                            "text": "@.*",
                                                                                            "start": 13,
                                                                                            "length": 3,
                                                                                            "children": [
                                                                                              {
                                                                                                "type": "logical-or-expr",
                                                                                                "text": "@.*",
                                                                                                "start": 13,
                                                                                                "length": 3,
                                                                                                "children": [
                                                                                                  {
                                                                                                    "type": "logical-and-expr",
                                                                                                    "text": "@.*",
                                                                                                    "start": 13,
                                                                                                    "length": 3,
                                                                                                    "children": [
                                                                                                      {
                                                                                                        "type": "basic-expr",
                                                                                                        "text": "@.*",
                                                                                                        "start": 13,
                                                                                                        "length": 3,
                                                                                                        "children": [
                                                                                                          {
                                                                                                            "type": "test-expr",
                                                                                                            "text": "@.*",
                                                                                                            "start": 13,
                                                                                                            "length": 3,
                                                                                                            "children": [
                                                                                                              {
                                                                                                                "type": "filter-query",
                                                                                                                "text": "@.*",
                                                                                                                "start": 13,
                                                                                                                "length": 3,
                                                                                                                "children": [
                                                                                                                  {
                                                                                                                    "type": "rel-query",
                                                                                                                    "text": "@.*",
                                                                                                                    "start": 13,
                                                                                                                    "length": 3,
                                                                                                                    "children": [
                                                                                                                      {
                                                                                                                        "type": "current-node-identifier",
                                                                                                                        "text": "@",
                                                                                                                        "start": 13,
                                                                                                                        "length": 1,
                                                                                                                        "children": [],
                                                                                                                      },
                                                                                                                      {
                                                                                                                        "type": "segments",
                                                                                                                        "text": ".*",
                                                                                                                        "start": 14,
                                                                                                                        "length": 2,
                                                                                                                        "children": [
                                                                                                                          {
                                                                                                                            "type": "text",
                                                                                                                            "text": "",
                                                                                                                            "start": 14,
                                                                                                                            "length": 0,
                                                                                                                            "children": [],
                                                                                                                          },
                                                                                                                          {
                                                                                                                            "type": "segment",
                                                                                                                            "text": ".*",
                                                                                                                            "start": 14,
                                                                                                                            "length": 2,
                                                                                                                            "children": [
                                                                                                                              {
                                                                                                                                "type": "child-segment",
                                                                                                                                "text": ".*",
                                                                                                                                "start": 14,
                                                                                                                                "length": 2,
                                                                                                                                "children": [
                                                                                                                                  {
                                                                                                                                    "type": "text",
                                                                                                                                    "text": ".",
                                                                                                                                    "start": 14,
                                                                                                                                    "length": 1,
                                                                                                                                    "children": [],
                                                                                                                                  },
                                                                                                                                  {
                                                                                                                                    "type": "wildcard-selector",
                                                                                                                                    "text": "*",
                                                                                                                                    "start": 15,
                                                                                                                                    "length": 1,
                                                                                                                                    "children": [],
                                                                                                                                  },
                                                                                                                                ],
                                                                                                                              },
                                                                                                                            ],
                                                                                                                          },
                                                                                                                        ],
                                                                                                                      },
                                                                                                                    ],
                                                                                                                  },
                                                                                                                ],
                                                                                                              },
                                                                                                            ],
                                                                                                          },
                                                                                                        ],
                                                                                                      },
                                                                                                    ],
                                                                                                  },
                                                                                                ],
                                                                                              },
                                                                                            ],
                                                                                          },
                                                                                        ],
                                                                                      },
                                                                                      {
                                                                                        "type": "text",
                                                                                        "text": "",
                                                                                        "start": 16,
                                                                                        "length": 0,
                                                                                        "children": [],
                                                                                      },
                                                                                      {
                                                                                        "type": "text",
                                                                                        "text": ")",
                                                                                        "start": 16,
                                                                                        "length": 1,
                                                                                        "children": [],
                                                                                      },
                                                                                    ],
                                                                                  },
                                                                                ],
                                                                              },
                                                                            ],
                                                                          },
                                                                        ],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 17,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": ")",
                                                            "start": 17,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 18,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": "==",
                                                    "start": 19,
                                                    "length": 2,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 21,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": "1",
                                                    "start": 22,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "literal",
                                                        "text": "1",
                                                        "start": 22,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "number",
                                                            "text": "1",
                                                            "start": 22,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 23,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 23,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[?foo(1==2)] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[?foo(1==2)]",
    "start": 0,
    "length": 13,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[?foo(1==2)]",
        "start": 1,
        "length": 12,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?foo(1==2)]",
            "start": 1,
            "length": 12,
            "children": [
              {
                "type": "child-segment",
                "text": "[?foo(1==2)]",
                "start": 1,
                "length": 12,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?foo(1==2)]",
                    "start": 1,
                    "length": 12,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?foo(1==2)",
                        "start": 2,
                        "length": 10,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?foo(1==2)",
                            "start": 2,
                            "length": 10,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "foo(1==2)",
                                "start": 3,
                                "length": 9,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "foo(1==2)",
                                    "start": 3,
                                    "length": 9,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "foo(1==2)",
                                        "start": 3,
                                        "length": 9,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "foo(1==2)",
                                            "start": 3,
                                            "length": 9,
                                            "children": [
                                              {
                                                "type": "test-expr",
                                                "text": "foo(1==2)",
                                                "start": 3,
                                                "length": 9,
                                                "children": [
                                                  {
                                                    "type": "function-expr",
                                                    "text": "foo(1==2)",
                                                    "start": 3,
                                                    "length": 9,
                                                    "children": [
                                                      {
                                                        "type": "function-name",
                                                        "text": "foo",
                                                        "start": 3,
                                                        "length": 3,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "(",
                                                        "start": 6,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 7,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "function-argument",
                                                        "text": "1==2",
                                                        "start": 7,
                                                        "length": 4,
                                                        "children": [
                                                          {
                                                            "type": "logical-expr",
                                                            "text": "1==2",
                                                            "start": 7,
                                                            "length": 4,
                                                            "children": [
                                                              {
                                                                "type": "logical-or-expr",
                                                                "text": "1==2",
                                                                "start": 7,
                                                                "length": 4,
                                                                "children": [
                                                                  {
                                                                    "type": "logical-and-expr",
                                                                    "text": "1==2",
                                                                    "start": 7,
                                                                    "length": 4,
                                                                    "children": [
                                                                      {
                                                                        "type": "basic-expr",
                                                                        "text": "1==2",
                                                                        "start": 7,
                                                                        "length": 4,
                                                                        "children": [
                                                                          {
                                                                            "type": "comparison-expr",
                                                                            "text": "1==2",
                                                                            "start": 7,
                                                                            "length": 4,
                                                                            "children": [
                                                                              {
                                                                                "type": "comparable",
                                                                                "text": "1",
                                                                                "start": 7,
                                                                                "length": 1,
                                                                                "children": [
                                                                                  {
                                                                                    "type": "literal",
                                                                                    "text": "1",
                                                                                    "start": 7,
                                                                                    "length": 1,
                                                                                    "children": [
                                                                                      {
                                                                                        "type": "number",
                                                                                        "text": "1",
                                                                                        "start": 7,
                                                                                        "length": 1,
                                                                                        "children": [],
                                                                                      },
                                                                                    ],
                                                                                  },
                                                                                ],
                                                                              },
                                                                              {
                                                                                "type": "text",
                                                                                "text": "",
                                                                                "start": 8,
                                                                                "length": 0,
                                                                                "children": [],
                                                                              },
                                                                              {
                                                                                "type": "comparison-op",
                                                                                "text": "==",
                                                                                "start": 8,
                                                                                "length": 2,
                                                                                "children": [],
                                                                              },
                                                                              {
                                                                                "type": "text",
                                                                                "text": "",
                                                                                "start": 10,
                                                                                "length": 0,
                                                                                "children": [],
                                                                              },
                                                                              {
                                                                                "type": "comparable",
                                                                                "text": "2",
                                                                                "start": 10,
                                                                                "length": 1,
                                                                                "children": [
                                                                                  {
                                                                                    "type": "literal",
                                                                                    "text": "2",
                                                                                    "start": 10,
                                                                                    "length": 1,
                                                                                    "children": [
                                                                                      {
                                                                                        "type": "number",
                                                                                        "text": "2",
                                                                                        "start": 10,
                                                                                        "length": 1,
                                                                                        "children": [],
                                                                                      },
                                                                                    ],
                                                                                  },
                                                                                ],
                                                                              },
                                                                            ],
                                                                          },
                                                                        ],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 11,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": ")",
                                                        "start": 11,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 12,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 12,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[?length(@) < 3] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[?length(@) < 3]",
    "start": 0,
    "length": 17,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[?length(@) < 3]",
        "start": 1,
        "length": 16,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?length(@) < 3]",
            "start": 1,
            "length": 16,
            "children": [
              {
                "type": "child-segment",
                "text": "[?length(@) < 3]",
                "start": 1,
                "length": 16,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?length(@) < 3]",
                    "start": 1,
                    "length": 16,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?length(@) < 3",
                        "start": 2,
                        "length": 14,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?length(@) < 3",
                            "start": 2,
                            "length": 14,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "length(@) < 3",
                                "start": 3,
                                "length": 13,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "length(@) < 3",
                                    "start": 3,
                                    "length": 13,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "length(@) < 3",
                                        "start": 3,
                                        "length": 13,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "length(@) < 3",
                                            "start": 3,
                                            "length": 13,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "length(@) < 3",
                                                "start": 3,
                                                "length": 13,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "length(@)",
                                                    "start": 3,
                                                    "length": 9,
                                                    "children": [
                                                      {
                                                        "type": "function-expr",
                                                        "text": "length(@)",
                                                        "start": 3,
                                                        "length": 9,
                                                        "children": [
                                                          {
                                                            "type": "function-name",
                                                            "text": "length",
                                                            "start": 3,
                                                            "length": 6,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "(",
                                                            "start": 9,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 10,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "function-argument",
                                                            "text": "@",
                                                            "start": 10,
                                                            "length": 1,
                                                            "children": [
                                                              {
                                                                "type": "logical-expr",
                                                                "text": "@",
                                                                "start": 10,
                                                                "length": 1,
                                                                "children": [
                                                                  {
                                                                    "type": "logical-or-expr",
                                                                    "text": "@",
                                                                    "start": 10,
                                                                    "length": 1,
                                                                    "children": [
                                                                      {
                                                                        "type": "logical-and-expr",
                                                                        "text": "@",
                                                                        "start": 10,
                                                                        "length": 1,
                                                                        "children": [
                                                                          {
                                                                            "type": "basic-expr",
                                                                            "text": "@",
                                                                            "start": 10,
                                                                            "length": 1,
                                                                            "children": [
                                                                              {
                                                                                "type": "test-expr",
                                                                                "text": "@",
                                                                                "start": 10,
                                                                                "length": 1,
                                                                                "children": [
                                                                                  {
                                                                                    "type": "filter-query",
                                                                                    "text": "@",
                                                                                    "start": 10,
                                                                                    "length": 1,
                                                                                    "children": [
                                                                                      {
                                                                                        "type": "rel-query",
                                                                                        "text": "@",
                                                                                        "start": 10,
                                                                                        "length": 1,
                                                                                        "children": [
                                                                                          {
                                                                                            "type": "current-node-identifier",
                                                                                            "text": "@",
                                                                                            "start": 10,
                                                                                            "length": 1,
                                                                                            "children": [],
                                                                                          },
                                                                                          {
                                                                                            "type": "segments",
                                                                                            "text": "",
                                                                                            "start": 11,
                                                                                            "length": 0,
                                                                                            "children": [],
                                                                                          },
                                                                                        ],
                                                                                      },
                                                                                    ],
                                                                                  },
                                                                                ],
                                                                              },
                                                                            ],
                                                                          },
                                                                        ],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 11,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": ")",
                                                            "start": 11,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 12,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": "<",
                                                    "start": 13,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 14,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": "3",
                                                    "start": 15,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "literal",
                                                        "text": "3",
                                                        "start": 15,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "number",
                                                            "text": "3",
                                                            "start": 15,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 16,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 16,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[?length(@.*) < 3] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[?length(@.*) < 3]",
    "start": 0,
    "length": 19,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[?length(@.*) < 3]",
        "start": 1,
        "length": 18,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?length(@.*) < 3]",
            "start": 1,
            "length": 18,
            "children": [
              {
                "type": "child-segment",
                "text": "[?length(@.*) < 3]",
                "start": 1,
                "length": 18,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?length(@.*) < 3]",
                    "start": 1,
                    "length": 18,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?length(@.*) < 3",
                        "start": 2,
                        "length": 16,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?length(@.*) < 3",
                            "start": 2,
                            "length": 16,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "length(@.*) < 3",
                                "start": 3,
                                "length": 15,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "length(@.*) < 3",
                                    "start": 3,
                                    "length": 15,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "length(@.*) < 3",
                                        "start": 3,
                                        "length": 15,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "length(@.*) < 3",
                                            "start": 3,
                                            "length": 15,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "length(@.*) < 3",
                                                "start": 3,
                                                "length": 15,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "length(@.*)",
                                                    "start": 3,
                                                    "length": 11,
                                                    "children": [
                                                      {
                                                        "type": "function-expr",
                                                        "text": "length(@.*)",
                                                        "start": 3,
                                                        "length": 11,
                                                        "children": [
                                                          {
                                                            "type": "function-name",
                                                            "text": "length",
                                                            "start": 3,
                                                            "length": 6,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "(",
                                                            "start": 9,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 10,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "function-argument",
                                                            "text": "@.*",
                                                            "start": 10,
                                                            "length": 3,
                                                            "children": [
                                                              {
                                                                "type": "logical-expr",
                                                                "text": "@.*",
                                                                "start": 10,
                                                                "length": 3,
                                                                "children": [
                                                                  {
                                                                    "type": "logical-or-expr",
                                                                    "text": "@.*",
                                                                    "start": 10,
                                                                    "length": 3,
                                                                    "children": [
                                                                      {
                                                                        "type": "logical-and-expr",
                                                                        "text": "@.*",
                                                                        "start": 10,
                                                                        "length": 3,
                                                                        "children": [
                                                                          {
                                                                            "type": "basic-expr",
                                                                            "text": "@.*",
                                                                            "start": 10,
                                                                            "length": 3,
                                                                            "children": [
                                                                              {
                                                                                "type": "test-expr",
                                                                                "text": "@.*",
                                                                                "start": 10,
                                                                                "length": 3,
                                                                                "children": [
                                                                                  {
                                                                                    "type": "filter-query",
                                                                                    "text": "@.*",
                                                                                    "start": 10,
                                                                                    "length": 3,
                                                                                    "children": [
                                                                                      {
                                                                                        "type": "rel-query",
                                                                                        "text": "@.*",
                                                                                        "start": 10,
                                                                                        "length": 3,
                                                                                        "children": [
                                                                                          {
                                                                                            "type": "current-node-identifier",
                                                                                            "text": "@",
                                                                                            "start": 10,
                                                                                            "length": 1,
                                                                                            "children": [],
                                                                                          },
                                                                                          {
                                                                                            "type": "segments",
                                                                                            "text": ".*",
                                                                                            "start": 11,
                                                                                            "length": 2,
                                                                                            "children": [
                                                                                              {
                                                                                                "type": "text",
                                                                                                "text": "",
                                                                                                "start": 11,
                                                                                                "length": 0,
                                                                                                "children": [],
                                                                                              },
                                                                                              {
                                                                                                "type": "segment",
                                                                                                "text": ".*",
                                                                                                "start": 11,
                                                                                                "length": 2,
                                                                                                "children": [
                                                                                                  {
                                                                                                    "type": "child-segment",
                                                                                                    "text": ".*",
                                                                                                    "start": 11,
                                                                                                    "length": 2,
                                                                                                    "children": [
                                                                                                      {
                                                                                                        "type": "text",
                                                                                                        "text": ".",
                                                                                                        "start": 11,
                                                                                                        "length": 1,
                                                                                                        "children": [],
                                                                                                      },
                                                                                                      {
                                                                                                        "type": "wildcard-selector",
                                                                                                        "text": "*",
                                                                                                        "start": 12,
                                                                                                        "length": 1,
                                                                                                        "children": [],
                                                                                                      },
                                                                                                    ],
                                                                                                  },
                                                                                                ],
                                                                                              },
                                                                                            ],
                                                                                          },
                                                                                        ],
                                                                                      },
                                                                                    ],
                                                                                  },
                                                                                ],
                                                                              },
                                                                            ],
                                                                          },
                                                                        ],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 13,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": ")",
                                                            "start": 13,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 14,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": "<",
                                                    "start": 15,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 16,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": "3",
                                                    "start": 17,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "literal",
                                                        "text": "3",
                                                        "start": 17,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "number",
                                                            "text": "3",
                                                            "start": 17,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 18,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 18,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[?length(@.authors) >= 5] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[?length(@.authors) >= 5]",
    "start": 0,
    "length": 26,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[?length(@.authors) >= 5]",
        "start": 1,
        "length": 25,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?length(@.authors) >= 5]",
            "start": 1,
            "length": 25,
            "children": [
              {
                "type": "child-segment",
                "text": "[?length(@.authors) >= 5]",
                "start": 1,
                "length": 25,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?length(@.authors) >= 5]",
                    "start": 1,
                    "length": 25,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?length(@.authors) >= 5",
                        "start": 2,
                        "length": 23,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?length(@.authors) >= 5",
                            "start": 2,
                            "length": 23,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "length(@.authors) >= 5",
                                "start": 3,
                                "length": 22,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "length(@.authors) >= 5",
                                    "start": 3,
                                    "length": 22,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "length(@.authors) >= 5",
                                        "start": 3,
                                        "length": 22,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "length(@.authors) >= 5",
                                            "start": 3,
                                            "length": 22,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "length(@.authors) >= 5",
                                                "start": 3,
                                                "length": 22,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "length(@.authors)",
                                                    "start": 3,
                                                    "length": 17,
                                                    "children": [
                                                      {
                                                        "type": "function-expr",
                                                        "text": "length(@.authors)",
                                                        "start": 3,
                                                        "length": 17,
                                                        "children": [
                                                          {
                                                            "type": "function-name",
                                                            "text": "length",
                                                            "start": 3,
                                                            "length": 6,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "(",
                                                            "start": 9,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 10,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "function-argument",
                                                            "text": "@.authors",
                                                            "start": 10,
                                                            "length": 9,
                                                            "children": [
                                                              {
                                                                "type": "logical-expr",
                                                                "text": "@.authors",
                                                                "start": 10,
                                                                "length": 9,
                                                                "children": [
                                                                  {
                                                                    "type": "logical-or-expr",
                                                                    "text": "@.authors",
                                                                    "start": 10,
                                                                    "length": 9,
                                                                    "children": [
                                                                      {
                                                                        "type": "logical-and-expr",
                                                                        "text": "@.authors",
                                                                        "start": 10,
                                                                        "length": 9,
                                                                        "children": [
                                                                          {
                                                                            "type": "basic-expr",
                                                                            "text": "@.authors",
                                                                            "start": 10,
                                                                            "length": 9,
                                                                            "children": [
                                                                              {
                                                                                "type": "test-expr",
                                                                                "text": "@.authors",
                                                                                "start": 10,
                                                                                "length": 9,
                                                                                "children": [
                                                                                  {
                                                                                    "type": "filter-query",
                                                                                    "text": "@.authors",
                                                                                    "start": 10,
                                                                                    "length": 9,
                                                                                    "children": [
                                                                                      {
                                                                                        "type": "rel-query",
                                                                                        "text": "@.authors",
                                                                                        "start": 10,
                                                                                        "length": 9,
                                                                                        "children": [
                                                                                          {
                                                                                            "type": "current-node-identifier",
                                                                                            "text": "@",
                                                                                            "start": 10,
                                                                                            "length": 1,
                                                                                            "children": [],
                                                                                          },
                                                                                          {
                                                                                            "type": "segments",
                                                                                            "text": ".authors",
                                                                                            "start": 11,
                                                                                            "length": 8,
                                                                                            "children": [
                                                                                              {
                                                                                                "type": "text",
                                                                                                "text": "",
                                                                                                "start": 11,
                                                                                                "length": 0,
                                                                                                "children": [],
                                                                                              },
                                                                                              {
                                                                                                "type": "segment",
                                                                                                "text": ".authors",
                                                                                                "start": 11,
                                                                                                "length": 8,
                                                                                                "children": [
                                                                                                  {
                                                                                                    "type": "child-segment",
                                                                                                    "text": ".authors",
                                                                                                    "start": 11,
                                                                                                    "length": 8,
                                                                                                    "children": [
                                                                                                      {
                                                                                                        "type": "text",
                                                                                                        "text": ".",
                                                                                                        "start": 11,
                                                                                                        "length": 1,
                                                                                                        "children": [],
                                                                                                      },
                                                                                                      {
                                                                                                        "type": "member-name-shorthand",
                                                                                                        "text": "authors",
                                                                                                        "start": 12,
                                                                                                        "length": 7,
                                                                                                        "children": [],
                                                                                                      },
                                                                                                    ],
                                                                                                  },
                                                                                                ],
                                                                                              },
                                                                                            ],
                                                                                          },
                                                                                        ],
                                                                                      },
                                                                                    ],
                                                                                  },
                                                                                ],
                                                                              },
                                                                            ],
                                                                          },
                                                                        ],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 19,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": ")",
                                                            "start": 19,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 20,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": ">=",
                                                    "start": 21,
                                                    "length": 2,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 23,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": "5",
                                                    "start": 24,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "literal",
                                                        "text": "5",
                                                        "start": 24,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "number",
                                                            "text": "5",
                                                            "start": 24,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 25,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 25,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[?match(@.date, "1974-05-..")] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[?match(@.date, "1974-05-..")]",
    "start": 0,
    "length": 31,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[?match(@.date, "1974-05-..")]",
        "start": 1,
        "length": 30,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?match(@.date, "1974-05-..")]",
            "start": 1,
            "length": 30,
            "children": [
              {
                "type": "child-segment",
                "text": "[?match(@.date, "1974-05-..")]",
                "start": 1,
                "length": 30,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?match(@.date, "1974-05-..")]",
                    "start": 1,
                    "length": 30,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?match(@.date, "1974-05-..")",
                        "start": 2,
                        "length": 28,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?match(@.date, "1974-05-..")",
                            "start": 2,
                            "length": 28,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "match(@.date, "1974-05-..")",
                                "start": 3,
                                "length": 27,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "match(@.date, "1974-05-..")",
                                    "start": 3,
                                    "length": 27,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "match(@.date, "1974-05-..")",
                                        "start": 3,
                                        "length": 27,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "match(@.date, "1974-05-..")",
                                            "start": 3,
                                            "length": 27,
                                            "children": [
                                              {
                                                "type": "test-expr",
                                                "text": "match(@.date, "1974-05-..")",
                                                "start": 3,
                                                "length": 27,
                                                "children": [
                                                  {
                                                    "type": "function-expr",
                                                    "text": "match(@.date, "1974-05-..")",
                                                    "start": 3,
                                                    "length": 27,
                                                    "children": [
                                                      {
                                                        "type": "function-name",
                                                        "text": "match",
                                                        "start": 3,
                                                        "length": 5,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "(",
                                                        "start": 8,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 9,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "function-argument",
                                                        "text": "@.date",
                                                        "start": 9,
                                                        "length": 6,
                                                        "children": [
                                                          {
                                                            "type": "logical-expr",
                                                            "text": "@.date",
                                                            "start": 9,
                                                            "length": 6,
                                                            "children": [
                                                              {
                                                                "type": "logical-or-expr",
                                                                "text": "@.date",
                                                                "start": 9,
                                                                "length": 6,
                                                                "children": [
                                                                  {
                                                                    "type": "logical-and-expr",
                                                                    "text": "@.date",
                                                                    "start": 9,
                                                                    "length": 6,
                                                                    "children": [
                                                                      {
                                                                        "type": "basic-expr",
                                                                        "text": "@.date",
                                                                        "start": 9,
                                                                        "length": 6,
                                                                        "children": [
                                                                          {
                                                                            "type": "test-expr",
                                                                            "text": "@.date",
                                                                            "start": 9,
                                                                            "length": 6,
                                                                            "children": [
                                                                              {
                                                                                "type": "filter-query",
                                                                                "text": "@.date",
                                                                                "start": 9,
                                                                                "length": 6,
                                                                                "children": [
                                                                                  {
                                                                                    "type": "rel-query",
                                                                                    "text": "@.date",
                                                                                    "start": 9,
                                                                                    "length": 6,
                                                                                    "children": [
                                                                                      {
                                                                                        "type": "current-node-identifier",
                                                                                        "text": "@",
                                                                                        "start": 9,
                                                                                        "length": 1,
                                                                                        "children": [],
                                                                                      },
                                                                                      {
                                                                                        "type": "segments",
                                                                                        "text": ".date",
                                                                                        "start": 10,
                                                                                        "length": 5,
                                                                                        "children": [
                                                                                          {
                                                                                            "type": "text",
                                                                                            "text": "",
                                                                                            "start": 10,
                                                                                            "length": 0,
                                                                                            "children": [],
                                                                                          },
                                                                                          {
                                                                                            "type": "segment",
                                                                                            "text": ".date",
                                                                                            "start": 10,
                                                                                            "length": 5,
                                                                                            "children": [
                                                                                              {
                                                                                                "type": "child-segment",
                                                                                                "text": ".date",
                                                                                                "start": 10,
                                                                                                "length": 5,
                                                                                                "children": [
                                                                                                  {
                                                                                                    "type": "text",
                                                                                                    "text": ".",
                                                                                                    "start": 10,
                                                                                                    "length": 1,
                                                                                                    "children": [],
                                                                                                  },
                                                                                                  {
                                                                                                    "type": "member-name-shorthand",
                                                                                                    "text": "date",
                                                                                                    "start": 11,
                                                                                                    "length": 4,
                                                                                                    "children": [],
                                                                                                  },
                                                                                                ],
                                                                                              },
                                                                                            ],
                                                                                          },
                                                                                        ],
                                                                                      },
                                                                                    ],
                                                                                  },
                                                                                ],
                                                                              },
                                                                            ],
                                                                          },
                                                                        ],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 15,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": ",",
                                                        "start": 15,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": " ",
                                                        "start": 16,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "function-argument",
                                                        "text": ""1974-05-.."",
                                                        "start": 17,
                                                        "length": 12,
                                                        "children": [
                                                          {
                                                            "type": "literal",
                                                            "text": ""1974-05-.."",
                                                            "start": 17,
                                                            "length": 12,
                                                            "children": [
                                                              {
                                                                "type": "string-literal",
                                                                "text": ""1974-05-.."",
                                                                "start": 17,
                                                                "length": 12,
                                                                "children": [
                                                                  {
                                                                    "type": "text",
                                                                    "text": """,
                                                                    "start": 17,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "double-quoted",
                                                                    "text": "1",
                                                                    "start": 18,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "double-quoted",
                                                                    "text": "9",
                                                                    "start": 19,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "double-quoted",
                                                                    "text": "7",
                                                                    "start": 20,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "double-quoted",
                                                                    "text": "4",
                                                                    "start": 21,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "double-quoted",
                                                                    "text": "-",
                                                                    "start": 22,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "double-quoted",
                                                                    "text": "0",
                                                                    "start": 23,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "double-quoted",
                                                                    "text": "5",
                                                                    "start": 24,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "double-quoted",
                                                                    "text": "-",
                                                                    "start": 25,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "double-quoted",
                                                                    "text": ".",
                                                                    "start": 26,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "double-quoted",
                                                                    "text": ".",
                                                                    "start": 27,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "text",
                                                                    "text": """,
                                                                    "start": 28,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 29,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": ")",
                                                        "start": 29,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 30,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 30,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[?match(@.timezone, 'Europe/.*') == true] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[?match(@.timezone, 'Europe/.*') == true]",
    "start": 0,
    "length": 42,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[?match(@.timezone, 'Europe/.*') == true]",
        "start": 1,
        "length": 41,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?match(@.timezone, 'Europe/.*') == true]",
            "start": 1,
            "length": 41,
            "children": [
              {
                "type": "child-segment",
                "text": "[?match(@.timezone, 'Europe/.*') == true]",
                "start": 1,
                "length": 41,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?match(@.timezone, 'Europe/.*') == true]",
                    "start": 1,
                    "length": 41,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?match(@.timezone, 'Europe/.*') == true",
                        "start": 2,
                        "length": 39,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?match(@.timezone, 'Europe/.*') == true",
                            "start": 2,
                            "length": 39,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "match(@.timezone, 'Europe/.*') == true",
                                "start": 3,
                                "length": 38,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "match(@.timezone, 'Europe/.*') == true",
                                    "start": 3,
                                    "length": 38,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "match(@.timezone, 'Europe/.*') == true",
                                        "start": 3,
                                        "length": 38,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "match(@.timezone, 'Europe/.*') == true",
                                            "start": 3,
                                            "length": 38,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "match(@.timezone, 'Europe/.*') == true",
                                                "start": 3,
                                                "length": 38,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "match(@.timezone, 'Europe/.*')",
                                                    "start": 3,
                                                    "length": 30,
                                                    "children": [
                                                      {
                                                        "type": "function-expr",
                                                        "text": "match(@.timezone, 'Europe/.*')",
                                                        "start": 3,
                                                        "length": 30,
                                                        "children": [
                                                          {
                                                            "type": "function-name",
                                                            "text": "match",
                                                            "start": 3,
                                                            "length": 5,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "(",
                                                            "start": 8,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 9,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "function-argument",
                                                            "text": "@.timezone",
                                                            "start": 9,
                                                            "length": 10,
                                                            "children": [
                                                              {
                                                                "type": "logical-expr",
                                                                "text": "@.timezone",
                                                                "start": 9,
                                                                "length": 10,
                                                                "children": [
                                                                  {
                                                                    "type": "logical-or-expr",
                                                                    "text": "@.timezone",
                                                                    "start": 9,
                                                                    "length": 10,
                                                                    "children": [
                                                                      {
                                                                        "type": "logical-and-expr",
                                                                        "text": "@.timezone",
                                                                        "start": 9,
                                                                        "length": 10,
                                                                        "children": [
                                                                          {
                                                                            "type": "basic-expr",
                                                                            "text": "@.timezone",
                                                                            "start": 9,
                                                                            "length": 10,
                                                                            "children": [
                                                                              {
                                                                                "type": "test-expr",
                                                                                "text": "@.timezone",
                                                                                "start": 9,
                                                                                "length": 10,
                                                                                "children": [
                                                                                  {
                                                                                    "type": "filter-query",
                                                                                    "text": "@.timezone",
                                                                                    "start": 9,
                                                                                    "length": 10,
                                                                                    "children": [
                                                                                      {
                                                                                        "type": "rel-query",
                                                                                        "text": "@.timezone",
                                                                                        "start": 9,
                                                                                        "length": 10,
                                                                                        "children": [
                                                                                          {
                                                                                            "type": "current-node-identifier",
                                                                                            "text": "@",
                                                                                            "start": 9,
                                                                                            "length": 1,
                                                                                            "children": [],
                                                                                          },
                                                                                          {
                                                                                            "type": "segments",
                                                                                            "text": ".timezone",
                                                                                            "start": 10,
                                                                                            "length": 9,
                                                                                            "children": [
                                                                                              {
                                                                                                "type": "text",
                                                                                                "text": "",
                                                                                                "start": 10,
                                                                                                "length": 0,
                                                                                                "children": [],
                                                                                              },
                                                                                              {
                                                                                                "type": "segment",
                                                                                                "text": ".timezone",
                                                                                                "start": 10,
                                                                                                "length": 9,
                                                                                                "children": [
                                                                                                  {
                                                                                                    "type": "child-segment",
                                                                                                    "text": ".timezone",
                                                                                                    "start": 10,
                                                                                                    "length": 9,
                                                                                                    "children": [
                                                                                                      {
                                                                                                        "type": "text",
                                                                                                        "text": ".",
                                                                                                        "start": 10,
                                                                                                        "length": 1,
                                                                                                        "children": [],
                                                                                                      },
                                                                                                      {
                                                                                                        "type": "member-name-shorthand",
                                                                                                        "text": "timezone",
                                                                                                        "start": 11,
                                                                                                        "length": 8,
                                                                                                        "children": [],
                                                                                                      },
                                                                                                    ],
                                                                                                  },
                                                                                                ],
                                                                                              },
                                                                                            ],
                                                                                          },
                                                                                        ],
                                                                                      },
                                                                                    ],
                                                                                  },
                                                                                ],
                                                                              },
                                                                            ],
                                                                          },
                                                                        ],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 19,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": ",",
                                                            "start": 19,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": " ",
                                                            "start": 20,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "function-argument",
                                                            "text": "'Europe/.*'",
                                                            "start": 21,
                                                            "length": 11,
                                                            "children": [
                                                              {
                                                                "type": "literal",
                                                                "text": "'Europe/.*'",
                                                                "start": 21,
                                                                "length": 11,
                                                                "children": [
                                                                  {
                                                                    "type": "string-literal",
                                                                    "text": "'Europe/.*'",
                                                                    "start": 21,
                                                                    "length": 11,
                                                                    "children": [
                                                                      {
                                                                        "type": "text",
                                                                        "text": "'",
                                                                        "start": 21,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                      {
                                                                        "type": "single-quoted",
                                                                        "text": "E",
                                                                        "start": 22,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                      {
                                                                        "type": "single-quoted",
                                                                        "text": "u",
                                                                        "start": 23,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                      {
                                                                        "type": "single-quoted",
                                                                        "text": "r",
                                                                        "start": 24,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                      {
                                                                        "type": "single-quoted",
                                                                        "text": "o",
                                                                        "start": 25,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                      {
                                                                        "type": "single-quoted",
                                                                        "text": "p",
                                                                        "start": 26,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                      {
                                                                        "type": "single-quoted",
                                                                        "text": "e",
                                                                        "start": 27,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                      {
                                                                        "type": "single-quoted",
                                                                        "text": "/",
                                                                        "start": 28,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                      {
                                                                        "type": "single-quoted",
                                                                        "text": ".",
                                                                        "start": 29,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                      {
                                                                        "type": "single-quoted",
                                                                        "text": "*",
                                                                        "start": 30,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                      {
                                                                        "type": "text",
                                                                        "text": "'",
                                                                        "start": 31,
                                                                        "length": 1,
                                                                        "children": [],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 32,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": ")",
                                                            "start": 32,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 33,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": "==",
                                                    "start": 34,
                                                    "length": 2,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 36,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": "true",
                                                    "start": 37,
                                                    "length": 4,
                                                    "children": [
                                                      {
                                                        "type": "literal",
                                                        "text": "true",
                                                        "start": 37,
                                                        "length": 4,
                                                        "children": [
                                                          {
                                                            "type": "true",
                                                            "text": "true",
                                                            "start": 37,
                                                            "length": 4,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 41,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 41,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[?match(@.timezone, 'Europe/.*')] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[?match(@.timezone, 'Europe/.*')]",
    "start": 0,
    "length": 34,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[?match(@.timezone, 'Europe/.*')]",
        "start": 1,
        "length": 33,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?match(@.timezone, 'Europe/.*')]",
            "start": 1,
            "length": 33,
            "children": [
              {
                "type": "child-segment",
                "text": "[?match(@.timezone, 'Europe/.*')]",
                "start": 1,
                "length": 33,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?match(@.timezone, 'Europe/.*')]",
                    "start": 1,
                    "length": 33,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?match(@.timezone, 'Europe/.*')",
                        "start": 2,
                        "length": 31,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?match(@.timezone, 'Europe/.*')",
                            "start": 2,
                            "length": 31,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "match(@.timezone, 'Europe/.*')",
                                "start": 3,
                                "length": 30,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "match(@.timezone, 'Europe/.*')",
                                    "start": 3,
                                    "length": 30,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "match(@.timezone, 'Europe/.*')",
                                        "start": 3,
                                        "length": 30,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "match(@.timezone, 'Europe/.*')",
                                            "start": 3,
                                            "length": 30,
                                            "children": [
                                              {
                                                "type": "test-expr",
                                                "text": "match(@.timezone, 'Europe/.*')",
                                                "start": 3,
                                                "length": 30,
                                                "children": [
                                                  {
                                                    "type": "function-expr",
                                                    "text": "match(@.timezone, 'Europe/.*')",
                                                    "start": 3,
                                                    "length": 30,
                                                    "children": [
                                                      {
                                                        "type": "function-name",
                                                        "text": "match",
                                                        "start": 3,
                                                        "length": 5,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "(",
                                                        "start": 8,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 9,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "function-argument",
                                                        "text": "@.timezone",
                                                        "start": 9,
                                                        "length": 10,
                                                        "children": [
                                                          {
                                                            "type": "logical-expr",
                                                            "text": "@.timezone",
                                                            "start": 9,
                                                            "length": 10,
                                                            "children": [
                                                              {
                                                                "type": "logical-or-expr",
                                                                "text": "@.timezone",
                                                                "start": 9,
                                                                "length": 10,
                                                                "children": [
                                                                  {
                                                                    "type": "logical-and-expr",
                                                                    "text": "@.timezone",
                                                                    "start": 9,
                                                                    "length": 10,
                                                                    "children": [
                                                                      {
                                                                        "type": "basic-expr",
                                                                        "text": "@.timezone",
                                                                        "start": 9,
                                                                        "length": 10,
                                                                        "children": [
                                                                          {
                                                                            "type": "test-expr",
                                                                            "text": "@.timezone",
                                                                            "start": 9,
                                                                            "length": 10,
                                                                            "children": [
                                                                              {
                                                                                "type": "filter-query",
                                                                                "text": "@.timezone",
                                                                                "start": 9,
                                                                                "length": 10,
                                                                                "children": [
                                                                                  {
                                                                                    "type": "rel-query",
                                                                                    "text": "@.timezone",
                                                                                    "start": 9,
                                                                                    "length": 10,
                                                                                    "children": [
                                                                                      {
                                                                                        "type": "current-node-identifier",
                                                                                        "text": "@",
                                                                                        "start": 9,
                                                                                        "length": 1,
                                                                                        "children": [],
                                                                                      },
                                                                                      {
                                                                                        "type": "segments",
                                                                                        "text": ".timezone",
                                                                                        "start": 10,
                                                                                        "length": 9,
                                                                                        "children": [
                                                                                          {
                                                                                            "type": "text",
                                                                                            "text": "",
                                                                                            "start": 10,
                                                                                            "length": 0,
                                                                                            "children": [],
                                                                                          },
                                                                                          {
                                                                                            "type": "segment",
                                                                                            "text": ".timezone",
                                                                                            "start": 10,
                                                                                            "length": 9,
                                                                                            "children": [
                                                                                              {
                                                                                                "type": "child-segment",
                                                                                                "text": ".timezone",
                                                                                                "start": 10,
                                                                                                "length": 9,
                                                                                                "children": [
                                                                                                  {
                                                                                                    "type": "text",
                                                                                                    "text": ".",
                                                                                                    "start": 10,
                                                                                                    "length": 1,
                                                                                                    "children": [],
                                                                                                  },
                                                                                                  {
                                                                                                    "type": "member-name-shorthand",
                                                                                                    "text": "timezone",
                                                                                                    "start": 11,
                                                                                                    "length": 8,
                                                                                                    "children": [],
                                                                                                  },
                                                                                                ],
                                                                                              },
                                                                                            ],
                                                                                          },
                                                                                        ],
                                                                                      },
                                                                                    ],
                                                                                  },
                                                                                ],
                                                                              },
                                                                            ],
                                                                          },
                                                                        ],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 19,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": ",",
                                                        "start": 19,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": " ",
                                                        "start": 20,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "function-argument",
                                                        "text": "'Europe/.*'",
                                                        "start": 21,
                                                        "length": 11,
                                                        "children": [
                                                          {
                                                            "type": "literal",
                                                            "text": "'Europe/.*'",
                                                            "start": 21,
                                                            "length": 11,
                                                            "children": [
                                                              {
                                                                "type": "string-literal",
                                                                "text": "'Europe/.*'",
                                                                "start": 21,
                                                                "length": 11,
                                                                "children": [
                                                                  {
                                                                    "type": "text",
                                                                    "text": "'",
                                                                    "start": 21,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "single-quoted",
                                                                    "text": "E",
                                                                    "start": 22,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "single-quoted",
                                                                    "text": "u",
                                                                    "start": 23,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "single-quoted",
                                                                    "text": "r",
                                                                    "start": 24,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "single-quoted",
                                                                    "text": "o",
                                                                    "start": 25,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "single-quoted",
                                                                    "text": "p",
                                                                    "start": 26,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "single-quoted",
                                                                    "text": "e",
                                                                    "start": 27,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "single-quoted",
                                                                    "text": "/",
                                                                    "start": 28,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "single-quoted",
                                                                    "text": ".",
                                                                    "start": 29,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "single-quoted",
                                                                    "text": "*",
                                                                    "start": 30,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "text",
                                                                    "text": "'",
                                                                    "start": 31,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 32,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": ")",
                                                        "start": 32,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 33,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 33,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[?search(@.author, "[BR]ob")] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[?search(@.author, "[BR]ob")]",
    "start": 0,
    "length": 30,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[?search(@.author, "[BR]ob")]",
        "start": 1,
        "length": 29,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?search(@.author, "[BR]ob")]",
            "start": 1,
            "length": 29,
            "children": [
              {
                "type": "child-segment",
                "text": "[?search(@.author, "[BR]ob")]",
                "start": 1,
                "length": 29,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?search(@.author, "[BR]ob")]",
                    "start": 1,
                    "length": 29,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?search(@.author, "[BR]ob")",
                        "start": 2,
                        "length": 27,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?search(@.author, "[BR]ob")",
                            "start": 2,
                            "length": 27,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "search(@.author, "[BR]ob")",
                                "start": 3,
                                "length": 26,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "search(@.author, "[BR]ob")",
                                    "start": 3,
                                    "length": 26,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "search(@.author, "[BR]ob")",
                                        "start": 3,
                                        "length": 26,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "search(@.author, "[BR]ob")",
                                            "start": 3,
                                            "length": 26,
                                            "children": [
                                              {
                                                "type": "test-expr",
                                                "text": "search(@.author, "[BR]ob")",
                                                "start": 3,
                                                "length": 26,
                                                "children": [
                                                  {
                                                    "type": "function-expr",
                                                    "text": "search(@.author, "[BR]ob")",
                                                    "start": 3,
                                                    "length": 26,
                                                    "children": [
                                                      {
                                                        "type": "function-name",
                                                        "text": "search",
                                                        "start": 3,
                                                        "length": 6,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "(",
                                                        "start": 9,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 10,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "function-argument",
                                                        "text": "@.author",
                                                        "start": 10,
                                                        "length": 8,
                                                        "children": [
                                                          {
                                                            "type": "logical-expr",
                                                            "text": "@.author",
                                                            "start": 10,
                                                            "length": 8,
                                                            "children": [
                                                              {
                                                                "type": "logical-or-expr",
                                                                "text": "@.author",
                                                                "start": 10,
                                                                "length": 8,
                                                                "children": [
                                                                  {
                                                                    "type": "logical-and-expr",
                                                                    "text": "@.author",
                                                                    "start": 10,
                                                                    "length": 8,
                                                                    "children": [
                                                                      {
                                                                        "type": "basic-expr",
                                                                        "text": "@.author",
                                                                        "start": 10,
                                                                        "length": 8,
                                                                        "children": [
                                                                          {
                                                                            "type": "test-expr",
                                                                            "text": "@.author",
                                                                            "start": 10,
                                                                            "length": 8,
                                                                            "children": [
                                                                              {
                                                                                "type": "filter-query",
                                                                                "text": "@.author",
                                                                                "start": 10,
                                                                                "length": 8,
                                                                                "children": [
                                                                                  {
                                                                                    "type": "rel-query",
                                                                                    "text": "@.author",
                                                                                    "start": 10,
                                                                                    "length": 8,
                                                                                    "children": [
                                                                                      {
                                                                                        "type": "current-node-identifier",
                                                                                        "text": "@",
                                                                                        "start": 10,
                                                                                        "length": 1,
                                                                                        "children": [],
                                                                                      },
                                                                                      {
                                                                                        "type": "segments",
                                                                                        "text": ".author",
                                                                                        "start": 11,
                                                                                        "length": 7,
                                                                                        "children": [
                                                                                          {
                                                                                            "type": "text",
                                                                                            "text": "",
                                                                                            "start": 11,
                                                                                            "length": 0,
                                                                                            "children": [],
                                                                                          },
                                                                                          {
                                                                                            "type": "segment",
                                                                                            "text": ".author",
                                                                                            "start": 11,
                                                                                            "length": 7,
                                                                                            "children": [
                                                                                              {
                                                                                                "type": "child-segment",
                                                                                                "text": ".author",
                                                                                                "start": 11,
                                                                                                "length": 7,
                                                                                                "children": [
                                                                                                  {
                                                                                                    "type": "text",
                                                                                                    "text": ".",
                                                                                                    "start": 11,
                                                                                                    "length": 1,
                                                                                                    "children": [],
                                                                                                  },
                                                                                                  {
                                                                                                    "type": "member-name-shorthand",
                                                                                                    "text": "author",
                                                                                                    "start": 12,
                                                                                                    "length": 6,
                                                                                                    "children": [],
                                                                                                  },
                                                                                                ],
                                                                                              },
                                                                                            ],
                                                                                          },
                                                                                        ],
                                                                                      },
                                                                                    ],
                                                                                  },
                                                                                ],
                                                                              },
                                                                            ],
                                                                          },
                                                                        ],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 18,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": ",",
                                                        "start": 18,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": " ",
                                                        "start": 19,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "function-argument",
                                                        "text": ""[BR]ob"",
                                                        "start": 20,
                                                        "length": 8,
                                                        "children": [
                                                          {
                                                            "type": "literal",
                                                            "text": ""[BR]ob"",
                                                            "start": 20,
                                                            "length": 8,
                                                            "children": [
                                                              {
                                                                "type": "string-literal",
                                                                "text": ""[BR]ob"",
                                                                "start": 20,
                                                                "length": 8,
                                                                "children": [
                                                                  {
                                                                    "type": "text",
                                                                    "text": """,
                                                                    "start": 20,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "double-quoted",
                                                                    "text": "[",
                                                                    "start": 21,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "double-quoted",
                                                                    "text": "B",
                                                                    "start": 22,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "double-quoted",
                                                                    "text": "R",
                                                                    "start": 23,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "double-quoted",
                                                                    "text": "]",
                                                                    "start": 24,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "double-quoted",
                                                                    "text": "o",
                                                                    "start": 25,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "double-quoted",
                                                                    "text": "b",
                                                                    "start": 26,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                  {
                                                                    "type": "text",
                                                                    "text": """,
                                                                    "start": 27,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 28,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": ")",
                                                        "start": 28,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 29,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 29,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[?true(1)==0] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[?true(1)==0]",
    "start": 0,
    "length": 14,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[?true(1)==0]",
        "start": 1,
        "length": 13,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?true(1)==0]",
            "start": 1,
            "length": 13,
            "children": [
              {
                "type": "child-segment",
                "text": "[?true(1)==0]",
                "start": 1,
                "length": 13,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?true(1)==0]",
                    "start": 1,
                    "length": 13,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?true(1)==0",
                        "start": 2,
                        "length": 11,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?true(1)==0",
                            "start": 2,
                            "length": 11,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "true(1)==0",
                                "start": 3,
                                "length": 10,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "true(1)==0",
                                    "start": 3,
                                    "length": 10,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "true(1)==0",
                                        "start": 3,
                                        "length": 10,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "true(1)==0",
                                            "start": 3,
                                            "length": 10,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "true(1)==0",
                                                "start": 3,
                                                "length": 10,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "true(1)",
                                                    "start": 3,
                                                    "length": 7,
                                                    "children": [
                                                      {
                                                        "type": "function-expr",
                                                        "text": "true(1)",
                                                        "start": 3,
                                                        "length": 7,
                                                        "children": [
                                                          {
                                                            "type": "function-name",
                                                            "text": "true",
                                                            "start": 3,
                                                            "length": 4,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "(",
                                                            "start": 7,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 8,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "function-argument",
                                                            "text": "1",
                                                            "start": 8,
                                                            "length": 1,
                                                            "children": [
                                                              {
                                                                "type": "literal",
                                                                "text": "1",
                                                                "start": 8,
                                                                "length": 1,
                                                                "children": [
                                                                  {
                                                                    "type": "number",
                                                                    "text": "1",
                                                                    "start": 8,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 9,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": ")",
                                                            "start": 9,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 10,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": "==",
                                                    "start": 10,
                                                    "length": 2,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 12,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": "0",
                                                    "start": 12,
                                                    "length": 1,
                                                    "children": [
                                                      {
                                                        "type": "literal",
                                                        "text": "0",
                                                        "start": 12,
                                                        "length": 1,
                                                        "children": [
                                                          {
                                                            "type": "number",
                                                            "text": "0",
                                                            "start": 12,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 13,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 13,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[?true(1)==false(0)] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[?true(1)==false(0)]",
    "start": 0,
    "length": 21,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[?true(1)==false(0)]",
        "start": 1,
        "length": 20,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?true(1)==false(0)]",
            "start": 1,
            "length": 20,
            "children": [
              {
                "type": "child-segment",
                "text": "[?true(1)==false(0)]",
                "start": 1,
                "length": 20,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?true(1)==false(0)]",
                    "start": 1,
                    "length": 20,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?true(1)==false(0)",
                        "start": 2,
                        "length": 18,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?true(1)==false(0)",
                            "start": 2,
                            "length": 18,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "true(1)==false(0)",
                                "start": 3,
                                "length": 17,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "true(1)==false(0)",
                                    "start": 3,
                                    "length": 17,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "true(1)==false(0)",
                                        "start": 3,
                                        "length": 17,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "true(1)==false(0)",
                                            "start": 3,
                                            "length": 17,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "true(1)==false(0)",
                                                "start": 3,
                                                "length": 17,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "true(1)",
                                                    "start": 3,
                                                    "length": 7,
                                                    "children": [
                                                      {
                                                        "type": "function-expr",
                                                        "text": "true(1)",
                                                        "start": 3,
                                                        "length": 7,
                                                        "children": [
                                                          {
                                                            "type": "function-name",
                                                            "text": "true",
                                                            "start": 3,
                                                            "length": 4,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "(",
                                                            "start": 7,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 8,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "function-argument",
                                                            "text": "1",
                                                            "start": 8,
                                                            "length": 1,
                                                            "children": [
                                                              {
                                                                "type": "literal",
                                                                "text": "1",
                                                                "start": 8,
                                                                "length": 1,
                                                                "children": [
                                                                  {
                                                                    "type": "number",
                                                                    "text": "1",
                                                                    "start": 8,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 9,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": ")",
                                                            "start": 9,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 10,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": "==",
                                                    "start": 10,
                                                    "length": 2,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": "",
                                                    "start": 12,
                                                    "length": 0,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": "false(0)",
                                                    "start": 12,
                                                    "length": 8,
                                                    "children": [
                                                      {
                                                        "type": "function-expr",
                                                        "text": "false(0)",
                                                        "start": 12,
                                                        "length": 8,
                                                        "children": [
                                                          {
                                                            "type": "function-name",
                                                            "text": "false",
                                                            "start": 12,
                                                            "length": 5,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "(",
                                                            "start": 17,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 18,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "function-argument",
                                                            "text": "0",
                                                            "start": 18,
                                                            "length": 1,
                                                            "children": [
                                                              {
                                                                "type": "literal",
                                                                "text": "0",
                                                                "start": 18,
                                                                "length": 1,
                                                                "children": [
                                                                  {
                                                                    "type": "number",
                                                                    "text": "0",
                                                                    "start": 18,
                                                                    "length": 1,
                                                                    "children": [],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 19,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": ")",
                                                            "start": 19,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 20,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 20,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[?value(@..color) == "red"] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[?value(@..color) == "red"]",
    "start": 0,
    "length": 28,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[?value(@..color) == "red"]",
        "start": 1,
        "length": 27,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?value(@..color) == "red"]",
            "start": 1,
            "length": 27,
            "children": [
              {
                "type": "child-segment",
                "text": "[?value(@..color) == "red"]",
                "start": 1,
                "length": 27,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?value(@..color) == "red"]",
                    "start": 1,
                    "length": 27,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?value(@..color) == "red"",
                        "start": 2,
                        "length": 25,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?value(@..color) == "red"",
                            "start": 2,
                            "length": 25,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "value(@..color) == "red"",
                                "start": 3,
                                "length": 24,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "value(@..color) == "red"",
                                    "start": 3,
                                    "length": 24,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "value(@..color) == "red"",
                                        "start": 3,
                                        "length": 24,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "value(@..color) == "red"",
                                            "start": 3,
                                            "length": 24,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "value(@..color) == "red"",
                                                "start": 3,
                                                "length": 24,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "value(@..color)",
                                                    "start": 3,
                                                    "length": 15,
                                                    "children": [
                                                      {
                                                        "type": "function-expr",
                                                        "text": "value(@..color)",
                                                        "start": 3,
                                                        "length": 15,
                                                        "children": [
                                                          {
                                                            "type": "function-name",
                                                            "text": "value",
                                                            "start": 3,
                                                            "length": 5,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "(",
                                                            "start": 8,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 9,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "function-argument",
                                                            "text": "@..color",
                                                            "start": 9,
                                                            "length": 8,
                                                            "children": [
                                                              {
                                                                "type": "logical-expr",
                                                                "text": "@..color",
                                                                "start": 9,
                                                                "length": 8,
                                                                "children": [
                                                                  {
                                                                    "type": "logical-or-expr",
                                                                    "text": "@..color",
                                                                    "start": 9,
                                                                    "length": 8,
                                                                    "children": [
                                                                      {
                                                                        "type": "logical-and-expr",
                                                                        "text": "@..color",
                                                                        "start": 9,
                                                                        "length": 8,
                                                                        "children": [
                                                                          {
                                                                            "type": "basic-expr",
                                                                            "text": "@..color",
                                                                            "start": 9,
                                                                            "length": 8,
                                                                            "children": [
                                                                              {
                                                                                "type": "test-expr",
                                                                                "text": "@..color",
                                                                                "start": 9,
                                                                                "length": 8,
                                                                                "children": [
                                                                                  {
                                                                                    "type": "filter-query",
                                                                                    "text": "@..color",
                                                                                    "start": 9,
                                                                                    "length": 8,
                                                                                    "children": [
                                                                                      {
                                                                                        "type": "rel-query",
                                                                                        "text": "@..color",
                                                                                        "start": 9,
                                                                                        "length": 8,
                                                                                        "children": [
                                                                                          {
                                                                                            "type": "current-node-identifier",
                                                                                            "text": "@",
                                                                                            "start": 9,
                                                                                            "length": 1,
                                                                                            "children": [],
                                                                                          },
                                                                                          {
                                                                                            "type": "segments",
                                                                                            "text": "..color",
                                                                                            "start": 10,
                                                                                            "length": 7,
                                                                                            "children": [
                                                                                              {
                                                                                                "type": "text",
                                                                                                "text": "",
                                                                                                "start": 10,
                                                                                                "length": 0,
                                                                                                "children": [],
                                                                                              },
                                                                                              {
                                                                                                "type": "segment",
                                                                                                "text": "..color",
                                                                                                "start": 10,
                                                                                                "length": 7,
                                                                                                "children": [
                                                                                                  {
                                                                                                    "type": "descendant-segment",
                                                                                                    "text": "..color",
                                                                                                    "start": 10,
                                                                                                    "length": 7,
                                                                                                    "children": [
                                                                                                      {
                                                                                                        "type": "text",
                                                                                                        "text": "..",
                                                                                                        "start": 10,
                                                                                                        "length": 2,
                                                                                                        "children": [],
                                                                                                      },
                                                                                                      {
                                                                                                        "type": "member-name-shorthand",
                                                                                                        "text": "color",
                                                                                                        "start": 12,
                                                                                                        "length": 5,
                                                                                                        "children": [],
                                                                                                      },
                                                                                                    ],
                                                                                                  },
                                                                                                ],
                                                                                              },
                                                                                            ],
                                                                                          },
                                                                                        ],
                                                                                      },
                                                                                    ],
                                                                                  },
                                                                                ],
                                                                              },
                                                                            ],
                                                                          },
                                                                        ],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 17,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": ")",
                                                            "start": 17,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 18,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": "==",
                                                    "start": 19,
                                                    "length": 2,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 21,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": ""red"",
                                                    "start": 22,
                                                    "length": 5,
                                                    "children": [
                                                      {
                                                        "type": "literal",
                                                        "text": ""red"",
                                                        "start": 22,
                                                        "length": 5,
                                                        "children": [
                                                          {
                                                            "type": "string-literal",
                                                            "text": ""red"",
                                                            "start": 22,
                                                            "length": 5,
                                                            "children": [
                                                              {
                                                                "type": "text",
                                                                "text": """,
                                                                "start": 22,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "double-quoted",
                                                                "text": "r",
                                                                "start": 23,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "double-quoted",
                                                                "text": "e",
                                                                "start": 24,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "double-quoted",
                                                                "text": "d",
                                                                "start": 25,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "text",
                                                                "text": """,
                                                                "start": 26,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 27,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 27,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[?value(@..color) == "red"] 2`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[?value(@..color) == "red"]",
    "start": 0,
    "length": 28,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[?value(@..color) == "red"]",
        "start": 1,
        "length": 27,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?value(@..color) == "red"]",
            "start": 1,
            "length": 27,
            "children": [
              {
                "type": "child-segment",
                "text": "[?value(@..color) == "red"]",
                "start": 1,
                "length": 27,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?value(@..color) == "red"]",
                    "start": 1,
                    "length": 27,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?value(@..color) == "red"",
                        "start": 2,
                        "length": 25,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?value(@..color) == "red"",
                            "start": 2,
                            "length": 25,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "value(@..color) == "red"",
                                "start": 3,
                                "length": 24,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "value(@..color) == "red"",
                                    "start": 3,
                                    "length": 24,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "value(@..color) == "red"",
                                        "start": 3,
                                        "length": 24,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "value(@..color) == "red"",
                                            "start": 3,
                                            "length": 24,
                                            "children": [
                                              {
                                                "type": "comparison-expr",
                                                "text": "value(@..color) == "red"",
                                                "start": 3,
                                                "length": 24,
                                                "children": [
                                                  {
                                                    "type": "comparable",
                                                    "text": "value(@..color)",
                                                    "start": 3,
                                                    "length": 15,
                                                    "children": [
                                                      {
                                                        "type": "function-expr",
                                                        "text": "value(@..color)",
                                                        "start": 3,
                                                        "length": 15,
                                                        "children": [
                                                          {
                                                            "type": "function-name",
                                                            "text": "value",
                                                            "start": 3,
                                                            "length": 5,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "(",
                                                            "start": 8,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 9,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "function-argument",
                                                            "text": "@..color",
                                                            "start": 9,
                                                            "length": 8,
                                                            "children": [
                                                              {
                                                                "type": "logical-expr",
                                                                "text": "@..color",
                                                                "start": 9,
                                                                "length": 8,
                                                                "children": [
                                                                  {
                                                                    "type": "logical-or-expr",
                                                                    "text": "@..color",
                                                                    "start": 9,
                                                                    "length": 8,
                                                                    "children": [
                                                                      {
                                                                        "type": "logical-and-expr",
                                                                        "text": "@..color",
                                                                        "start": 9,
                                                                        "length": 8,
                                                                        "children": [
                                                                          {
                                                                            "type": "basic-expr",
                                                                            "text": "@..color",
                                                                            "start": 9,
                                                                            "length": 8,
                                                                            "children": [
                                                                              {
                                                                                "type": "test-expr",
                                                                                "text": "@..color",
                                                                                "start": 9,
                                                                                "length": 8,
                                                                                "children": [
                                                                                  {
                                                                                    "type": "filter-query",
                                                                                    "text": "@..color",
                                                                                    "start": 9,
                                                                                    "length": 8,
                                                                                    "children": [
                                                                                      {
                                                                                        "type": "rel-query",
                                                                                        "text": "@..color",
                                                                                        "start": 9,
                                                                                        "length": 8,
                                                                                        "children": [
                                                                                          {
                                                                                            "type": "current-node-identifier",
                                                                                            "text": "@",
                                                                                            "start": 9,
                                                                                            "length": 1,
                                                                                            "children": [],
                                                                                          },
                                                                                          {
                                                                                            "type": "segments",
                                                                                            "text": "..color",
                                                                                            "start": 10,
                                                                                            "length": 7,
                                                                                            "children": [
                                                                                              {
                                                                                                "type": "text",
                                                                                                "text": "",
                                                                                                "start": 10,
                                                                                                "length": 0,
                                                                                                "children": [],
                                                                                              },
                                                                                              {
                                                                                                "type": "segment",
                                                                                                "text": "..color",
                                                                                                "start": 10,
                                                                                                "length": 7,
                                                                                                "children": [
                                                                                                  {
                                                                                                    "type": "descendant-segment",
                                                                                                    "text": "..color",
                                                                                                    "start": 10,
                                                                                                    "length": 7,
                                                                                                    "children": [
                                                                                                      {
                                                                                                        "type": "text",
                                                                                                        "text": "..",
                                                                                                        "start": 10,
                                                                                                        "length": 2,
                                                                                                        "children": [],
                                                                                                      },
                                                                                                      {
                                                                                                        "type": "member-name-shorthand",
                                                                                                        "text": "color",
                                                                                                        "start": 12,
                                                                                                        "length": 5,
                                                                                                        "children": [],
                                                                                                      },
                                                                                                    ],
                                                                                                  },
                                                                                                ],
                                                                                              },
                                                                                            ],
                                                                                          },
                                                                                        ],
                                                                                      },
                                                                                    ],
                                                                                  },
                                                                                ],
                                                                              },
                                                                            ],
                                                                          },
                                                                        ],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": "",
                                                            "start": 17,
                                                            "length": 0,
                                                            "children": [],
                                                          },
                                                          {
                                                            "type": "text",
                                                            "text": ")",
                                                            "start": 17,
                                                            "length": 1,
                                                            "children": [],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 18,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparison-op",
                                                    "text": "==",
                                                    "start": 19,
                                                    "length": 2,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "text",
                                                    "text": " ",
                                                    "start": 21,
                                                    "length": 1,
                                                    "children": [],
                                                  },
                                                  {
                                                    "type": "comparable",
                                                    "text": ""red"",
                                                    "start": 22,
                                                    "length": 5,
                                                    "children": [
                                                      {
                                                        "type": "literal",
                                                        "text": ""red"",
                                                        "start": 22,
                                                        "length": 5,
                                                        "children": [
                                                          {
                                                            "type": "string-literal",
                                                            "text": ""red"",
                                                            "start": 22,
                                                            "length": 5,
                                                            "children": [
                                                              {
                                                                "type": "text",
                                                                "text": """,
                                                                "start": 22,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "double-quoted",
                                                                "text": "r",
                                                                "start": 23,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "double-quoted",
                                                                "text": "e",
                                                                "start": 24,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "double-quoted",
                                                                "text": "d",
                                                                "start": 25,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                              {
                                                                "type": "text",
                                                                "text": """,
                                                                "start": 26,
                                                                "length": 1,
                                                                "children": [],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 27,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 27,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[?value(@..color)] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[?value(@..color)]",
    "start": 0,
    "length": 19,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[?value(@..color)]",
        "start": 1,
        "length": 18,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[?value(@..color)]",
            "start": 1,
            "length": 18,
            "children": [
              {
                "type": "child-segment",
                "text": "[?value(@..color)]",
                "start": 1,
                "length": 18,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[?value(@..color)]",
                    "start": 1,
                    "length": 18,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "?value(@..color)",
                        "start": 2,
                        "length": 16,
                        "children": [
                          {
                            "type": "filter-selector",
                            "text": "?value(@..color)",
                            "start": 2,
                            "length": 16,
                            "children": [
                              {
                                "type": "text",
                                "text": "?",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "logical-expr",
                                "text": "value(@..color)",
                                "start": 3,
                                "length": 15,
                                "children": [
                                  {
                                    "type": "logical-or-expr",
                                    "text": "value(@..color)",
                                    "start": 3,
                                    "length": 15,
                                    "children": [
                                      {
                                        "type": "logical-and-expr",
                                        "text": "value(@..color)",
                                        "start": 3,
                                        "length": 15,
                                        "children": [
                                          {
                                            "type": "basic-expr",
                                            "text": "value(@..color)",
                                            "start": 3,
                                            "length": 15,
                                            "children": [
                                              {
                                                "type": "test-expr",
                                                "text": "value(@..color)",
                                                "start": 3,
                                                "length": 15,
                                                "children": [
                                                  {
                                                    "type": "function-expr",
                                                    "text": "value(@..color)",
                                                    "start": 3,
                                                    "length": 15,
                                                    "children": [
                                                      {
                                                        "type": "function-name",
                                                        "text": "value",
                                                        "start": 3,
                                                        "length": 5,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "(",
                                                        "start": 8,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 9,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "function-argument",
                                                        "text": "@..color",
                                                        "start": 9,
                                                        "length": 8,
                                                        "children": [
                                                          {
                                                            "type": "logical-expr",
                                                            "text": "@..color",
                                                            "start": 9,
                                                            "length": 8,
                                                            "children": [
                                                              {
                                                                "type": "logical-or-expr",
                                                                "text": "@..color",
                                                                "start": 9,
                                                                "length": 8,
                                                                "children": [
                                                                  {
                                                                    "type": "logical-and-expr",
                                                                    "text": "@..color",
                                                                    "start": 9,
                                                                    "length": 8,
                                                                    "children": [
                                                                      {
                                                                        "type": "basic-expr",
                                                                        "text": "@..color",
                                                                        "start": 9,
                                                                        "length": 8,
                                                                        "children": [
                                                                          {
                                                                            "type": "test-expr",
                                                                            "text": "@..color",
                                                                            "start": 9,
                                                                            "length": 8,
                                                                            "children": [
                                                                              {
                                                                                "type": "filter-query",
                                                                                "text": "@..color",
                                                                                "start": 9,
                                                                                "length": 8,
                                                                                "children": [
                                                                                  {
                                                                                    "type": "rel-query",
                                                                                    "text": "@..color",
                                                                                    "start": 9,
                                                                                    "length": 8,
                                                                                    "children": [
                                                                                      {
                                                                                        "type": "current-node-identifier",
                                                                                        "text": "@",
                                                                                        "start": 9,
                                                                                        "length": 1,
                                                                                        "children": [],
                                                                                      },
                                                                                      {
                                                                                        "type": "segments",
                                                                                        "text": "..color",
                                                                                        "start": 10,
                                                                                        "length": 7,
                                                                                        "children": [
                                                                                          {
                                                                                            "type": "text",
                                                                                            "text": "",
                                                                                            "start": 10,
                                                                                            "length": 0,
                                                                                            "children": [],
                                                                                          },
                                                                                          {
                                                                                            "type": "segment",
                                                                                            "text": "..color",
                                                                                            "start": 10,
                                                                                            "length": 7,
                                                                                            "children": [
                                                                                              {
                                                                                                "type": "descendant-segment",
                                                                                                "text": "..color",
                                                                                                "start": 10,
                                                                                                "length": 7,
                                                                                                "children": [
                                                                                                  {
                                                                                                    "type": "text",
                                                                                                    "text": "..",
                                                                                                    "start": 10,
                                                                                                    "length": 2,
                                                                                                    "children": [],
                                                                                                  },
                                                                                                  {
                                                                                                    "type": "member-name-shorthand",
                                                                                                    "text": "color",
                                                                                                    "start": 12,
                                                                                                    "length": 5,
                                                                                                    "children": [],
                                                                                                  },
                                                                                                ],
                                                                                              },
                                                                                            ],
                                                                                          },
                                                                                        ],
                                                                                      },
                                                                                    ],
                                                                                  },
                                                                                ],
                                                                              },
                                                                            ],
                                                                          },
                                                                        ],
                                                                      },
                                                                    ],
                                                                  },
                                                                ],
                                                              },
                                                            ],
                                                          },
                                                        ],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": "",
                                                        "start": 17,
                                                        "length": 0,
                                                        "children": [],
                                                      },
                                                      {
                                                        "type": "text",
                                                        "text": ")",
                                                        "start": 17,
                                                        "length": 1,
                                                        "children": [],
                                                      },
                                                    ],
                                                  },
                                                ],
                                              },
                                            ],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 18,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 18,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[-2] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[-2]",
    "start": 0,
    "length": 5,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[-2]",
        "start": 1,
        "length": 4,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[-2]",
            "start": 1,
            "length": 4,
            "children": [
              {
                "type": "child-segment",
                "text": "[-2]",
                "start": 1,
                "length": 4,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[-2]",
                    "start": 1,
                    "length": 4,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "-2",
                        "start": 2,
                        "length": 2,
                        "children": [
                          {
                            "type": "index-selector",
                            "text": "-2",
                            "start": 2,
                            "length": 2,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 4,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[0, 0] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[0, 0]",
    "start": 0,
    "length": 7,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[0, 0]",
        "start": 1,
        "length": 6,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[0, 0]",
            "start": 1,
            "length": 6,
            "children": [
              {
                "type": "child-segment",
                "text": "[0, 0]",
                "start": 1,
                "length": 6,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[0, 0]",
                    "start": 1,
                    "length": 6,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "0",
                        "start": 2,
                        "length": 1,
                        "children": [
                          {
                            "type": "index-selector",
                            "text": "0",
                            "start": 2,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 3,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": ",",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": " ",
                        "start": 4,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "0",
                        "start": 5,
                        "length": 1,
                        "children": [
                          {
                            "type": "index-selector",
                            "text": "0",
                            "start": 5,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 6,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 6,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[0, 3] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[0, 3]",
    "start": 0,
    "length": 7,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[0, 3]",
        "start": 1,
        "length": 6,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[0, 3]",
            "start": 1,
            "length": 6,
            "children": [
              {
                "type": "child-segment",
                "text": "[0, 3]",
                "start": 1,
                "length": 6,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[0, 3]",
                    "start": 1,
                    "length": 6,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "0",
                        "start": 2,
                        "length": 1,
                        "children": [
                          {
                            "type": "index-selector",
                            "text": "0",
                            "start": 2,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 3,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": ",",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": " ",
                        "start": 4,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "3",
                        "start": 5,
                        "length": 1,
                        "children": [
                          {
                            "type": "index-selector",
                            "text": "3",
                            "start": 5,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 6,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 6,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[0:2, 5] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[0:2, 5]",
    "start": 0,
    "length": 9,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[0:2, 5]",
        "start": 1,
        "length": 8,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[0:2, 5]",
            "start": 1,
            "length": 8,
            "children": [
              {
                "type": "child-segment",
                "text": "[0:2, 5]",
                "start": 1,
                "length": 8,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[0:2, 5]",
                    "start": 1,
                    "length": 8,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "0:2",
                        "start": 2,
                        "length": 3,
                        "children": [
                          {
                            "type": "slice-selector",
                            "text": "0:2",
                            "start": 2,
                            "length": 3,
                            "children": [
                              {
                                "type": "start",
                                "text": "0",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": ":",
                                "start": 3,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 4,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "end",
                                "text": "2",
                                "start": 4,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 5,
                                "length": 0,
                                "children": [],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 5,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": ",",
                        "start": 5,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": " ",
                        "start": 6,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "5",
                        "start": 7,
                        "length": 1,
                        "children": [
                          {
                            "type": "index-selector",
                            "text": "5",
                            "start": 7,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 8,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 8,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[1:3] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[1:3]",
    "start": 0,
    "length": 6,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[1:3]",
        "start": 1,
        "length": 5,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[1:3]",
            "start": 1,
            "length": 5,
            "children": [
              {
                "type": "child-segment",
                "text": "[1:3]",
                "start": 1,
                "length": 5,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[1:3]",
                    "start": 1,
                    "length": 5,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "1:3",
                        "start": 2,
                        "length": 3,
                        "children": [
                          {
                            "type": "slice-selector",
                            "text": "1:3",
                            "start": 2,
                            "length": 3,
                            "children": [
                              {
                                "type": "start",
                                "text": "1",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": ":",
                                "start": 3,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 4,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "end",
                                "text": "3",
                                "start": 4,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 5,
                                "length": 0,
                                "children": [],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 5,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 5,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[1:5:2] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[1:5:2]",
    "start": 0,
    "length": 8,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[1:5:2]",
        "start": 1,
        "length": 7,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[1:5:2]",
            "start": 1,
            "length": 7,
            "children": [
              {
                "type": "child-segment",
                "text": "[1:5:2]",
                "start": 1,
                "length": 7,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[1:5:2]",
                    "start": 1,
                    "length": 7,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "1:5:2",
                        "start": 2,
                        "length": 5,
                        "children": [
                          {
                            "type": "slice-selector",
                            "text": "1:5:2",
                            "start": 2,
                            "length": 5,
                            "children": [
                              {
                                "type": "start",
                                "text": "1",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": ":",
                                "start": 3,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 4,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "end",
                                "text": "5",
                                "start": 4,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 5,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": ":",
                                "start": 5,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 6,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "step",
                                "text": "2",
                                "start": 6,
                                "length": 1,
                                "children": [],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 7,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 7,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[1] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[1]",
    "start": 0,
    "length": 4,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[1]",
        "start": 1,
        "length": 3,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[1]",
            "start": 1,
            "length": 3,
            "children": [
              {
                "type": "child-segment",
                "text": "[1]",
                "start": 1,
                "length": 3,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[1]",
                    "start": 1,
                    "length": 3,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "1",
                        "start": 2,
                        "length": 1,
                        "children": [
                          {
                            "type": "index-selector",
                            "text": "1",
                            "start": 2,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 3,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[1] 2`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[1]",
    "start": 0,
    "length": 4,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[1]",
        "start": 1,
        "length": 3,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[1]",
            "start": 1,
            "length": 3,
            "children": [
              {
                "type": "child-segment",
                "text": "[1]",
                "start": 1,
                "length": 3,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[1]",
                    "start": 1,
                    "length": 3,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "1",
                        "start": 2,
                        "length": 1,
                        "children": [
                          {
                            "type": "index-selector",
                            "text": "1",
                            "start": 2,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 3,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[2] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[2]",
    "start": 0,
    "length": 4,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[2]",
        "start": 1,
        "length": 3,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[2]",
            "start": 1,
            "length": 3,
            "children": [
              {
                "type": "child-segment",
                "text": "[2]",
                "start": 1,
                "length": 3,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[2]",
                    "start": 1,
                    "length": 3,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "2",
                        "start": 2,
                        "length": 1,
                        "children": [
                          {
                            "type": "index-selector",
                            "text": "2",
                            "start": 2,
                            "length": 1,
                            "children": [],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 3,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 3,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[5:] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[5:]",
    "start": 0,
    "length": 5,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[5:]",
        "start": 1,
        "length": 4,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[5:]",
            "start": 1,
            "length": 4,
            "children": [
              {
                "type": "child-segment",
                "text": "[5:]",
                "start": 1,
                "length": 4,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[5:]",
                    "start": 1,
                    "length": 4,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "5:",
                        "start": 2,
                        "length": 2,
                        "children": [
                          {
                            "type": "slice-selector",
                            "text": "5:",
                            "start": 2,
                            "length": 2,
                            "children": [
                              {
                                "type": "start",
                                "text": "5",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": ":",
                                "start": 3,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 4,
                                "length": 0,
                                "children": [],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 4,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 4,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;

exports[`parse cst-corpus $[5:1:-2] 1`] = `
{
  "root": {
    "type": "jsonpath-query",
    "text": "$[5:1:-2]",
    "start": 0,
    "length": 9,
    "children": [
      {
        "type": "root-identifier",
        "text": "$",
        "start": 0,
        "length": 1,
        "children": [],
      },
      {
        "type": "segments",
        "text": "[5:1:-2]",
        "start": 1,
        "length": 8,
        "children": [
          {
            "type": "text",
            "text": "",
            "start": 1,
            "length": 0,
            "children": [],
          },
          {
            "type": "segment",
            "text": "[5:1:-2]",
            "start": 1,
            "length": 8,
            "children": [
              {
                "type": "child-segment",
                "text": "[5:1:-2]",
                "start": 1,
                "length": 8,
                "children": [
                  {
                    "type": "bracketed-selection",
                    "text": "[5:1:-2]",
                    "start": 1,
                    "length": 8,
                    "children": [
                      {
                        "type": "text",
                        "text": "[",
                        "start": 1,
                        "length": 1,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 2,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "selector",
                        "text": "5:1:-2",
                        "start": 2,
                        "length": 6,
                        "children": [
                          {
                            "type": "slice-selector",
                            "text": "5:1:-2",
                            "start": 2,
                            "length": 6,
                            "children": [
                              {
                                "type": "start",
                                "text": "5",
                                "start": 2,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 3,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": ":",
                                "start": 3,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 4,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "end",
                                "text": "1",
                                "start": 4,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 5,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": ":",
                                "start": 5,
                                "length": 1,
                                "children": [],
                              },
                              {
                                "type": "text",
                                "text": "",
                                "start": 6,
                                "length": 0,
                                "children": [],
                              },
                              {
                                "type": "step",
                                "text": "-2",
                                "start": 6,
                                "length": 2,
                                "children": [],
                              },
                            ],
                          },
                        ],
                      },
                      {
                        "type": "text",
                        "text": "",
                        "start": 8,
                        "length": 0,
                        "children": [],
                      },
                      {
                        "type": "text",
                        "text": "]",
                        "start": 8,
                        "length": 1,
                        "children": [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
}
`;
